"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[810],{5810:(w,f,r)=>{r.r(f),r.d(f,{default:()=>X});var x=r(4748),u=r(553),b=r(8533),v=r(6814),C=r(1447),g=r(8991),h=r(6223),c=r(2296),_=r(5986),n=r(1043),a=r(617),p=r(4516),d=r(5940),T=r(4913),j=r(6321),Z=r(4825),S=r(6676),U=r.n(S),k=r(6420),t=r(5879),P=r(8340),F=r(6036),y=r(3403),A=r(3814);const q=["otpNgForm"];function I(e,l){1&e&&t._UZ(0,"mat-icon",19),2&e&&t.Q6J("svgIcon","heroicons_solid:eye")}function E(e,l){1&e&&t._UZ(0,"mat-icon",19),2&e&&t.Q6J("svgIcon","heroicons_solid:eye-slash")}function L(e,l){1&e&&(t.TgZ(0,"mat-error",20),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"login.required_otp")," "))}function Y(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(s){t.CHM(i);const m=t.oxw(3);return t.KtG(m.sendPhoneOTP(s,"sms"))}),t.TgZ(1,"span"),t._uU(2," SMS "),t.qZA()()}if(2&e){const i=t.oxw(3);t.Udp("color",i.project.branding.buttonTxtColor)("background",i.project.branding.buttonColor),t.ekj("col-span-2","both"!==i.phoneGateway),t.Q6J("disabled",!i.canSendOTP())}}function N(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(s){t.CHM(i);const m=t.oxw(3);return t.KtG(m.sendPhoneOTP(s,"whatsapp"))}),t.TgZ(1,"span"),t._uU(2," Whatsapp "),t.qZA()()}if(2&e){const i=t.oxw(3);t.Udp("color",i.project.branding.buttonTxtColor)("background",i.project.branding.buttonColor),t.ekj("col-span-2","both"!==i.phoneGateway),t.Q6J("disabled",!i.canSendOTP())}}function M(e,l){if(1&e&&(t.TgZ(0,"div",21),t.YNc(1,Y,3,7,"button",22),t.YNc(2,N,3,7,"button",23),t.qZA()),2&e){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf","sms"===i.phoneGateway||"both"===i.phoneGateway),t.xp6(1),t.Q6J("ngIf","whatsapp"===i.phoneGateway||"both"===i.phoneGateway)}}function O(e,l){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const i=t.oxw(3);t.xp6(1),t.hij(" Time remaining: ",i.remainingTime," ")}}function K(e,l){1&e&&(t.TgZ(0,"span"),t._uU(1,"Resend the"),t.qZA())}function J(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"a",29),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(3);return t.KtG(s._initValidations())}),t._uU(1,"verification code"),t.qZA()}}function D(e,l){if(1&e&&(t.TgZ(0,"div",26),t.YNc(1,O,2,1,"span",27),t.YNc(2,K,2,0,"span",27),t.YNc(3,J,2,0,"a",28),t.qZA()),2&e){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf","Expired"!==i.remainingTime),t.xp6(1),t.Q6J("ngIf","Expired"===i.remainingTime),t.xp6(1),t.Q6J("ngIf","Expired"===i.remainingTime)}}const G=function(e){return{destination:e}};function W(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"div",6),t._UZ(3,"img",7),t.qZA(),t.TgZ(4,"div",8),t._uU(5),t.ALo(6,"transloco"),t.qZA(),t.TgZ(7,"form",9,10)(9,"mat-form-field",11)(10,"mat-label"),t._uU(11,"OTP"),t.qZA(),t.TgZ(12,"input",12,13),t.NdJ("input",function(s){t.CHM(i);const m=t.oxw();return t.KtG(m.onInput(s))})("keyup",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.checkSixDigits())}),t.qZA(),t.TgZ(14,"button",14),t.NdJ("click",function(){t.CHM(i);const s=t.MAs(13);return t.KtG(s.type="password"===s.type?"text":"password")}),t.YNc(15,I,1,1,"mat-icon",15),t.YNc(16,E,1,1,"mat-icon",15),t.qZA(),t.YNc(17,L,3,3,"mat-error",16),t.qZA()(),t.YNc(18,M,3,2,"div",17),t.YNc(19,D,4,3,"div",18),t.qZA()()}if(2&e){const i=t.MAs(13),o=t.oxw();t.xp6(3),t.Q6J("src",o.project.branding.logo,t.LSH),t.xp6(2),t.hij(" ",t.xi3(6,9,"signup.verify_code_sent",t.VKq(12,G,o.currentValidation.email||o.currentValidation.countryCode+" "+o.currentValidation.phone))," "),t.xp6(2),t.Q6J("formGroup",o.otpForm),t.xp6(5),t.Q6J("formControlName","otp"),t.xp6(3),t.Q6J("ngIf","password"===i.type),t.xp6(1),t.Q6J("ngIf","text"===i.type),t.xp6(1),t.Q6J("ngIf",o.otpForm.get("otp").hasError("required")),t.xp6(1),t.Q6J("ngIf",!o.loading&&o.currentValidation.phone&&"both"===o.projectFlow.onboardingSettings.signUpForm.phoneGateway),t.xp6(1),t.Q6J("ngIf",o.remainingTime)}}function Q(e,l){if(1&e&&(t.TgZ(0,"div",4)(1,"div",5)(2,"div",30),t._uU(3),t.ALo(4,"transloco"),t.qZA()()()),2&e){const i=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,1,"signup.error_"+i.errorContent.message)," ")}}function $(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"div",5)(1,"div",35),t._UZ(2,"img",36),t.TgZ(3,"h2",37),t._uU(4),t.ALo(5,"transloco"),t.qZA(),t.TgZ(6,"h3",38),t._uU(7),t.ALo(8,"transloco"),t.qZA()(),t.TgZ(9,"div",39)(10,"button",40),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.startKYC())}),t.TgZ(11,"span"),t._uU(12),t.ALo(13,"transloco"),t.qZA()(),t.TgZ(14,"button",41),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.continueWitoutKYC())}),t.TgZ(15,"span"),t._uU(16),t.ALo(17,"transloco"),t.qZA()()(),t.TgZ(18,"div",34),t._UZ(19,"languages"),t.qZA()()}if(2&e){const i=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,10,"add_biometrics.verifik_title")," "),t.xp6(3),t.Oqu(t.lcZ(8,12,"add_biometrics.verifik_content")),t.xp6(3),t.Udp("color",i.project.branding.buttonTxtColor)("background",i.project.branding.buttonColor),t.xp6(2),t.hij("",t.lcZ(13,14,"add_biometrics.verifik_button")," "),t.xp6(3),t.Udp("color",i.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(17,16,"add_biometrics.verifik_dismiss")," ")}}function B(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"div",42)(1,"div",35)(2,"h1",43),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t._UZ(5,"img",44)(6,"img",45),t.TgZ(7,"h2",46),t._uU(8),t.ALo(9,"transloco"),t.qZA(),t.TgZ(10,"h3",47),t._uU(11),t.ALo(12,"transloco"),t.qZA()(),t.TgZ(13,"div",39)(14,"button",40),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.startKYC())}),t.TgZ(15,"span"),t._uU(16),t.ALo(17,"transloco"),t.qZA()(),t.TgZ(18,"button",41),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(2);return t.KtG(s.continueWitoutKYC())}),t.TgZ(19,"span"),t._uU(20),t.ALo(21,"transloco"),t.qZA()()()()}if(2&e){const i=t.oxw(2);t.xp6(2),t.Udp("color",i.project.branding.titleColor),t.xp6(1),t.AsE(" ",t.lcZ(4,16,"signup.kyc_start_popup.project_title")," ",i.project.name," "),t.xp6(4),t.Udp("color",i.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(9,18,"signup.kyc_start_popup.title")," "),t.xp6(3),t.Oqu(t.lcZ(12,20,"signup.kyc_start_popup.content")),t.xp6(3),t.Udp("color",i.project.branding.buttonTxtColor)("background",i.project.branding.buttonColor),t.xp6(2),t.hij("",t.lcZ(17,22,"add_biometrics.button")," "),t.xp6(3),t.Udp("color",i.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(21,24,"add_biometrics.dismiss")," ")}}function H(e,l){if(1&e&&(t.TgZ(0,"div",31),t.YNc(1,$,20,18,"div",32),t.YNc(2,B,22,26,"div",33),t.TgZ(3,"div",34),t._UZ(4,"languages"),t.qZA()()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.isVerifikProject),t.xp6(1),t.Q6J("ngIf",!i.isVerifikProject)}}function z(e,l){1&e&&(t.TgZ(0,"div",48),t._UZ(1,"div",49),t.qZA())}const X=[{path:":id",component:(()=>{class e{constructor(i,o,s,m,R,tt){this._KYCService=i,this._splashScreenService=o,this._activatedRoute=s,this._changeDetectorRef=m,this._router=R,this._formBuilder=tt,this._splashScreenService.show()}ngOnInit(){this._initForm(),this._activatedRoute.params.subscribe(i=>{this.isVerifikProject=i.id===u.N.verifikProject||i.id===u.N.sandboxProject,this.token=this._router.url.split("?token=")[1],localStorage.setItem("accessToken",this.token),this._requestAppRegistration()})}_requestAppRegistration(){this._KYCService.getAppRegistration({populates:["project","projectFlow","emailValidation","phoneValidation"]}).subscribe({next:i=>{this.appRegistration=i.data,this.project=new b.XR(this.appRegistration.project),this.projectFlow=new b.nd(this.appRegistration.projectFlow),console.log({projectFlow:this.projectFlow})},error:i=>{this.errorContent=i.error,this._splashScreenService.hide()},complete:()=>{this._splashScreenService.hide(),this._initValidations()}})}_initValidations(){this.currentValidation=null,setTimeout(()=>{this._initEmailValidation(),this._initPhoneValidation(),this._completeAppRegistration(),this._changeDetectorRef.detectChanges()},500)}_initEmailValidation(){"mailgun"===this.projectFlow.onboardingSettings.signUpForm.emailGateway&&"validated"!==this.appRegistration.emailValidation?.status&&(this.loading||(this.loading=!0,this._splashScreenService.show(),this._KYCService.sendEmailValidation(this.appRegistration.email).subscribe({next:i=>{this.currentValidation=i.data,this._linkValidation(),this.startCountdown(),this.loading=!1,this._splashScreenService.hide()},error:i=>{this.errorContent=i.error,this._splashScreenService.hide()},complete:()=>{}})))}_initPhoneValidation(i){if(this.phoneGateway=i||this.projectFlow.onboardingSettings.signUpForm.phoneGateway,"both"===this.phoneGateway&&!this.currentValidation&&(this.currentValidation=this.appRegistration.phoneValidation?"validated"!==this.appRegistration.phoneValidation?.status?this.appRegistration.phoneValidation:null:{_id:"new",countryCode:this.appRegistration.countryCode,phone:this.appRegistration.phone},console.log({currentValidation:this.currentValidation})),["whatsapp","sms"].includes(this.phoneGateway)&&"validated"!==this.appRegistration.phoneValidation?.status&&!this.loading)return this.loading=!0,this._splashScreenService.show(),this._KYCService.sendPhoneValidation(this.appRegistration.countryCode,this.appRegistration.phone).subscribe({next:o=>{this.currentValidation=o.data,this._linkValidation(),this.startCountdown(),this.loading=!1,this._splashScreenService.hide()},error:o=>{this.errorContent=o.error,this.loading=!1,this._splashScreenService.hide()},complete:()=>{this.loading=!1,this._splashScreenService.hide(),i&&this._confirmPhoneValidation()}}),!0}_initForm(){this.otpForm=this._formBuilder.group({otp:["",[h.kI.required]]})}startCountdown(){this.countdownSubscription&&this.countdownSubscription.unsubscribe();const i=new Date(U()().add(2,"minute").format("YYYY-MM-DD HH:mm:ss")).getTime();this.countdownSubscription=function V(e=0,l=j.z){return e<0&&(e=0),(0,Z.H)(e,e,l)}(1e3).subscribe(()=>{let o=(new Date).getTime(),s=i-o;if(s<0)return this.remainingTime="Expired",void this.countdownSubscription.unsubscribe();let m=Math.floor(s%36e5/6e4),R=Math.floor(s%6e4/1e3);this.remainingTime=`${m}m ${R}s`})}onInput(i){const o=i.target;o.value=o.value.replace(/[^0-9]/g,"")}checkSixDigits(){6===this.otpForm.value.otp?.length&&this.confirmValidation()}confirmValidation(){this.loading||(this.loading=!!(this.currentValidation.email||this.currentValidation.phone&&"both"!==this.phoneGateway),this.currentValidation.email?(this._splashScreenService.show(),this._confirmEmailValidation()):this.currentValidation.phone&&"both"!==this.phoneGateway&&(this._splashScreenService.show(),this._confirmPhoneValidation()))}_confirmEmailValidation(){this._KYCService.confirmEmailValidation(this.appRegistration.email,this.otpForm.value.otp).subscribe({next:i=>{this.appRegistration.emailValidation=i.data},error:i=>{this.otpForm.reset(),this.loading=!1,this._splashScreenService.hide()},complete:()=>{this.otpForm.reset(),this.loading=!1,this._splashScreenService.hide(),this._initValidations()}})}_confirmPhoneValidation(){this._KYCService.confirmPhoneValidation(this.currentValidation.countryCode,this.currentValidation.phone,this.otpForm.value.otp).subscribe({next:i=>{this.appRegistration.phoneValidation=i.data},error:i=>{this.otpForm.reset()},complete:()=>{this.otpForm.reset(),this.loading=!1,this._splashScreenService.hide(),this._initValidations()}})}canSendOTP(){return!(this.sendingOTP||!this.otpForm.valid||6!==this.otpForm.value.otp?.length)}sendPhoneOTP(i,o){this._initPhoneValidation(o)}_linkValidation(){const i={};this.currentValidation.email?(i.emailValidation=this.currentValidation._id,this.appRegistration.emailValidation=this.currentValidation):this.currentValidation.phone&&(i.phoneValidation=this.currentValidation._id,this.appRegistration.phoneValidation=this.currentValidation),this._KYCService.updateAppRegistration(i).subscribe({next:o=>{},error:o=>{console.error({exception:o})},complete:()=>{}})}_completeAppRegistration(){"mailgun"===this.projectFlow.onboardingSettings.signUpForm.emailGateway&&"validated"!==this.appRegistration.emailValidation?.status||["whatsapp","sms","both"].includes(this.projectFlow.onboardingSettings.signUpForm.phoneGateway)&&"validated"!==this.appRegistration.phoneValidation?.status||this.loading||(localStorage.setItem("accessToken",this.token),this._KYCService.syncAppRegistration("signUpForm").subscribe({next:i=>{this.currentValidation=null,this.syncResponse=i.data},error:()=>{},complete:()=>{}}))}startKYC(){this._router.navigate(["/kyc"],{queryParams:{token:this.syncResponse.token}})}continueWitoutKYC(){let i=this.projectFlow.redirectUrl;u.N.verifikProject===this.project._id?i=`${u.N.appUrl}/sign-in`:u.N.sandboxProject===this.project._id&&(i=`${u.N.sandboxUrl}/sign-in`),window.location.href=`${i}?type=onboarding&token=${this.syncResponse.token}`}ngOnDestroy(){this.countdownSubscription&&this.countdownSubscription.unsubscribe()}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(P.H),t.Y36(F.j),t.Y36(y.gz),t.Y36(t.sBO),t.Y36(y.F0),t.Y36(h.QS))};static#i=this.\u0275cmp=t.Xpm({type:e,selectors:[["auth-confirmation-required"]],viewQuery:function(o,s){if(1&o&&t.Gf(q,5),2&o){let m;t.iGM(m=t.CRH())&&(s.otpNgForm=m.first)}},standalone:!0,features:[t.jDz],decls:5,vars:4,consts:[[1,"flex","flex-col","sm:flex-row","items-center","md:items-start","sm:justify-center","md:justify-start","flex-auto","min-w-0"],["class","md:flex md:items-center md:justify-end w-full sm:w-auto md:h-full md:w-1/2 py-8 px-4 sm:p-12 md:p-16 sm:rounded-2xl md:rounded-none sm:shadow md:shadow-none sm:bg-card",4,"ngIf"],["class","md:flex md:items-center md:justify-center w-full sm:w-auto md:h-full md:w-1/2 py-8 px-4 sm:p-12 md:p-16 sm:rounded-2xl md:rounded-none sm:shadow md:shadow-none sm:bg-card","fxLayout","column","fxLayoutAlign","start center",4,"ngIf"],["class","relative hidden md:flex flex-auto items-center justify-center w-1/2 h-full p-16 lg:px-28 overflow-hidden bg-gray-800 dark:border-l",4,"ngIf"],[1,"md:flex","md:items-center","md:justify-end","w-full","sm:w-auto","md:h-full","md:w-1/2","py-8","px-4","sm:p-12","md:p-16","sm:rounded-2xl","md:rounded-none","sm:shadow","md:shadow-none","sm:bg-card"],[1,"w-full","max-w-80","sm:w-80","mx-auto","sm:mx-0"],[1,"w-12"],[3,"src"],[1,"mt-8","text-2xl","font-extrabold","tracking-tight","leading-tight"],[1,"mt-8",3,"formGroup"],["otpNgForm","ngForm"],[1,"w-full"],["id","otp","matInput","","type","password",3,"formControlName","input","keyup"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["class","p-1",4,"ngIf"],["class","grid grid-cols-2 w-full",4,"ngIf"],["class","mt-2 text-md font-medium text-secondary",4,"ngIf"],[1,"icon-size-5",3,"svgIcon"],[1,"p-1"],[1,"grid","grid-cols-2","w-full"],["mat-stroked-button","","class","w-11/12 mt-4","color","primary",3,"col-span-2","disabled","color","background","click",4,"ngIf"],["mat-stroked-button","","class","mt-4","color","primary",3,"col-span-2","disabled","color","background","click",4,"ngIf"],["mat-stroked-button","","color","primary",1,"w-11/12","mt-4",3,"disabled","click"],["mat-stroked-button","","color","primary",1,"mt-4",3,"disabled","click"],[1,"mt-2","text-md","font-medium","text-secondary"],[4,"ngIf"],["class","ml-1 text-primary-500 hover:underline cursor-pointer",3,"click",4,"ngIf"],[1,"ml-1","text-primary-500","hover:underline","cursor-pointer",3,"click"],[1,"mt-8","text-4xl","font-extrabold","tracking-tight","leading-tight"],["fxLayout","column","fxLayoutAlign","start center",1,"md:flex","md:items-center","md:justify-center","w-full","sm:w-auto","md:h-full","md:w-1/2","py-8","px-4","sm:p-12","md:p-16","sm:rounded-2xl","md:rounded-none","sm:shadow","md:shadow-none","sm:bg-card"],["class","w-full max-w-80 sm:w-80 mx-auto sm:mx-0",4,"ngIf"],["class","w-full max-w-80 sm:w-80 mx-auto sm:mx-0","fxLayout","column","fxLayoutAlign","start center",4,"ngIf"],[1,"w-full","text-center","mt-6"],["fxLayout","column","fxLayoutAlign","start center"],["src","https://cdn.verifik.co/access/goldcoins3x.png","alt","",1,"w-36"],[1,"pt-2","credits-h2"],[1,"credits-h3"],["fxLayout","column","fxLayoutAlign","center center",1,"w-full"],["mat-stroked-button","",1,"w-11/12","mt-4","biometrics-button",3,"click"],["mat-stroked-button","","color","primary",1,"w-11/12","mt-4","biometrics-button",3,"click"],["fxLayout","column","fxLayoutAlign","start center",1,"w-full","max-w-80","sm:w-80","mx-auto","sm:mx-0"],[1,"mt-4","text-4xl","font-extrabold","tracking-tight","leading-tight","text-center"],["src","https://cdn.verifik.co/access/divider.svg","alt","",1,"w-full","pb-8","pt-8"],["src","https://cdn.verifik.co/access/biometrics_icon.svg","alt","",1,"w-28"],[1,"pt-2","text-2xl","font-extrabold"],[1,"credits-h3","text-center"],[1,"relative","hidden","md:flex","flex-auto","items-center","justify-center","w-1/2","h-full","p-16","lg:px-28","overflow-hidden","bg-gray-800","dark:border-l"],[1,"z-10","relative","w-full","max-w-2xl"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0),t.YNc(1,W,20,14,"div",1),t.YNc(2,Q,5,3,"div",1),t.YNc(3,H,5,2,"div",2),t.YNc(4,z,2,0,"div",3),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",s.appRegistration&&s.project&&s.otpForm&&s.currentValidation&&s.currentValidation._id),t.xp6(1),t.Q6J("ngIf",s.errorContent),t.xp6(1),t.Q6J("ngIf",s.syncResponse),t.xp6(1),t.Q6J("ngIf",!s.errorContent))},dependencies:[C.o9,A.xw,A.Wh,v.O5,h.u5,h._Y,h.Fj,h.JJ,h.JL,h.UX,h.sg,h.u,n.lN,n.KE,n.hX,n.TO,n.R9,p.c,p.Nt,c.ot,c.lW,c.RK,a.Ps,a.Hw,_.p9,d.Cq,g.y4,g.Ot,v.ez,T.LD,k.v],encapsulation:2,data:{animation:x.L}})}return e})()}]},8340:(w,f,r)=>{r.d(f,{H:()=>h});var x=r(553),u=r(9397),b=r(8533),v=r(5879),C=r(2065),g=r(8991);let h=(()=>{class c{constructor(n,a){this._httpWrapper=n,this._translocoService=a,this.baseUrl=x.N.apiUrl}getNavigation(){return this.navigation}initNavigation(){let n=1;const a=[],p={},d=this.currentProjectFlow.onboardingSettings.steps;return["mandatory","optional"].includes(d.document)&&(n++,a.push({code:"document",status:d.document}),p.document=d.document,n++,a.push({code:"documentReview",status:d.document}),p.documentReview=d.document),["mandatory","optional"].includes(d.liveness)&&(n++,a.push({code:"liveness",status:d.liveness}),p.liveness=d.liveness,p.document&&(n++,p.documentLivenessReview=d.liveness)),a.push({code:"end",status:"mandatory"}),n++,this.navigation={currentStep:1,lastStep:n,steps:d,map:p,displayableSteps:a},this.navigation}getProject(){return this.currentProject}navigateTo(n){setTimeout(()=>{if("next"!==n)this.navigation.currentStep=n;else switch(this.navigation.currentStep){case"liveness":this.navigation.currentStep="documentLivenessReview";break;case"document":this.navigation.currentStep="documentReview";break;case"documentReview":this.navigation.currentStep="liveness";break;case"documentLivenessReview":this.navigation.currentStep="end"}},750)}getAppRegistration(n){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/app-registrations/me`,n).pipe((0,u.b)(a=>{this.appRegistration=a.data,this.currentProject=new b.XR({...this.appRegistration.project,type:"onboarding"}),this.currentProjectFlow=this.appRegistration.projectFlow}))}createAppRegistration(n){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/app-registrations`,n)}sendEmailValidation(n){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/email-validations`,{email:n,project:this.currentProject._id,projectFlow:this.currentProjectFlow._id,type:"onboarding",validationMethod:"verificationCode",language:this._translocoService.getActiveLang()}).pipe((0,u.b)(a=>{}))}sendPhoneValidation(n,a){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/phone-validations`,{countryCode:n,phone:a,project:this.currentProject._id,projectFlow:this.currentProjectFlow._id,type:"onboarding",validationMethod:"verificationCode",language:this._translocoService.getActiveLang()}).pipe((0,u.b)(p=>{}))}confirmEmailValidation(n,a){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/email-validations/validate`,{email:n,otp:a,project:this.currentProject._id,projectFlow:this.currentProjectFlow._id})}confirmPhoneValidation(n,a,p){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/phone-validations/validate`,{countryCode:n,phone:a,otp:p,project:this.currentProject._id,projectFlow:this.currentProjectFlow._id})}updateAppRegistration(n){return this._httpWrapper.sendRequest("put",`${this.baseUrl}/v2/app-registrations/${this.appRegistration._id}`,{...n})}syncAppRegistration(n){return this._httpWrapper.sendRequest("put",`${this.baseUrl}/v2/app-registrations/${this.appRegistration._id}/sync`,{step:n})}createDocumentValidation(n){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/document-validations/app-registration`,n)}createBiometricValidation(n){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/biometric-validations/app-registration`,n)}getIdentityImages(n){return this._httpWrapper.sendRequest("get",`${this.baseUrl}/v2/identity-images`,n)}compareFaces(){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/face-recognition/compare/app-registration`,{})}restartKYC(){return this._httpWrapper.sendRequest("delete",`${this.baseUrl}/v2/biometric-validations/${this.appRegistration.biometricValidation._id}`)}static#t=this.\u0275fac=function(a){return new(a||c)(v.LFG(C.O),v.LFG(g.Vn))};static#i=this.\u0275prov=v.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},2065:(w,f,r)=>{r.d(f,{O:()=>C});var x=r(8075),u=r(4716),b=r(5879),v=r(9862);let C=(()=>{class g{get progress(){return!!this.tail.length}constructor(c){this._http=c,this.tail=[]}sendRequest(c,_,n={},a={}){c=c.toLocaleLowerCase();const p=localStorage.getItem("accessToken");let d={timeout:20};switch(p&&(d.Authorization=`Bearer ${p}`),c){case"get":return this.request(this._http.get(_,{params:n,headers:d,...a}));case"post":return this.request(this._http.post(_,n,{headers:d,...a}));case"put":return this.request(this._http.put(_,n,{headers:d,...a}));case"delete":return this.request(this._http.delete(_,{headers:d,...a}));default:throw"method not provided"}}request(c){return this.tail.push(c),c.pipe((0,x.X)(0),(0,u.x)(()=>{const _=this.tail.indexOf(c);this.tail.splice(_,1)}))}static#t=this.\u0275fac=function(_){return new(_||g)(b.LFG(v.eN))};static#i=this.\u0275prov=b.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},553:(w,f,r)=>{r.d(f,{N:()=>x});const x={production:!0,baseUrl:"/",apiUrl:"",appUrl:"https://app.verifik.co",kycUrl:"https://kyc.verifik.co",verifikProject:"6332941ccde4f719d9c00f9e",sandboxUrl:"https://sandbox.verifik.co",sandboxProject:"6266193db77ccc8111730c90"}}}]);