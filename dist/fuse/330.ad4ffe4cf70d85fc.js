"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[330],{8340:(W,L,r)=>{r.d(L,{H:()=>S});var f=r(553),E=r(9397),b=r(8533),u=r(5879),I=r(2065),o=r(8991),x=r(9862);let S=(()=>{class M{constructor(l,h,t){this._httpWrapper=l,this._translocoService=h,this._http=t,this.baseUrl=f.N.apiUrl}getNavigation(){return this.navigation}initNavigation(){let l=1;const h=[],t={},C=this.currentProjectFlow.onboardingSettings.steps;return["mandatory","optional"].includes(C.document)&&(l++,h.push({code:"document",status:C.document}),t.document=C.document,l++,h.push({code:"documentReview",status:C.document}),t.documentReview=C.document),["mandatory","optional"].includes(C.liveness)&&(l++,h.push({code:"liveness",status:C.liveness}),t.liveness=C.liveness,t.document&&(l++,t.documentLivenessReview=C.liveness)),h.push({code:"end",status:"mandatory"}),l++,this.navigation={currentStep:1,lastStep:l,steps:C,map:t,displayableSteps:h},this.navigation}getProject(){return this.currentProject}navigateTo(l){setTimeout(()=>{if("next"!==l)this.navigation.currentStep=l;else switch(this.navigation.currentStep){case"liveness":this.navigation.currentStep="documentLivenessReview";break;case"document":this.navigation.currentStep="documentReview";break;case"documentReview":this.navigation.currentStep="liveness";break;case"documentLivenessReview":this.navigation.currentStep="end"}},750)}getAppRegistration(l){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/app-registrations/me`,l).pipe((0,E.b)(h=>{this.appRegistration=h.data,this.currentProject=new b.XR({...this.appRegistration.project,type:"onboarding"}),this.currentProjectFlow=this.appRegistration.projectFlow}))}createAppRegistration(l){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/app-registrations`,l)}sendEmailValidation(l){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/email-validations`,{email:l,project:this.currentProject._id,projectFlow:this.currentProjectFlow._id,type:"onboarding",validationMethod:"verificationCode",language:this._translocoService.getActiveLang()}).pipe((0,E.b)(h=>{}))}sendPhoneValidation(l,h,t){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/phone-validations`,{countryCode:l,phone:h,project:this.currentProject._id,projectFlow:this.currentProjectFlow._id,type:"onboarding",validationMethod:"verificationCode",language:this._translocoService.getActiveLang(),phoneGateway:t||"sms"}).pipe((0,E.b)(C=>{}))}confirmEmailValidation(l,h){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/email-validations/validate`,{email:l,otp:h,project:this.currentProject._id,projectFlow:this.currentProjectFlow._id})}confirmPhoneValidation(l,h,t){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/phone-validations/validate`,{countryCode:l,phone:h,otp:t,project:this.currentProject._id,projectFlow:this.currentProjectFlow._id})}updateAppRegistration(l){return this._httpWrapper.sendRequest("put",`${this.baseUrl}/v2/app-registrations/${this.appRegistration._id}`,{...l})}syncAppRegistration(l,h){return this._httpWrapper.sendRequest("put",`${this.baseUrl}/v2/app-registrations/${this.appRegistration._id}/sync`,{step:l,status:h})}createDocumentValidation(l){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/document-validations/app-registration`,l)}createBiometricValidation(l){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/biometric-validations/app-registration`,l)}updateInformationValidationWithCriminalRecords(l){return this._httpWrapper.sendRequest("put",`${this.baseUrl}/v2/information-validations/${l._id}/background-check`,l)}updateDocumentValidationNameValidation(l){return this._httpWrapper.sendRequest("put",`${this.baseUrl}/v2/document-validations/${l._id}/validate`,l)}getIdentityImages(l){return this._httpWrapper.sendRequest("get",`${this.baseUrl}/v2/identity-images`,l)}compareFaces(){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/face-recognition/compare/app-registration`,{})}restartKYC(){return this._httpWrapper.sendRequest("delete",`${this.baseUrl}/v2/biometric-validations/${this.appRegistration.biometricValidation._id}`)}static#t=this.\u0275fac=function(h){return new(h||M)(u.LFG(I.O),u.LFG(o.Vn),u.LFG(x.eN))};static#e=this.\u0275prov=u.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"})}return M})()},5789:(W,L,r)=>{r.d(L,{w:()=>o});var f=r(6814),E=r(1447),b=r(8991),u=r(5879),I=r(3814);let o=(()=>{class x{static#t=this.\u0275fac=function(w){return new(w||x)};static#e=this.\u0275cmp=u.Xpm({type:x,selectors:[["app-demo-footer"]],standalone:!0,features:[u.jDz],decls:4,vars:3,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"footer"],["href","https://verifik.co"]],template:function(w,l){1&w&&(u.TgZ(0,"div",0)(1,"a",1),u._uU(2),u.ALo(3,"transloco"),u.qZA()()),2&w&&(u.xp6(2),u.Oqu(u.lcZ(3,1,"footerText")))},dependencies:[E.o9,I.xw,I.Wh,f.ez,b.y4,b.Ot],styles:[".footer[_ngcontent-%COMP%]{width:100%;height:60px;position:absolute;bottom:0;background-color:#fff;box-shadow:3px 3px 3px #0000000d;z-index:3}"]})}return x})()},1094:(W,L,r)=>{r.d(L,{s:()=>$});var f=r(5861),E=r(6814),b=r(1447),u=r(2296),I=r(5986),o=r(5940),x=r(8991),S=r(2982),M=r(8645),w=r(9773),l=r(4354),h=r(6799),t=r(8533),C=r(3372),e=r(5879),g=r(9162),R=r(6036),O=r(3403),A=r(9236),P=r(8340),k=r(3814);const F=["maskResult"],K=["toSend"],B=["cardIdFace"];function H(p,U){if(1&p){const i=e.EpF();e.TgZ(0,"webcam",17),e.NdJ("imageCapture",function(a){e.CHM(i);const m=e.oxw(2);return e.KtG(m.proccessImage(a))})("initError",function(a){e.CHM(i);const m=e.oxw(2);return e.KtG(m.cameraError(a))}),e.qZA()}if(2&p){const i=e.oxw(2);e.Q6J("height",i.camera.dimensions.video.max.height)("width",i.camera.dimensions.video.max.width)("videoOptions",i.camera.configuration)("imageQuality",1)("captureImageData",!0)("allowCameraSwitch",!1)("trigger",i.takePicture$)("mirrorImage",i.demoData.isMobile?"never":"always")}}function Y(p,U){if(1&p&&(e.TgZ(0,"div")(1,"div",18),e._uU(2),e.qZA(),e.TgZ(3,"div",19),e._uU(4),e.qZA()()),2&p){const i=e.oxw(2);e.xp6(1),e.Udp("color",i.project.branding.titleColor),e.xp6(1),e.Oqu(i.errorFace.title),e.xp6(1),e.Udp("color",i.project.branding.txtColor),e.xp6(1),e.Oqu(i.errorFace.subtitle)}}function Q(p,U){if(1&p){const i=e.EpF();e.TgZ(0,"div",3),e._UZ(1,"canvas",4,5),e.TgZ(3,"div",6),e.YNc(4,H,1,8,"webcam",7),e._UZ(5,"canvas",8,9)(7,"canvas",null,10),e.qZA(),e.TgZ(9,"div",11),e.YNc(10,Y,5,6,"div",12),e.qZA(),e.TgZ(11,"div",13)(12,"button",14),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.takePictureSnapshot())}),e._uU(13),e.ALo(14,"transloco"),e.qZA(),e.TgZ(15,"button",15),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.ngOnInit())}),e._uU(16),e.ALo(17,"transloco"),e.qZA(),e.TgZ(18,"button",16),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.continue())}),e._uU(19),e.ALo(20,"transloco"),e.qZA()()()}if(2&p){const i=e.oxw();e.xp6(3),e.Udp("width",i.camera.dimensions.video.width,"px")("height",i.camera.dimensions.video.height,"px"),e.xp6(1),e.Q6J("ngIf",!i.response.base64Image),e.xp6(1),e.Udp("width",i.response.base64Image?i.camera.dimensions.result.width:i.camera.dimensions.video.width,"px")("height",i.response.base64Image?i.camera.dimensions.result.height:i.camera.dimensions.video.height,"px"),e.xp6(2),e.ekj("hidden",!0),e.xp6(3),e.Q6J("ngIf",i.errorFace&&!i.loadingResults),e.xp6(2),e.Udp("background",i.project.branding.buttonColor)("color",i.project.branding.buttonTxtColor),e.ekj("hidden",i.response.base64Image),e.Q6J("disabled",i.errorFace),e.xp6(1),e.hij(" ",e.lcZ(14,32,"id_scanning.manual_capture_button")," "),e.xp6(2),e.Udp("background",i.project.branding.buttonColor)("color",i.project.branding.buttonTxtColor),e.ekj("hidden",!i.response.base64Image),e.xp6(1),e.hij(" ",e.lcZ(17,34,"id_scanning.retry")," "),e.xp6(2),e.Udp("color",i.project.branding.txtColor),e.ekj("hidden",!i.response.base64Image),e.xp6(1),e.hij(" ",e.lcZ(20,36,"continue")," ")}}function N(p,U){if(1&p&&(e.TgZ(0,"div",20),e._UZ(1,"img",21),e.TgZ(2,"h1",22),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.TgZ(5,"p",22),e._uU(6),e.ALo(7,"transloco"),e.qZA()()),2&p){const i=e.oxw();e.xp6(2),e.Udp("color",i.project.branding.titleColor),e.xp6(1),e.Oqu(e.lcZ(4,6,"id_scanning.camera_not_found")),e.xp6(2),e.Udp("color",i.project.branding.txtColor),e.xp6(1),e.hij(" ",e.lcZ(7,8,"id_scanning.camera_not_found_description")," ")}}function J(p,U){if(1&p&&e._UZ(0,"kyc-document-errors-display",23),2&p){const i=e.oxw();e.Q6J("errorContent",i.errorContent)("attempts",i.attempts)("attemptsLimit",i.attemptsLimit)("callback",i.onErrorCallback)}}function V(p,U){if(1&p&&(e.TgZ(0,"p",22),e._uU(1),e.ALo(2,"transloco"),e.qZA()),2&p){const i=e.oxw(2);e.Udp("color",i.project.branding.txtColor),e.xp6(1),e.AsE(" ",e.lcZ(2,4,"id_scanning.remaining_attempts")," ",i.attempts.limit-i.attempts.current," ")}}function G(p,U){if(1&p){const i=e.EpF();e.TgZ(0,"div",20),e._UZ(1,"img",24),e.TgZ(2,"h1",22),e._uU(3),e.ALo(4,"transloco"),e.qZA(),e.TgZ(5,"p",22),e._uU(6),e.ALo(7,"transloco"),e.qZA(),e.YNc(8,V,3,6,"p",25),e.TgZ(9,"button",26),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.attempts.limit-a.attempts.current>0?a.tryAgain():a.restartDemo())}),e._uU(10),e.ALo(11,"transloco"),e.qZA()()}if(2&p){const i=e.oxw();e.xp6(1),e.Q6J("src",i.attempts.limit-i.attempts.current>0?"https://cdn.verifik.co/demo/failedtodetectdocument@3x.png":"https://cdn.verifik.co/demo/redstop.svg",e.LSH),e.xp6(1),e.Udp("color",i.project.branding.titleColor),e.xp6(1),e.hij(" ",e.lcZ(4,13,i.attempts.limit-i.attempts.current>0?"id_scanning.document_not_detected":"id_scanning.failed_to_detect_limit")," "),e.xp6(2),e.Udp("color",i.project.branding.txtColor),e.xp6(1),e.hij(" ",e.lcZ(7,15,i.attempts.limit-i.attempts.current>0?"id_scanning.document_not_detected_description":"id_scanning.failed_to_detect_limit_description")," "),e.xp6(2),e.Q6J("ngIf",i.attempts.limit-i.attempts.current>0),e.xp6(1),e.Udp("background",i.project.branding.buttonColor)("color",i.project.branding.buttonTxtColor),e.xp6(1),e.hij(" ",e.lcZ(11,17,i.failedToDetectDocument?"id_scanning.retry":"restart")," ")}}let $=(()=>{class p{get takePicture$(){return this.takePicture.asObservable()}constructor(i,s,a,m,n,d,c,_,D){this._dom=i,this._demoService=s,this._splashScreenService=a,this._translocoService=m,this.renderer=n,this._router=d,this._changeDetectorRef=c,this._fuseMediaWatcherService=_,this._KYCService=D,this.aspectRatio=85.6/53.98,this.takePicture=new M.x,this._unsubscribeAll=new M.x,this.setDefaultCamera=()=>{this.camera={hasPermissions:!1,isLoading:!1,configuration:{frameRate:{ideal:30,max:30},[this.demoData.isMobile?"width":"height"]:{ideal:1080},facingMode:l.w[this.demoData.isMobile]},dimensions:{video:{max:{height:Math.ceil(.7*window.innerHeight),width:Math.ceil(.9*window.innerWidth)}}}}},this.setDefaultInterval=()=>{this.interval={}},this.setDefaultResponse=()=>{this.response={isLoading:!1,isFailed:!1}},this.setVideoNgxCameraData=()=>{const v=this._dom.nativeElement.querySelector("video");v&&(v.addEventListener("loadeddata",()=>{this.setVideoDimensions(v),this.drawRect()}),this.interval.detectFace||(this.interval.detectFace=setInterval(()=>{this.response.base64Image&&(this.interval.detectFace=clearInterval(this.interval.detectFace)),this.takePicture.next()},this.demoData.time)),this.interval.checkNgxVideo=clearInterval(this.interval.checkNgxVideo),this.setVideoDimensions(v),this.drawRect(),this.loading({isLoading:!1,start:!0}))},this.loading=({isLoading:v=!0,start:j,result:y})=>{const T=j?"camera":y&&"response";T&&(this[T].isLoading=v);const Z=v?"show":"hide";this.demoData.loading=v,this._splashScreenService[Z]()},this.setImageOnCanvas=(v,j,y,T)=>{v.width=T.width,v.height=T.height,v.style.marginLeft=`${T.offsetX||0}px`,v.style.marginTop=`${T.offsetY||0}px`;const Z=v.getContext("2d");Z.clearRect(0,0,y.width,y.height),Z.drawImage(j,y.offsetX,y.offsetY,y.width,y.height,0,0,T.width,T.height)},this._ObserveDomMedia(),this.demoData=this._demoService.getDemoData(),this.view=this._router.url.includes("/kyc")?"kyc":"demo",this.project=new t.XR({}),this.projectFlow=new t.nd({}),"kyc"===this.view&&(this.appRegistration=this._KYCService.appRegistration,this.project=this._KYCService.currentProject,this.projectFlow=this._KYCService.currentProjectFlow,this.navigation=this._KYCService.getNavigation(),this.attempts=this.appRegistration?.failedDocumentValidations?.length||0,this.attemptsLimit=this.projectFlow.onboardingSettings.document.maxAttempts),this.errorContent={message:""},this.startDefaultValues(),this.setDefaultInterval(),this.renderer.listen("window","resize",()=>{this.interval.checkNgxVideo=setInterval(()=>{this.setVideoNgxCameraData()},this.demoData.time)}),this._changeDetectorRef.markForCheck()}_ObserveDomMedia(){this._fuseMediaWatcherService.onMediaChange$.pipe((0,w.R)(this._unsubscribeAll)).subscribe(({matchingAliases:i})=>{this.phoneMode=!i.includes("lg")&&!i.includes("md")&&!i.includes("sm"),this.tabletMode=!(i.includes("lg")||i.includes("md")||!i.includes("sm")),console.log(this.tabletMode,this.phoneMode),this._changeDetectorRef.markForCheck()})}ngOnInit(){var i=this;this.startDefaultValues(),this.camera.hasPermissions=!0,this.errorFace={},this.loading({start:!0}),this._demoService.faceapi$.subscribe(function(){var s=(0,f.Z)(function*(a){a&&(i.interval.checkNgxVideo=setInterval(()=>{i.setMaxVideoDimensions(),i.setVideoNgxCameraData()},i.demoData.time))});return function(a){return s.apply(this,arguments)}}())}startDefaultValues(){this.setDefaultResponse(),this.setDefaultCamera(),this.setMaxVideoDimensions(),this._changeDetectorRef.markForCheck()}setVideoDimensions(i){this.camera.dimensions.video.height=i.clientHeight,this.camera.dimensions.video.width=i.clientWidth;const s=this.maskResultCanvasRef.nativeElement;s.style.marginLeft="0px",s.style.marginTop="0px"}setMaxVideoDimensions(){this.camera.dimensions.video={max:{height:Math.ceil(.7*window.innerHeight),width:Math.ceil(.9*window.innerWidth)}},this.camera.dimensions.result=void 0}setResultDimensions(i,s,a){s<a?(i.offsetY=Math.floor(.1*s),i.height=Math.floor(.8*s),i.width=Math.floor(this.aspectRatio*i.height),i.offsetX=Math.floor((a-i.width)/2)):(i.offsetX=Math.floor(.1*a),i.width=Math.floor(.8*a),i.height=Math.floor(this.aspectRatio*i.width),i.offsetY=Math.floor((s-i.height)/2))}drawRect(){this.camera.dimensions.result={height:0,width:0,offsetX:0,offsetY:0},this.setResultDimensions(this.camera.dimensions.result,this.camera.dimensions.video.height,this.camera.dimensions.video.width);const i=this.maskResultCanvasRef.nativeElement,s=this.camera.dimensions.video,a=this.camera.dimensions.result;i.height=s.height,i.width=s.width;const m=i.getContext("2d");m.clearRect(0,0,s.width,s.height),m.fillStyle="rgba(255, 255, 255, 0.75)",m.fillRect(0,0,s.width,s.height),m.globalCompositeOperation="destination-out",m.fillStyle="rgba(0, 0, 0, 1)",m.fillRect(a.offsetX,a.offsetY,a.width,a.height),m.globalCompositeOperation="source-over"}cameraError(i){i.mediaStreamError&&"NotAllowedError"===i.mediaStreamError.name&&(this.loading({isLoading:!1,start:!0}),this.camera.hasPermissions=!1)}proccessImage(i){var s=this;if(this.response.base64Image)return;if(!this.interval.detectFace)return void this.takePictureManual(i);const a=new Image;a.src=i.imageAsDataUrl,a.onload=(0,f.Z)(function*(){try{s.detectFace(a)}catch(m){alert(m.message)}})}detectFace(i){var s=this;return(0,f.Z)(function*(){try{const a=yield h.Qr(i,new h.d7({minConfidence:.2})).withFaceLandmarks();return a.length?(s.checkFaceTimeout=clearTimeout(s.checkFaceTimeout),s.errorFace=null,a):(s.checkFaceTimeout||(s.checkFaceTimeout=setTimeout(()=>{s.errorFace={title:s._translocoService.translate("id_scanning.face_not_found"),subtitle:s._translocoService.translate("id_scanning.face_not_found_details")}},3*s.demoData.time)),null)}catch(a){alert(a.message)}})()}takePictureManual(i){var s=this;const a=new Image;a.src=i.imageAsDataUrl,a.onload=(0,f.Z)(function*(){const m=yield s.detectFace(a);if(!m||!m.length)return alert(s._translocoService.translate("id_scanning.face_not_found")),s.tryAgain();const n=s._demoService.getBiggestFace(m.map(_=>_.detection.box));s.idCard={face:s._demoService.cutFaceIdCard(a,n,s.cardIdFaceRef.nativeElement)},s.camera.dimensions.real={height:0,width:0,offsetX:0,offsetY:0},s.setResultDimensions(s.camera.dimensions.real,a.height,a.width),s.setImageOnCanvas(s.maskResultCanvasRef.nativeElement,a,s.camera.dimensions.real,s.camera.dimensions.result);const c=s.ToSendCanvasRef.nativeElement;s.setImageOnCanvas(c,a,s.camera.dimensions.real,s.camera.dimensions.real),s.response.base64Image=c.toDataURL("image/jpeg")})}takePictureSnapshot(){this.interval.detectFace=clearInterval(this.interval.detectFace),this.takePicture.next()}continue(){var i=this;return(0,f.Z)(function*(){const s={image:i.response.base64Image.replace("data:image/jpeg;base64",""),force:i.appRegistration?.forceUpload||!1};i.loading({result:!0}),"kyc"!==i.view?i._demoService.sendDocument(s).subscribe(a=>{i._demoService.setDemoDocument(a.data),localStorage.setItem("idCardFaceImage",i.idCard.face),localStorage.setItem("documentId",a.data._id),i.loading({isLoading:!1}),i._demoService.moveToStep(3)},a=>{i.response.isFailed=!0,i.loading({isLoading:!1})}):i._KYCService.createDocumentValidation({...s,documentFace:i.idCard.face}).subscribe({next:a=>{i.appRegistration.documentValidation=a.data.documentValidation,i._KYCService.navigateTo("next")},error:a=>{i.errorResult=!0,i.errorContent=a.error,i.loading({isLoading:!1}),i._splashScreenService.hide()},complete:()=>{i.loading({isLoading:!1})}})})()}tryAgain(){this.attempts++,this.ngOnInit()}restartDemo(){this._demoService.restart()}onErrorCallback(i){window.location.reload()}static#t=this.\u0275fac=function(s){return new(s||p)(e.Y36(e.SBq),e.Y36(g.e),e.Y36(R.j),e.Y36(x.Vn),e.Y36(e.Qsj),e.Y36(O.F0),e.Y36(e.sBO),e.Y36(A.T),e.Y36(P.H))};static#e=this.\u0275cmp=e.Xpm({type:p,selectors:[["id-scanning-ios"]],viewQuery:function(s,a){if(1&s&&(e.Gf(F,5),e.Gf(K,5),e.Gf(B,5)),2&s){let m;e.iGM(m=e.CRH())&&(a.maskResultCanvasRef=m.first),e.iGM(m=e.CRH())&&(a.ToSendCanvasRef=m.first),e.iGM(m=e.CRH())&&(a.cardIdFaceRef=m.first)}},standalone:!0,features:[e.jDz],decls:5,vars:4,consts:[["fxLayout","column","fxLayoutAlign","start center","class","bg-white rounded-lg shadow-lg w-full",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","id-scanning-error-div",4,"ngIf"],["class","m-16",3,"errorContent","attempts","attemptsLimit","callback",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start center",1,"bg-white","rounded-lg","shadow-lg","w-full"],["hidden","true"],["cardIdFace",""],[1,"relative"],[3,"height","width","videoOptions","imageQuality","captureImageData","allowCameraSwitch","trigger","mirrorImage","imageCapture","initError",4,"ngIf"],[1,"absolute","top-0","left-0"],["maskResult",""],["toSend",""],["fxLayout","column","fxLayoutAlign","center center",1,"text-center","h-20","pb-4","sm:h-8","xs:h-8","my-2"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center"],["mat-raised-button","",1,"m-4","z-index-2",3,"disabled","click"],["mat-stroked-button","",1,"m-4","z-index-2",3,"click"],["mat-raised-button","",1,"mx-2",3,"click"],[3,"height","width","videoOptions","imageQuality","captureImageData","allowCameraSwitch","trigger","mirrorImage","imageCapture","initError"],[1,"text-3xl","font-bold"],[1,"text-gray-600"],["fxLayout","column","fxLayoutAlign","center center",1,"id-scanning-error-div"],["src","https://cdn.verifik.co/demo/nocameraenabled.svg","alt","",1,"id-scanning-no-camera-enabled-img"],[1,"mt-4"],[1,"m-16",3,"errorContent","attempts","attemptsLimit","callback"],["alt","",1,"id-scanning-failed-document-img",3,"src"],["class","mt-4",3,"color",4,"ngIf"],["mat-raised-button","",1,"mt-4","z-index-2","id-scanning-try-again-button",3,"click"]],template:function(s,a){1&s&&(e.ynx(0),e.YNc(1,Q,21,38,"div",0),e.BQk(),e.YNc(2,N,8,10,"div",1),e.YNc(3,J,1,4,"kyc-document-errors-display",2),e.YNc(4,G,12,19,"div",1)),2&s&&(e.xp6(1),e.Q6J("ngIf",!a.response.isFailed&&a.camera.hasPermissions&&!a.errorResult),e.xp6(1),e.Q6J("ngIf",!a.response.isFailed&&!a.camera.hasPermissions&&!a.camera.isLoading),e.xp6(1),e.Q6J("ngIf",a.errorContent.message),e.xp6(1),e.Q6J("ngIf",a.response.isFailed))},dependencies:[b.o9,k.xw,k.Wh,I.p9,u.ot,u.lW,E.ez,E.O5,o.Cq,x.y4,x.Ot,S.Tm,S.i3,C.M],styles:[".id-scanning-error-div[_ngcontent-%COMP%]{margin-top:20px;width:600px;background:white;height:600px;padding:16px;box-shadow:3px 3px 3px 3px #0000000d}.id-scanning-error-div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#0036e7;font-size:24px;font-weight:800;text-align:center}.id-scanning-error-div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#01236da6;font-size:16px;font-weight:300;text-align:center}.id-scanning-no-camera-enabled-img[_ngcontent-%COMP%], .id-scanning-failed-document-img[_ngcontent-%COMP%]{width:40%}",".demo-header[_ngcontent-%COMP%]{background-color:#01236d;width:100%;height:64px;color:#fff!important}.demo-header-logo[_ngcontent-%COMP%]{width:120px;padding-left:16px;height:auto}.demo-header-action[_ngcontent-%COMP%]{padding-right:25px}.demo-header-partner-icon[_ngcontent-%COMP%]{width:40px;padding-right:10px}.demo-content[_ngcontent-%COMP%]{width:100%;height:auto}.step-one-circle[_ngcontent-%COMP%]{background:#0036e7;z-index:2;color:#fff;width:45px;height:45px;padding-top:11px;text-align:center;border-radius:50%;margin-right:25px}.disabled-background[_ngcontent-%COMP%]{background:rgba(0,54,231,.2509803922)!important}.font-bold[_ngcontent-%COMP%]{font-weight:800}.box-shadow-3px[_ngcontent-%COMP%]{box-shadow:3px 3px 3px 3px #0000000d}.grey-background[_ngcontent-%COMP%]{background-color:#80808021}.m-2[_ngcontent-%COMP%]{margin:2px}.m-4[_ngcontent-%COMP%]{margin:4px}.m-8[_ngcontent-%COMP%]{margin:8px}.mt-4[_ngcontent-%COMP%]{margin-top:4px}.mt-8[_ngcontent-%COMP%]{margin-top:8px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer!important;font-weight:800}.w-50p[_ngcontent-%COMP%]{width:50%}.text-center[_ngcontent-%COMP%]{text-align:center}.margin-left-16[_ngcontent-%COMP%]{margin-left:25px}h1[_ngcontent-%COMP%]{font-size:35px;padding-top:32px;font-weight:700;color:#0036e7}h2[_ngcontent-%COMP%]{font-size:30px;padding-top:16px;font-weight:700;color:#0036e7}@media (max-width: 599px){.demo-header-logo[_ngcontent-%COMP%]{width:120px}}"]})}return p})()},692:(W,L,r)=>{r.d(L,{s:()=>s});var f=r(5861),E=r(6814),b=r(1447),u=r(2296),I=r(5986),o=r(5940),x=r(8991),S=r(6799),M=r(8533),w=r(3372),l=r(8645),h=r(9773),t=r(5879),C=r(9162),e=r(3403),g=r(6036),R=r(9236),O=r(8340),A=r(3814),P=r(7509);const k=["videoElement"],F=["canvas"],K=["result"],B=["toSend"],H=["cardIdFace"];function Y(a,m){if(1&a&&(t.TgZ(0,"div")(1,"div",11),t._uU(2),t.qZA(),t.TgZ(3,"div",12),t._uU(4),t.qZA()()),2&a){const n=t.oxw(3);t.xp6(1),t.Udp("color",n.project?n.project.branding.titleColor:null),t.xp6(1),t.Oqu(n.errorFace.title),t.xp6(1),t.Udp("color",n.project?n.project.branding.txtColor:null),t.xp6(1),t.Oqu(n.errorFace.subtitle)}}const Q=function(a){return{"mobile-height":a}},N=function(a){return{"max-h-[75vh]":a}};function J(a,m){if(1&a){const n=t.EpF();t.TgZ(0,"div",13)(1,"div",14),t._UZ(2,"video",15,16)(4,"canvas",17,18)(6,"canvas",17,19)(8,"canvas",17,20),t.qZA(),t.TgZ(10,"div",21)(11,"button",22),t.NdJ("click",function(){t.CHM(n);const c=t.oxw(3);return t.KtG(c.takePicture())}),t._uU(12),t.ALo(13,"transloco"),t.qZA(),t.TgZ(14,"button",23),t.NdJ("click",function(){t.CHM(n);const c=t.oxw(3);return t.KtG(c.tryAgain())}),t._uU(15),t.ALo(16,"transloco"),t.qZA(),t.TgZ(17,"button",24),t.NdJ("click",function(){t.CHM(n);const c=t.oxw(3);return t.KtG(c.continue())}),t._uU(18),t.ALo(19,"transloco"),t.qZA()()()}if(2&a){const n=t.oxw(3);t.Q6J("ngClass",t.VKq(46,Q,n.phoneMode)),t.xp6(1),t.Udp("width",n.WIDTH,"px")("height",n.HEIGHT,"px"),t.xp6(1),t.ekj("hidden",n.base64Images),t.Q6J("ngClass",t.VKq(48,N,!n.phoneMode)),t.xp6(2),t.Udp("width",n.WIDTH,"px")("height",n.HEIGHT,"px"),t.ekj("hidden",n.base64Images),t.xp6(2),t.ekj("hidden",!n.base64Images),t.xp6(2),t.ekj("hidden",!0),t.xp6(3),t.Udp("background",n.project.branding.buttonColor)("color",n.project.branding.buttonTxtColor),t.ekj("hidden",n.base64Images),t.Q6J("disabled",n.errorFace),t.xp6(1),t.hij(" ",t.lcZ(13,40,"id_scanning.manual_capture_button")," "),t.xp6(2),t.Udp("background",n.project.branding.buttonColor)("color",n.project.branding.buttonTxtColor),t.ekj("hidden",!n.base64Images),t.xp6(1),t.hij(" ",t.lcZ(16,42,"id_scanning.retry")," "),t.xp6(2),t.Udp("background",n.project.branding.buttonColor)("color",n.project.branding.buttonTxtColor),t.ekj("hidden",!n.base64Images),t.xp6(1),t.hij(" ",t.lcZ(19,44,"continue")," ")}}function V(a,m){if(1&a&&(t.TgZ(0,"div",7)(1,"div",8),t.YNc(2,Y,5,6,"div",9),t.qZA(),t.YNc(3,J,20,50,"div",10),t.qZA()),2&a){const n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",n.errorFace&&!n.loadingResults),t.xp6(1),t.Q6J("ngIf",!n.failedToDetectDocument)}}function G(a,m){if(1&a&&(t.TgZ(0,"div",3),t._UZ(1,"canvas",4,5),t.YNc(3,V,4,2,"div",6),t.qZA()),2&a){const n=t.oxw();t.xp6(3),t.Q6J("ngIf",!n.loadingCamera&&n.hasCameraPermissions)}}function $(a,m){if(1&a&&(t.TgZ(0,"div",25),t._UZ(1,"img",26),t.TgZ(2,"h1",27),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"p",27),t._uU(6),t.ALo(7,"transloco"),t.qZA()()),2&a){const n=t.oxw();t.xp6(2),t.Udp("color",n.project.branding.titleColor),t.xp6(1),t.Oqu(t.lcZ(4,6,"id_scanning.camera_not_found")),t.xp6(2),t.Udp("color",n.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(7,8,"id_scanning.camera_not_found_description")," ")}}function p(a,m){if(1&a&&t._UZ(0,"kyc-document-errors-display",28),2&a){const n=t.oxw();t.Q6J("errorContent",n.errorContent)("attempts",n.attempts)("attemptsLimit",n.attemptsLimit)("callback",n.onErrorCallback)}}function U(a,m){if(1&a&&(t.TgZ(0,"p",27),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&a){const n=t.oxw(2);t.Udp("color",n.project.branding.txtColor),t.xp6(1),t.AsE(" ",t.lcZ(2,4,"id_scanning.remaining_attempts")," ",n.attemptsLimit-n.attempts," ")}}function i(a,m){if(1&a){const n=t.EpF();t.TgZ(0,"div",25),t._UZ(1,"img",29),t.TgZ(2,"h1",27),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"p",27),t._uU(6),t.ALo(7,"transloco"),t.qZA(),t.YNc(8,U,3,6,"p",30),t.TgZ(9,"button",31),t.NdJ("click",function(){t.CHM(n);const c=t.oxw();return t.KtG(c.attemptsLimit-c.attempts>0?c.tryAgain(!0):c.restartDemo())}),t._uU(10),t.ALo(11,"transloco"),t.qZA()()}if(2&a){const n=t.oxw();t.xp6(1),t.Q6J("src",n.attemptsLimit-n.attempts>0?"https://cdn.verifik.co/demo/failedtodetectdocument@3x.png":"https://cdn.verifik.co/demo/redstop.svg",t.LSH),t.xp6(1),t.Udp("color",n.project.branding.titleColor),t.xp6(1),t.hij(" ",t.lcZ(4,13,n.attemptsLimit-n.attempts>0?"id_scanning.document_not_detected":"id_scanning.failed_to_detect_limit")," "),t.xp6(2),t.Udp("color",n.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(7,15,n.attemptsLimit-n.attempts>0?"id_scanning.document_not_detected_description":"id_scanning.failed_to_detect_limit_description")," "),t.xp6(2),t.Q6J("ngIf",n.attemptsLimit-n.attempts>0),t.xp6(1),t.Udp("color",n.project.branding.buttonTxtColor)("background",n.project.branding.buttonColor),t.xp6(1),t.hij(" ",t.lcZ(11,17,n.failedToDetectDocument?"id_scanning.retry":"restart")," ")}}let s=(()=>{class a{constructor(n,d,c,_,D,v,j,y){this._demoService=n,this._router=d,this._splashScreenService=c,this._changeDetectorRef=_,this._translocoService=D,this._fuseMediaWatcherService=v,this.renderer=j,this._KYCService=y,this.aspectRatio=85.6/53.98,this.videoOptions={frameRate:{ideal:30,max:30}},this._unsubscribeAll=new l.x,this.setCanvasDimensions=()=>{this.HEIGHT=this.videoElement.nativeElement.clientHeight,this.WIDTH=this.videoElement.nativeElement.clientWidth;const Z=this.canvasRef.nativeElement;Z.height=this.HEIGHT,Z.width=this.WIDTH,this.drawRect(Z.getContext("2d"))},this._ObserveDomMedia(),this.attemptsLimit=3,this.loadingCamera=!1,this.loading=!1,this.hasCameraPermissions=!1,this.failedToDetectDocument=!1,this.base64Images=void 0,this.errorFace={},this.demoData=this._demoService.getDemoData(),this.view=this._router.url.includes("/kyc")?"kyc":"demo",this.project=new M.XR({}),this.projectFlow=new M.nd({}),"kyc"===this.view&&(this.appRegistration=this._KYCService.appRegistration,this.project=this._KYCService.currentProject,this.projectFlow=this._KYCService.currentProjectFlow,this.navigation=this._KYCService.getNavigation(),this.attempts=this.appRegistration?.failedDocumentValidations?.length||0,this.attemptsLimit=this.projectFlow.onboardingSettings.document.maxAttempts),this.errorContent={message:""},this.videoOptions[this.demoData.isMobile?"width":"height"]={ideal:1080},this.videoOptions.facingMode=this.demoData.isMobile?"environment":"user",this.video={},this.rectCredential={},this.renderer.listen("window","resize",()=>{this.videoElement&&this.setCanvasDimensions()})}ngOnInit(){this._ObserveDomMedia(),this._demoService.faceapi$.subscribe(n=>{n&&this.startCamera()})}_ObserveDomMedia(){this._fuseMediaWatcherService.onMediaChange$.pipe((0,h.R)(this._unsubscribeAll)).subscribe(({matchingAliases:n})=>{this.phoneMode=!n.includes("lg")&&!n.includes("md")&&!n.includes("sm"),this.tabletMode=!(n.includes("lg")||n.includes("md")||!n.includes("sm")),this._changeDetectorRef.markForCheck()})}detectFace(n){var d=this;return(0,f.Z)(function*(){try{const c=yield S.Qr(n,new S.d7({minConfidence:.2})).withFaceLandmarks();return c.length?(d.checkFaceTimeout=clearTimeout(d.checkFaceTimeout),d.errorFace=null,c):(d.checkFaceTimeout||(d.checkFaceTimeout=setTimeout(()=>{d.errorFace={title:d._translocoService.translate("id_scanning.face_not_found"),subtitle:d._translocoService.translate("id_scanning.face_not_found_details")}},3*d.demoData.time)),null)}catch(c){alert(c.message)}})()}startCamera(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(this.loadingCamera=!0,this._splashScreenService.show(),navigator.mediaDevices.getUserMedia({video:this.videoOptions,audio:!1}).then(n=>{this.stream=n,this.hasCameraPermissions=!0,this.loadingCamera=!1;const c=this.stream.getVideoTracks()[0].getSettings(),{width:_,height:D}=c;this.video.height=D,this.video.width=_,setTimeout(()=>{this.videoElement.nativeElement.srcObject=n,this.videoElement.nativeElement.addEventListener("loadedmetadata",()=>{this.demoData.isMobile||(this.videoElement.nativeElement.style.transform="scaleX(-1)"),this.setCanvasDimensions(),this.detectFaceInterval=setInterval(()=>this.detectFace(this.videoElement.nativeElement),this.demoData.time),this.demoData.loading=!1,this._splashScreenService.hide()})},300)}).catch(n=>{console.error("Error accessing the camera:",n),this.loadingCamera=!1,this.hasCameraPermissions=!1,this.demoData.loading=!1,this._splashScreenService.hide()})):(console.error("Browser does not support getUserMedia API."),this.hasCameraPermissions=!1)}tryAgain(n=!1){n&&this.attempts++,this.base64Images=void 0,this.failedToDetectDocument=!1,this.errorFace={},this.errorContent.message=null,this.errorResult=!1,this.startCamera()}restartDemo(){"kyc"===this.view&&(this.appRegistration.documentValidation=null),this._demoService.restart()}continue(){var n=this;return(0,f.Z)(function*(){if(n.loading)return;n.loading=!0,n.idToSend={image:n.base64Images,force:n.appRegistration?.forceUpload||!1};const d=yield n.detectFace(n.canvasToSendRef.nativeElement);if(console.log({faces:d}),!d.length)return n.errorResult=!0,n.errorContent={message:"face_not_found"},n.tryAgain();const c=n._demoService.getBiggestFace(d.map(D=>D.detection.box)),_=n._demoService.cutFaceIdCard(n.canvasToSendRef.nativeElement,c,n.cardIdFaceRef.nativeElement);n.demoData.loading=!0,n._splashScreenService.show(),"kyc"!==n.view?n._demoService.sendDocument({image:n.idToSend.image}).subscribe(D=>{n._demoService.setDemoDocument(D.data),localStorage.setItem("documentId",D.data._id),localStorage.setItem("idCardFaceImage",_),n.demoData.loading=!1,n._splashScreenService.hide(),n._demoService.moveToStep(3)},D=>{n.failedToDetectDocument=!0,n.demoData.loading=!1,n._splashScreenService.hide()}):n._KYCService.createDocumentValidation({...n.idToSend,documentFace:_}).subscribe({next:D=>{n.appRegistration.documentValidation=D.data.documentValidation,n._KYCService.navigateTo("next")},error:D=>{n.errorResult=!0,n.errorContent=D.error,n._splashScreenService.hide()},complete:()=>{n.demoData.loading=!1,n._splashScreenService.hide()}})})()}drawRect(n){n.clearRect(0,0,this.WIDTH,this.HEIGHT),n.fillStyle="rgba(255, 255, 255, 0.75)",n.fillRect(0,0,this.WIDTH,this.HEIGHT),n.globalCompositeOperation="destination-out";const d=this.video.height<this.video.width;this.setDimensions(d,this.HEIGHT,this.WIDTH,this.rectCredential),this.setDimensions(d,this.video.height,this.video.width,this.video),n.fillStyle="rgba(0, 0, 0, 1)",n.fillRect(this.rectCredential.x,this.rectCredential.y,this.rectCredential.rectWidth,this.rectCredential.rectHeight),n.globalCompositeOperation="source-over"}setDimensions(n,d,c,_){n?(_.y=Math.floor(.1*d),_.rectHeight=Math.floor(.8*d),_.rectWidth=Math.floor(this.aspectRatio*_.rectHeight),_.x=Math.floor((c-_.rectWidth)/2)):(_.x=Math.floor(.1*c),_.rectWidth=Math.floor(.8*c),_.rectHeight=Math.floor(this.aspectRatio*_.rectWidth),_.y=Math.floor((d-_.rectHeight)/2))}stopRecord(){this.stream&&this.stream.getTracks().forEach(n=>n.stop())}takePicture(){var n=this;return(0,f.Z)(function*(){n.detectFaceInterval=clearInterval(n.detectFaceInterval);const d=n.canvasToSendRef.nativeElement;n.setPictureInCavas(n.canvasResultRef.nativeElement,n.rectCredential,n.video),n.setPictureInCavas(d,n.video);const _=d.toDataURL("image/jpeg").replace(/^data:.*;base64,/,"");n.base64Images=_,n._changeDetectorRef.markForCheck(),n.stopRecord()})()}setPictureInCavas(n,d,c){const _=n.getContext("2d");n.width=d.rectWidth,n.height=d.rectHeight,n.style.marginLeft=`${d.x}px`,n.style.marginTop=`${d.y}px`,c||(c={x:d.x,y:d.y,rectWidth:d.rectWidth,rectHeight:d.rectHeight}),_.drawImage(this.videoElement.nativeElement,c.x,c.y,c.rectWidth,c.rectHeight,0,0,d.rectWidth,d.rectHeight)}onErrorCallback(n){window.location.reload()}static#t=this.\u0275fac=function(d){return new(d||a)(t.Y36(C.e),t.Y36(e.F0),t.Y36(g.j),t.Y36(t.sBO),t.Y36(x.Vn),t.Y36(R.T),t.Y36(t.Qsj),t.Y36(O.H))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["id-scanning"]],viewQuery:function(d,c){if(1&d&&(t.Gf(k,5),t.Gf(F,5),t.Gf(K,5),t.Gf(B,5),t.Gf(H,5)),2&d){let _;t.iGM(_=t.CRH())&&(c.videoElement=_.first),t.iGM(_=t.CRH())&&(c.canvasRef=_.first),t.iGM(_=t.CRH())&&(c.canvasResultRef=_.first),t.iGM(_=t.CRH())&&(c.canvasToSendRef=_.first),t.iGM(_=t.CRH())&&(c.cardIdFaceRef=_.first)}},standalone:!0,features:[t.jDz],decls:4,vars:4,consts:[["fxLayout","column","fxLayoutAlign","center center","class","bg-white rounded-lg shadow-lg items-center w-full",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","id-scanning-error-div",4,"ngIf"],["class","mt-16 w-1/2",3,"errorContent","attempts","attemptsLimit","callback",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"bg-white","rounded-lg","shadow-lg","items-center","w-full"],["hidden","true"],["cardIdFace",""],["class","w-full height-full",4,"ngIf"],[1,"w-full","height-full"],["fxLayout","column","fxLayoutAlign","center center",1,"text-center","h-20","pb-4","sm:h-8","xs:h-8","my-2"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","w-full h-full",3,"ngClass",4,"ngIf"],[1,"text-3xl","font-bold"],[1,"text-gray-600"],["fxLayout","column","fxLayoutAlign","center center",1,"w-full","h-full",3,"ngClass"],[1,"relative","w-full"],["autoplay","",1,"absolute","top-0","left-0","w-full",3,"ngClass"],["videoElement",""],[1,"absolute","top-0","left-0"],["canvas",""],["result",""],["toSend",""],["fxLayout","row","fxLayoutAlign","center center",1,"relative","-top-18"],["mat-raised-button","",1,"m-4","z-index-2",3,"disabled","click"],["mat-stroked-button","",1,"m-4","z-index-2",3,"click"],["mat-raised-button","",1,"mx-2",3,"click"],["fxLayout","column","fxLayoutAlign","center center",1,"id-scanning-error-div"],["src","https://cdn.verifik.co/demo/nocameraenabled.svg","alt","",1,"id-scanning-no-camera-enabled-img"],[1,"mt-4"],[1,"mt-16","w-1/2",3,"errorContent","attempts","attemptsLimit","callback"],["alt","",1,"id-scanning-failed-document-img",3,"src"],["class","mt-4",3,"color",4,"ngIf"],["mat-raised-button","","color","primary",1,"mt-4","z-index-2","id-scanning-try-again-button",3,"click"]],template:function(d,c){1&d&&(t.YNc(0,G,4,1,"div",0),t.YNc(1,$,8,10,"div",1),t.YNc(2,p,1,4,"kyc-document-errors-display",2),t.YNc(3,i,12,19,"div",1)),2&d&&(t.Q6J("ngIf",!c.failedToDetectDocument&&c.hasCameraPermissions&&!c.loadingCamera&&!c.errorResult),t.xp6(1),t.Q6J("ngIf",!c.failedToDetectDocument&&!c.hasCameraPermissions&&!c.loadingCamera),t.xp6(1),t.Q6J("ngIf",c.errorContent.message),t.xp6(1),t.Q6J("ngIf",c.failedToDetectDocument))},dependencies:[b.o9,A.xw,A.Wh,P.oO,I.p9,u.ot,u.lW,E.ez,E.mk,E.O5,o.Cq,x.y4,x.Ot,w.M],styles:[".id-scanning-error-div[_ngcontent-%COMP%]{margin-top:20px;width:600px;background:white;height:600px;padding:16px;box-shadow:3px 3px 3px 3px #0000000d}.id-scanning-error-div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#0036e7;font-size:24px;font-weight:800;text-align:center}.id-scanning-error-div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#01236da6;font-size:16px;font-weight:300;text-align:center}.mobile-height[_ngcontent-%COMP%]{height:calc(100vh - 190px)}.id-scanning-no-camera-enabled-img[_ngcontent-%COMP%]{width:40%}.height-full[_ngcontent-%COMP%]{height:calc(100vh - 189px)}.height-full-canvas[_ngcontent-%COMP%]{height:calc(100vh - 269px)}.height-full-button[_ngcontent-%COMP%]{height:calc(100vh - 480px)}.id-scanning-failed-document-img[_ngcontent-%COMP%]{width:40%}",".demo-header[_ngcontent-%COMP%]{background-color:#01236d;width:100%;height:64px;color:#fff!important}.demo-header-logo[_ngcontent-%COMP%]{width:120px;padding-left:16px;height:auto}.demo-header-action[_ngcontent-%COMP%]{padding-right:25px}.demo-header-partner-icon[_ngcontent-%COMP%]{width:40px;padding-right:10px}.demo-content[_ngcontent-%COMP%]{width:100%;height:auto}.step-one-circle[_ngcontent-%COMP%]{background:#0036e7;z-index:2;color:#fff;width:45px;height:45px;padding-top:11px;text-align:center;border-radius:50%;margin-right:25px}.disabled-background[_ngcontent-%COMP%]{background:rgba(0,54,231,.2509803922)!important}.font-bold[_ngcontent-%COMP%]{font-weight:800}.box-shadow-3px[_ngcontent-%COMP%]{box-shadow:3px 3px 3px 3px #0000000d}.grey-background[_ngcontent-%COMP%]{background-color:#80808021}.m-2[_ngcontent-%COMP%]{margin:2px}.m-4[_ngcontent-%COMP%]{margin:4px}.m-8[_ngcontent-%COMP%]{margin:8px}.mt-4[_ngcontent-%COMP%]{margin-top:4px}.mt-8[_ngcontent-%COMP%]{margin-top:8px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer!important;font-weight:800}.w-50p[_ngcontent-%COMP%]{width:50%}.text-center[_ngcontent-%COMP%]{text-align:center}.margin-left-16[_ngcontent-%COMP%]{margin-left:25px}h1[_ngcontent-%COMP%]{font-size:35px;padding-top:32px;font-weight:700;color:#0036e7}h2[_ngcontent-%COMP%]{font-size:30px;padding-top:16px;font-weight:700;color:#0036e7}@media (max-width: 599px){.demo-header-logo[_ngcontent-%COMP%]{width:120px}}"]})}return a})()},3372:(W,L,r)=>{r.d(L,{M:()=>e});var f=r(6814),E=r(1447),b=r(2296),u=r(617),I=r(8991),o=r(5879),x=r(3814);function S(g,R){1&g&&(o.TgZ(0,"div",6),o._UZ(1,"img",7),o.TgZ(2,"h1",8),o._uU(3),o.ALo(4,"transloco"),o.qZA()()),2&g&&(o.xp6(1),o.Q6J("src","https://cdn.verifik.co/demo/failedtodetectdocument@3x.png",o.LSH),o.xp6(2),o.hij(" ",o.lcZ(4,2,"id_scanning.country_not_allowed")," "))}function M(g,R){1&g&&(o.TgZ(0,"div",6),o._UZ(1,"img",7),o.TgZ(2,"h1",8),o._uU(3),o.ALo(4,"transloco"),o.qZA()()),2&g&&(o.xp6(1),o.Q6J("src","https://cdn.verifik.co/assets/biometric-services/driverLicense.svg",o.LSH),o.xp6(2),o.hij(" ",o.lcZ(4,2,"id_scanning.driver_license_not_allowed")," "))}function w(g,R){1&g&&(o.TgZ(0,"div",6),o._UZ(1,"img",7),o.TgZ(2,"h1",8),o._uU(3),o.ALo(4,"transloco"),o.qZA()()),2&g&&(o.xp6(1),o.Q6J("src","https://cdn.verifik.co/assets/biometric-services/Passport.svg",o.LSH),o.xp6(2),o.hij(" ",o.lcZ(4,2,"id_scanning.passport_not_allowed")," "))}function l(g,R){1&g&&(o.TgZ(0,"div",6),o._UZ(1,"img",7),o.TgZ(2,"h1",8),o._uU(3),o.ALo(4,"transloco"),o.qZA()()),2&g&&(o.xp6(1),o.Q6J("src","https://cdn.verifik.co/assets/biometric-services/governmentID.svg",o.LSH),o.xp6(2),o.hij(" ",o.lcZ(4,2,"id_scanning.government_id_not_allowed")," "))}function h(g,R){1&g&&(o.TgZ(0,"div",6),o._UZ(1,"img",9),o.TgZ(2,"h1",8),o._uU(3),o.ALo(4,"transloco"),o.qZA()()),2&g&&(o.xp6(1),o.Q6J("src","https://cdn.verifik.co/demo/redstop.svg",o.LSH),o.xp6(2),o.hij(" ",o.lcZ(4,2,"id_scanning.face_not_found")," "))}function t(g,R){if(1&g&&(o.TgZ(0,"div",6),o._UZ(1,"img",7),o.TgZ(2,"h1",8),o._uU(3),o.ALo(4,"transloco"),o.qZA()()),2&g){const O=o.oxw();o.xp6(1),o.Q6J("src",O.attemptsLimit-O.attempts>0?"https://cdn.verifik.co/demo/failedtodetectdocument@3x.png":"https://cdn.verifik.co/demo/redstop.svg",o.LSH),o.xp6(2),o.hij(" ",o.lcZ(4,2,O.attemptsLimit-O.attempts>0?"id_scanning.document_not_detected":"id_scanning.failed_to_detect_limit")," ")}}function C(g,R){if(1&g&&(o.TgZ(0,"p",8),o._uU(1),o.ALo(2,"transloco"),o.qZA()),2&g){const O=o.oxw();o.xp6(1),o.AsE("",o.lcZ(2,2,"id_scanning.remaining_attempts")," ",O.attemptsLimit-O.attempts,"")}}let e=(()=>{class g{ngOnInit(){console.log({errorContent:this.errorContent,attempts:this.attempts})}tryAgain(O){this.dialogRef&&this.dialogRef.close({addAttempt:1}),this.callback&&this.callback({addAttempt:1})}restartDemo(){this.dialogRef&&this.dialogRef.close({addAttempt:1}),this.callback&&this.callback({addAttempt:1})}static#t=this.\u0275fac=function(A){return new(A||g)};static#e=this.\u0275cmp=o.Xpm({type:g,selectors:[["kyc-document-errors-display"]],inputs:{errorContent:"errorContent",attempts:"attempts",attemptsLimit:"attemptsLimit",dialogRef:"dialogRef",callback:"callback"},standalone:!0,features:[o.jDz],decls:12,vars:10,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"id-scanning-error-div"],["fxLayout","column","fxLayoutAlign","center center",3,"ngSwitch"],["fxLayout","column","fxLayoutAlign","center center",4,"ngSwitchCase"],["fxLayout","column","fxLayoutAlign","center center",4,"ngSwitchDefault"],["class","mt-4",4,"ngIf"],["mat-raised-button","","color","primary",1,"mt-4","z-index-2","id-scanning-try-again-button",3,"click"],["fxLayout","column","fxLayoutAlign","center center"],["alt","",1,"id-scanning-failed-document-img",3,"src"],[1,"mt-4"],["alt","",1,"face_not_found",3,"src"]],template:function(A,P){1&A&&(o.TgZ(0,"div",0)(1,"div",1),o.YNc(2,S,5,4,"div",2),o.YNc(3,M,5,4,"div",2),o.YNc(4,w,5,4,"div",2),o.YNc(5,l,5,4,"div",2),o.YNc(6,h,5,4,"div",2),o.YNc(7,t,5,4,"div",3),o.qZA(),o.YNc(8,C,3,4,"p",4),o.TgZ(9,"button",5),o.NdJ("click",function(){return P.attemptsLimit-P.attempts>0?P.tryAgain(!0):P.restartDemo()}),o._uU(10),o.ALo(11,"transloco"),o.qZA()()),2&A&&(o.xp6(1),o.Q6J("ngSwitch",P.errorContent.message),o.xp6(1),o.Q6J("ngSwitchCase","country_not_allowed"),o.xp6(1),o.Q6J("ngSwitchCase","driver_license_not_allowed"),o.xp6(1),o.Q6J("ngSwitchCase","passport_not_allowed"),o.xp6(1),o.Q6J("ngSwitchCase","government_id_not_allowed"),o.xp6(1),o.Q6J("ngSwitchCase","face_not_found"),o.xp6(2),o.Q6J("ngIf",P.attemptsLimit-P.attempts>0),o.xp6(2),o.hij(" ",o.lcZ(11,8,P.attemptsLimit-P.attempts>0?"id_scanning.retry":"restart")," "))},dependencies:[f.ez,f.O5,f.RF,f.n9,f.ED,E.o9,x.xw,x.Wh,I.y4,I.Ot,u.Ps,b.ot,b.lW],styles:[".id-scanning-error-div[_ngcontent-%COMP%]{width:auto;background:white;height:600px;padding:16px}.id-scanning-error-div[_ngcontent-%COMP%]   .id-scanning-failed-document-img[_ngcontent-%COMP%]{width:45%}.id-scanning-error-div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#0036e7;font-size:24px;font-weight:800;text-align:center}.id-scanning-error-div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#01236da6;font-size:16px;font-weight:300;text-align:center}"]})}return g})()}}]);