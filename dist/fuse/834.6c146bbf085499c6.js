"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[834],{3834:(Cn,P,c)=>{c.r(P),c.d(P,{default:()=>vn});var x=c(5861),p=c(6814),w=c(1447),y=c(6223),_=c(2296),U=c(1043),j=c(4516),T=c(5940),k=c(4748),W=c(6420),Y=c(8533),X=c(5789),R=c(5986),m=c(8991),B=c(4913),t=c(5879),b=c(8340),u=c(3814);function G(n,s){1&n&&t._UZ(0,"img",23)}function $(n,s){1&n&&t._UZ(0,"img",24)}function tt(n,s){1&n&&t._UZ(0,"img",25)}function et(n,s){1&n&&t._UZ(0,"img",26)}function nt(n,s){1&n&&(t.TgZ(0,"h3",27),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"step_one.cards.liveness")))}function it(n,s){1&n&&(t.TgZ(0,"h3",27),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"step_one.cards.compare")))}function ot(n,s){1&n&&(t.TgZ(0,"h3",28),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"step_one.cards.verify_id")))}function at(n,s){1&n&&(t.TgZ(0,"h3",29),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"step_one.cards.id")))}function st(n,s){if(1&n&&(t.TgZ(0,"div",12)(1,"div",13)(2,"div",14),t.YNc(3,G,1,0,"img",15),t.YNc(4,$,1,0,"img",16),t.YNc(5,tt,1,0,"img",17),t.YNc(6,et,1,0,"img",18),t.qZA(),t.YNc(7,nt,3,3,"h3",19),t.YNc(8,it,3,3,"h3",19),t.YNc(9,ot,3,3,"h3",20),t.YNc(10,at,3,3,"h3",21),t.qZA(),t.TgZ(11,"p",22),t._uU(12),t.qZA()()),2&n){const e=s.$implicit,i=s.index,o=t.oxw(2);t.xp6(3),t.Q6J("ngIf","documentReview"===e.code),t.xp6(1),t.Q6J("ngIf","document"===e.code),t.xp6(1),t.Q6J("ngIf","liveness"===e.code),t.xp6(1),t.Q6J("ngIf","end"===e.code),t.xp6(1),t.Q6J("ngIf","liveness"===e.code),t.xp6(1),t.Q6J("ngIf","end"===e.code),t.xp6(1),t.Q6J("ngIf","documentReview"===e.code),t.xp6(1),t.Q6J("ngIf","document"===e.code),t.xp6(1),t.Udp("background",o.project.branding.buttonColor)("color",o.project.branding.buttonTxtColor),t.xp6(1),t.hij(" ",i+1," ")}}function rt(n,s){if(1&n&&(t.TgZ(0,"a",33),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&n){const e=t.oxw(3);t.Q6J("href",e.project.termsAndConditionsUrl,t.LSH),t.xp6(1),t.Oqu(t.lcZ(2,2,"signup.terms"))}}function ct(n,s){if(1&n&&(t.TgZ(0,"span",34),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&n){const e=t.oxw(3);t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(2,3,"signup.and"),"")}}function dt(n,s){if(1&n&&(t.TgZ(0,"a",33),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&n){const e=t.oxw(3);t.Q6J("href",e.project.privacyUrl,t.LSH),t.xp6(1),t.Oqu(t.lcZ(2,2,"signup.privacyPolicy"))}}function lt(n,s){if(1&n&&(t.TgZ(0,"mat-checkbox",30)(1,"span"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.YNc(4,rt,3,4,"a",31),t.YNc(5,ct,3,5,"span",32),t.YNc(6,dt,3,4,"a",31),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(3,6,"signup.agreement1")," "),t.xp6(2),t.Q6J("ngIf",e.project.termsAndConditionsUrl),t.xp6(1),t.Q6J("ngIf",e.project.termsAndConditionsUrl&&e.project.privacyUrl),t.xp6(1),t.Q6J("ngIf",e.project.privacyUrl)}}function pt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"h1"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"p",3),t._uU(6),t.ALo(7,"transloco"),t.qZA(),t.TgZ(8,"p",4),t._uU(9),t.ALo(10,"transloco"),t.qZA()(),t.TgZ(11,"div",5)(12,"div",6),t.YNc(13,st,13,13,"div",7),t.qZA(),t.TgZ(14,"form",8),t.YNc(15,lt,7,8,"mat-checkbox",9),t.TgZ(16,"div",10)(17,"button",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.startKYC())}),t._uU(18),t.ALo(19,"transloco"),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.Oqu(t.lcZ(4,18,"signup.instructions_step.title")),t.xp6(2),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(7,20,"signup.instructions_step.header")," "),t.xp6(2),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(10,22,"signup.instructions_step.subtitle")," "),t.xp6(4),t.Q6J("ngForOf",e.navigation.displayableSteps),t.xp6(1),t.Q6J("formGroup",e.acceptanceForm),t.xp6(1),t.Q6J("ngIf",e.project.termsAndConditionsUrl||e.project.privacyUrl),t.xp6(2),t.Udp("background",e.project.branding.buttonColor)("color",e.project.branding.buttonTxtColor),t.Q6J("disabled",e.invalidForm()),t.xp6(1),t.hij(" ",t.lcZ(19,24,"signup.instructions_step.button")," ")}}let gt=(()=>{class n{constructor(e,i){this._KYCService=e,this._formBuilder=i,this.appRegistration=this._KYCService.appRegistration,this.project=this._KYCService.currentProject,this.projectFlow=this._KYCService.currentProjectFlow,this.navigation=this._KYCService.getNavigation(),this.steps=[],this.loading=!0}ngOnInit(){this.defineStepsAndInstrutions(),this.acceptanceForm=this._formBuilder.group({legalAgreement:[!1]}),setTimeout(()=>{this.loading=!1},1e3)}defineStepsAndInstrutions(){"COMPLETED"!==this.appRegistration.status?this.appRegistration.person&&this.appRegistration.biometricValidation?this._KYCService.navigateTo("documentLivenessReview"):this.appRegistration.documentValidation&&this.navigation.map.document&&this._KYCService.navigateTo("documentReview"):this._KYCService.navigateTo("end")}ngOnDestroy(){}startKYC(){this._KYCService.navigateTo(this.navigation.displayableSteps[0].code)}invalidForm(){return!(!this.project.termsAndConditionsUrl&&!this.project.privacyUrl||this.acceptanceForm.value.legalAgreement)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(b.H),t.Y36(y.qu))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["kyc-instructions"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","step-one-main-div","fxLayout","column","fxLayoutAlign","start center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start center",1,"step-one-main-div"],["fxLayout","column","fxLayoutAlign","center center",1,"step-one-middle-container"],[1,"p-1"],[1,"p-2"],["fxLayout","column","fxLayoutAlign","center center",1,"step-one-woman-and-options"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","center center","fxLayoutWrap","true",1,"steps-in-cards"],["fxLayout","column","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["novalidate","","fxLayout","column",3,"formGroup"],["formControlName","legalAgreement",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start center",1,"accept-terms-container"],["mat-raised-button","",1,"mt-8","z-index-2","start-demo-button",3,"disabled","click"],["fxLayout","column","fxLayoutAlign","start center"],["fxLayout","column","fxLayoutAlign","start center",1,"step-one-card"],["fxLayout","row","fxLayoutAlign","center center",1,"step-one-card-image"],["src","https://cdn.verifik.co/demo/x2Step2.png","alt","","class","id_in_card_img",4,"ngIf"],["src","https://cdn.verifik.co/demo/id_in_card.png","alt","","class","id_in_card_img",4,"ngIf"],["src","https://cdn.verifik.co/demo/x2Step3.png","alt","","class","id_in_card_img",4,"ngIf"],["src","https://cdn.verifik.co/demo/x2Step4.png","alt","","class","id_in_card_img",4,"ngIf"],["class","mt-4 text-center m-2",4,"ngIf"],["class","mt-4 text-center",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"step-one-circle"],["src","https://cdn.verifik.co/demo/x2Step2.png","alt","",1,"id_in_card_img"],["src","https://cdn.verifik.co/demo/id_in_card.png","alt","",1,"id_in_card_img"],["src","https://cdn.verifik.co/demo/x2Step3.png","alt","",1,"id_in_card_img"],["src","https://cdn.verifik.co/demo/x2Step4.png","alt","",1,"id_in_card_img"],[1,"mt-4","text-center","m-2"],[1,"mt-4","text-center"],[1,"mt-4"],["formControlName","legalAgreement"],["target","_blank",3,"href",4,"ngIf"],["class","mr-1",3,"color",4,"ngIf"],["target","_blank",3,"href"],[1,"mr-1"]],template:function(i,o){1&i&&t.YNc(0,pt,20,26,"div",0),2&i&&t.Q6J("ngIf",o.appRegistration&&o.project&&o.projectFlow&&o.acceptanceForm&&!o.loading)},dependencies:[w.o9,u.xw,u.Wh,m.y4,m.Ot,p.ez,p.sg,p.O5,R.p9,R.oG,_.ot,_.lW,U.lN,j.c,y.u5,y._Y,y.JJ,y.JL,y.UX,y.sg,y.u,B.LD],styles:[".step-one-main-div{width:100%;padding-top:100px}.step-one-logo{width:82px;height:auto}.error-text{color:#ed4c5c!important}.step-one-middle-container{width:50%}.step-one-woman-and-options,.w-full{width:100%}.p-1{font-size:16px;text-align:center;color:#01236db1}.p-2{font-size:16px;font-weight:800;text-align:center;color:#01236db1}.business-woman-image{width:500px;position:absolute;bottom:60px;height:auto;z-index:1}.step-one-card{margin-top:30px;z-index:2;width:240px;min-height:310px;margin-right:25px;background:white;border:1px solid rgba(204,204,204,.1647058824);box-shadow:3px 3px 3px 3px #0000000d;border-radius:25px}.step-one-card h3{text-align:center}.step-one-card-image{height:185px}.id_in_card_img{padding:10px}h3{font-size:16px;font-weight:600}.step-one-circle{background:#0036e7;z-index:2;position:relative;bottom:20px;color:#fff;width:45px;height:45px;padding-top:11px;text-align:center;border-radius:50%;margin-right:25px}.text-center{text-align:center}.z-index-2{z-index:2}.accept-terms-container{height:250px}.form-div{padding-bottom:100px}.form-div form{width:40%!important;margin-top:50px;z-index:2}.error-w{width:40%!important}@media (max-width: 599px){.step-one-main-div{padding-top:20px}.form-div h1{padding:12px;text-align:center}.form-div form{width:90%!important;margin-top:50px;z-index:2}.error-w{width:90%!important}.step-one-logo{width:62px}.step-one-middle-container{width:90%}.step-one-middle-container h1{text-align:center}.business-woman-image{width:350px;position:absolute;bottom:60px;height:auto;z-index:1;opacity:.3}.step-one-card{margin-top:32px}.accept-terms-container{height:300px;width:90%}.start-demo-button{width:280px!important}.steps-in-cards{width:100%;overflow-x:scroll}}a{text-decoration:underline;font-weight:800}@media (min-width: 600px) and (max-width: 959px){.step-one-main-div{padding-top:40px}.form-div h1{padding:20px;text-align:center}.form-div form{width:85%!important;margin-top:50px;z-index:2}.error-w{width:85%!important}.step-one-logo{width:62px}.step-one-middle-container{width:90%}.step-one-middle-container h1{text-align:center}.start-demo-button{width:240px!important}.step-one-card{width:180px}.step-one-card h3{font-size:14px}}@media (min-width: 960px) and (max-width: 1279px){.step-one-main-div{padding-top:40px}.form-div form{width:60%!important;margin-top:50px;z-index:2}.error-w{width:60%!important}.step-one-logo{width:68px}.step-one-middle-container{width:65%}.step-one-middle-container h1{text-align:center}.start-demo-button{width:280px!important}.step-one-card{width:200px}}@media (min-width: 1280px) and (max-width: 1919px){.step-one-main-div{padding-top:30px}.step-one-middle-container{width:70%}.step-one-middle-container h1{text-align:center}.business-woman-image{width:450px;position:absolute;bottom:60px;height:auto;z-index:1;opacity:.5}}\n"],encapsulation:2,data:{animation:k.L}})}return n})();var A=c(7700),D=c(6007),F=c(9036),Z=c(553),M=c(8645),C=c(6799),O=c(9162),I=c(6036),L=c(7509);const mt=["video"],ut=["canvas"],ht=["result"],ft=["toSend"],_t=["credentialCanvas"];function xt(n,s){1&n&&t._UZ(0,"canvas",4,5)}function vt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.continue())}),t._uU(2),t.ALo(3,"transloco"),t.qZA()()}2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"skip")))}function Ct(n,s){if(1&n&&(t.TgZ(0,"div",22)(1,"div",23),t._uU(2),t.qZA(),t.TgZ(3,"div",24),t._uU(4),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(1),t.Udp("color",e.project?e.project.branding.titleColor:null),t.xp6(1),t.Oqu(e.errorFace.title),t.xp6(1),t.Udp("color",e.project?e.project.branding.txtColor:null),t.xp6(1),t.Oqu(e.errorFace.subtitle)}}function wt(n,s){if(1&n&&(t.TgZ(0,"div",11)(1,"div",12),t.YNc(2,Ct,5,6,"div",13),t.qZA(),t.TgZ(3,"div",14),t._UZ(4,"video",15,16)(6,"div",17,18)(8,"canvas",19,20)(10,"canvas",19,21),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.errorFace&&!e.loadingResults),t.xp6(1),t.Udp("width",e.WIDTH,"px")("height",e.HEIGHT,"px"),t.xp6(1),t.Udp("max-width",e.maxWidth,"px")("max-height",e.maxHeight,"px"),t.ekj("hidden",e.base64Image),t.xp6(2),t.Udp("width",e.WIDTH,"px")("height",e.HEIGHT,"px"),t.ekj("hidden",e.base64Image),t.xp6(2),t.ekj("hidden",!e.base64Image),t.xp6(2),t.ekj("hidden",!0)}}function yt(n,s){if(1&n&&(t.TgZ(0,"div",25),t._UZ(1,"img",26),t.TgZ(2,"h1",27),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"p",27),t._uU(6),t.ALo(7,"transloco"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.Oqu(t.lcZ(4,4,"id_scanning.camera_not_found")),t.xp6(3),t.hij(" ",t.lcZ(7,6,"id_scanning.camera_not_found_description")," ")}}function bt(n,s){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,wt,12,21,"div",9),t.YNc(2,yt,8,8,"div",10),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.loadingModel&&!e.lowCamera),t.xp6(1),t.Q6J("ngIf",!e.loadingModel&&e.lowCamera)}}function Lt(n,s){1&n&&t._UZ(0,"img",35)}function At(n,s){1&n&&t._UZ(0,"div",11)}function Zt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",11)(1,"button",36),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.retry())}),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"transloco"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(4,3,"id_scanning.retry")," ")}}const Ot=function(n,s){return{green:n,red:s}};function It(n,s){if(1&n&&(t.TgZ(0,"div",11),t.O4$(),t.TgZ(1,"svg",37),t._UZ(2,"path",38)(3,"path",39),t.TgZ(4,"text",40),t._uU(5),t.qZA()(),t.kcU(),t.TgZ(6,"p"),t._uU(7),t.ALo(8,"transloco"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.WLB(7,Ot,e.errorContent.livenessScore>=e.projectFlow.onboardingSettings.liveness.livenessMinScore,e.errorContent.livenessScore<e.projectFlow.onboardingSettings.liveness.livenessMinScore)),t.xp6(2),t.uIk("stroke-dasharray",e.errorContent.livenessScore+", 100"),t.xp6(2),t.hij("",e.errorContent.livenessScore,"%"),t.xp6(2),t.AsE("",t.lcZ(8,5,"errors.min_liveness_score_is")," ",e.projectFlow.onboardingSettings.liveness.livenessMinScore,"")}}function St(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",28)(1,"div",29),t.YNc(2,Lt,1,0,"img",30),t.TgZ(3,"h1",31),t._uU(4),t.ALo(5,"transloco"),t.qZA(),t.YNc(6,At,1,0,"div",9),t.YNc(7,Zt,5,5,"div",9),t.YNc(8,It,9,10,"div",32),t.TgZ(9,"div",33)(10,"button",34),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.retry())}),t._uU(11),t.ALo(12,"transloco"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.errorContent&&!e.errorContent.livenessScore),t.xp6(1),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.hij(" ",t.lcZ(5,10,"errors."+e.errorContent.message)," "),t.xp6(2),t.Q6J("ngIf","person_already_set"===e.errorContent.message),t.xp6(1),t.Q6J("ngIf","liveness_score_not_acceptable"===e.errorContent.message),t.xp6(1),t.Q6J("ngIf",e.errorContent&&e.errorContent.livenessScore),t.xp6(2),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(12,12,"step_three.scan_again")," ")}}let Tt=(()=>{class n{constructor(e,i,o,a,r,d){this._changeDetectorRef=e,this._demoService=i,this._translocoService=o,this._splashScreenService=a,this.renderer=r,this._KYCService=d,this._matDialog=(0,t.f3M)(A.uw),this.debugText="debug",this.OVAL={},this.loadingResults=!1,this.loadingModel=!1,this._unsubscribeAll=new M.x,this.minPixelFace=234,this.videoOptions={frameRate:{ideal:30,max:30}},this.setMaxDimensions=()=>{this.maxHeight=Math.floor(.7*window.innerHeight),this.maxWidth=Math.floor(.9*window.innerWidth)},this.setCanvasDimension=()=>{this.HEIGHT=Math.min(this.videoInput.clientHeight,this.maxHeight),this.WIDTH=Math.min(this.videoInput.clientWidth,this.maxWidth),this.videoCenterX=this.WIDTH/2,this.videoCenterY=this.HEIGHT/2,this.marginY=.04*this.HEIGHT,this.marginX=.8*this.marginY,this.OVAL.radiusY=.42*this.HEIGHT,this.OVAL.radiusX=.75*this.OVAL.radiusY,2*this.OVAL.radiusX>=this.WIDTH&&(this.OVAL.radiusX=.48*this.WIDTH,this.OVAL.radiusY=this.OVAL.radiusX/.75),this.displaySize={width:this.WIDTH,height:this.HEIGHT},this.resizeDimensions={rectHeight:this.HEIGHT,rectWidth:Math.min(2.8*this.OVAL.radiusX,this.WIDTH),y:0,x:this.videoCenterX-Math.min(2.8*this.OVAL.radiusX,this.WIDTH)/2},this.originalDimensions={rectHeight:this.videoDimensions.height,rectWidth:this.resizeDimensions.rectWidth/this.WIDTH*this.videoDimensions.width,y:0,x:this.resizeDimensions.x/this.WIDTH*this.videoDimensions.width}},this.navigation=this._KYCService.getNavigation(),this.continueWithLiveness=this._initAppRegistrationData(),this.continueWithLiveness&&(this.loadingModel=!0,this.lowCamera=!1,this.debugIndex=0,this.successPosition=0,this.showError=!1,this.errorContent={message:""},this.videoOptions[this.demoData.isMobile?"width":"height"]={ideal:1080},this.listenModeDebug(),this.appLoginToken=localStorage.getItem("accessToken"))}_initAppRegistrationData(){return this.osInfo=this.detectOS(),this.demoData=this._demoService.getDemoData(),this.appRegistration=this._KYCService.appRegistration,this.appRegistration.forceUpload=!(!this.appRegistration.biometricValidation||this.appRegistration.person),this.appRegistration.biometricValidation&&this.appRegistration.person?(this._KYCService.navigateTo("next"),!1):(this.project=this._KYCService.currentProject,this.projectFlow=this._KYCService.currentProjectFlow,!0)}ngOnInit(){var e=this;return(0,x.Z)(function*(){e.continueWithLiveness&&(e._splashScreenService.show(),e.errorFace=null,e.loadingResults=!1,e.base64Image=null,yield e.loadImages(),e.setMaxDimensions(),e.renderer.listen("window","resize",()=>{e.setMaxDimensions(),e.videoInput&&(e.setCanvasDimension(),e.setConfigCanvas())}),e._demoService.faceapi$.subscribe(i=>{e.loadingModel=!i,i&&e.startAsyncVideo()}))})()}listenModeDebug(){this.isActiveDebug=!!localStorage.getItem("isActiveDebug"),document.addEventListener("keydown",e=>{if(this.debugText.charAt(this.debugIndex)===e.key.toLowerCase())return 3===this.debugIndex&&(this.isActiveDebug=!this.isActiveDebug,localStorage.setItem("isActiveDebug",this.isActiveDebug?"true":""),this._changeDetectorRef.markForCheck()),this.debugIndex++;this.debugIndex=0})}stopRecord(){this.detectFaceInterval&&clearInterval(this.detectFaceInterval),this.stream&&this.stream.getTracks().forEach(e=>e.stop())}restart(){var e=this;return(0,x.Z)(function*(){e.completeResults(),yield e.startAsyncVideo()})()}loadImages(){var e=this;return(0,x.Z)(function*(){e.left=new Image,e.left.crossOrigin="anonymous",e.left.src="https://cdn.verifik.co/web-sdk/images/left.png",e.right=new Image,e.right.crossOrigin="anonymous",e.right.src="https://cdn.verifik.co/web-sdk/images/right.png",e.up=new Image,e.up.crossOrigin="anonymous",e.up.src="https://cdn.verifik.co/web-sdk/images/up.png",e.down=new Image,e.down.crossOrigin="anonymous",e.down.src="https://cdn.verifik.co/web-sdk/images/down.png"})()}startAsyncVideo(){var e=this;return(0,x.Z)(function*(){try{e.stream=yield navigator.mediaDevices.getUserMedia({video:e.videoOptions,audio:!1}),e.videoInput=e.video.nativeElement,e.videoInput.srcObject=e.stream,e.videoInput.style.transform="scaleX(-1)",e.canvasRef.nativeElement.style.transform="scaleX(-1)";const o=e.stream.getVideoTracks()[0].getSettings(),{width:a,height:r}=o;if(e.videoDimensions={height:r,width:a},r<600)return e.lowCamera=!0,e.loadingModel=!1,void e._splashScreenService.hide();e.videoInput.addEventListener("loadeddata",()=>{e.video||e.canvas?(e.setCanvasDimension(),e._splashScreenService.hide(),e.detectFaces()):e.stopRecord()})}catch(i){alert(`${i.message}`),console.error("SHOW ERROR",i)}})()}detectFaces(){var e=this;return(0,x.Z)(function*(){yield e.setConfigCanvas(),e.detectFaceInterval=setInterval((0,x.Z)(function*(){try{const i=yield C.Qr(e.videoInput,new C.d7({minConfidence:.2})).withFaceLandmarks(),o=e.canvas.getContext("2d");i.length>0&&(e.lastFace=i[0],e.errorFace=null,e.drawFaceAndCenter(i,o),e.isFaceCentered(e.lastFace.landmarks.getNose()[3]),e.isFaceClose(e.lastFace.landmarks),e.drawStatusOval(o,!e.errorFace?.title),e.errorFace?e.successPosition=0:++e.successPosition,e.errorFace||(e.successPosition=0,e.captureBase64Image())),e._changeDetectorRef.markForCheck()}catch(i){alert(i.message)}}),e.demoData.isMobile?500:300)})()}setConfigCanvas(){var e=this;return(0,x.Z)(function*(){e.canvas||(e.canvas=yield C.Jd(e.videoInput),e.canvasEl=e.canvasRef.nativeElement,e.canvasEl.appendChild(e.canvas),e.canvas.setAttribute("id","canvas")),C.JF(e.canvas,e.displaySize);const i=e.canvas.getContext("2d");e.drawOvalCenterAndMask(i)})()}drawFaceAndCenter(e,i){const o=C._C(e,this.displaySize);this.drawOvalCenterAndMask(i),this.isActiveDebug&&(i.strokeStyle="red",i.lineWidth=4,i.strokeRect(this.videoCenterX-this.marginX,this.videoCenterY,2*this.marginX,2*this.marginY),C.ii.drawFaceLandmarks(this.canvas,o),C.ii.drawFaceExpressions(this.canvas,o),new C.ii.DrawBox(e[0].detection.box,{label:`${e[0].gender.toUpperCase()} | ${Math.round(e[0].age)} years old`}).draw(this.canvas))}drawOvalCenterAndMask(e){e.clearRect(0,0,this.canvas.width,this.canvas.height),e.fillStyle="rgba(255, 255, 255, 0.75)",e.fillRect(0,0,this.canvas.width,this.canvas.height),e.globalCompositeOperation="destination-out",e.fillStyle="rgba(255, 255, 255, 1)",e.beginPath(),e.ellipse(this.videoCenterX,this.videoCenterY,this.OVAL.radiusX,this.OVAL.radiusY,0,0,2*Math.PI),e.fill(),e.closePath(),e.globalCompositeOperation="source-over"}drawText(e,i,o,a){e.font="30px Arial",e.textAlign="center";const r=e.measureText(i);e.fillStyle="black",e.fillRect(o-r.width/2,a-30-10,r.width+2,60),e.fillStyle="white",e.fillText(i,o,a)}drawStatusOval(e,i){e.beginPath(),e.ellipse(this.videoCenterX,this.videoCenterY,this.OVAL.radiusX,this.OVAL.radiusY,0,0,2*Math.PI),e.lineWidth=5,e.strokeStyle=i?"green":"red",e.stroke(),e.closePath(),i||(this.errorFace.canvas?.includes("\u2191")&&e.drawImage(this.up,this.videoCenterX-20,this.videoCenterY-this.OVAL.radiusY+10,40,40),this.errorFace.canvas?.includes("\u2193")&&e.drawImage(this.down,this.videoCenterX-20,this.videoCenterY+this.OVAL.radiusY-50,40,40),this.errorFace.canvas?.includes("\u2192")&&e.drawImage(this.right,this.videoCenterX+this.OVAL.radiusX-50,this.videoCenterY-20,40,40),this.errorFace.canvas?.includes("\u2190")&&e.drawImage(this.left,this.videoCenterX-this.OVAL.radiusX+10,this.videoCenterY-20,40,40)),this._changeDetectorRef.markForCheck()}isFaceCentered(e){const i=e.x/this.videoDimensions.width*this.WIDTH,o=e.y/this.videoDimensions.height*this.HEIGHT;if(!(i>this.videoCenterX-this.marginX&&i<this.videoCenterX+this.marginX&&o>this.videoCenterY&&o<this.videoCenterY+2.5*this.marginY)){let r="";(i<this.videoCenterX-this.marginX||i>this.videoCenterX+this.marginX)&&(r+=` ${i<this.videoCenterX-this.marginX?"\u2192":"\u2190"} `),(o<this.videoCenterY||o>this.videoCenterY+2*this.marginY)&&(r+=` ${o<this.videoCenterY?"\u2191":"\u2193"}  `),this.errorFace={title:this._translocoService.translate("liveness.center_yor_face"),subtitle:this._translocoService.translate("liveness.center_your_face_subtitle"),canvas:r}}}isFaceClose(e){(e.imageHeight*e.imageWidth/Math.floor(this.originalDimensions.rectHeight*this.originalDimensions.rectWidth)<.25||e.imageHeight<this.minPixelFace||e.imageWidth<this.minPixelFace)&&(this.errorFace={title:this._translocoService.translate("liveness.get_closer"),subtitle:this._translocoService.translate("liveness.get_closer_subtitle")})}captureBase64Image(){this.saveImageBase64Intent||(this.saveImageBase64Intent=setTimeout(()=>{this.errorFace&&(this.saveImageBase64Intent=clearTimeout(this.saveImageBase64Intent)),this.takePicture()},1500))}takePicture(){var e=this;return(0,x.Z)(function*(){const i=e.canvasToSendRef.nativeElement;e.setPictureInCavas(e.canvasResultRef.nativeElement,e.resizeDimensions,e.originalDimensions),e.setPictureInCavas(i,e.originalDimensions),e.base64Image=i.toDataURL("image/jpeg").replace(/^data:.*;base64,/,""),e.stopRecord(),e.recordLiveness()})()}setPictureInCavas(e,i,o){const a=e.getContext("2d");e.width=i.rectWidth,e.height=i.rectHeight,e.style.marginLeft=`${i.x}px`,e.style.marginTop=`${i.y}px`,o||(o={x:i.x,y:i.y,rectWidth:i.rectWidth,rectHeight:i.rectHeight}),a.drawImage(this.video.nativeElement,o.x,o.y,o.rectWidth,o.rectHeight,0,0,i.rectWidth,i.rectHeight)}detectOS(){const e=window.navigator.userAgent.toLowerCase();return/android/.test(e)?"ANDROID":/iphone|ipad|ipod/.test(e)?"IOS":"DESKTOP"}recordLiveness(e){this.loadingResults||(this.loadingResults=!0,this._splashScreenService.show(),this._KYCService.createBiometricValidation({image:this.base64Image,os:this.osInfo,force:!!e}).subscribe({next:o=>{this.appRegistration.person=o.data.person,this.appRegistration.biometricValidation=o.data.biometricValidation},error:o=>{this.showError=!0,this.errorContent=o.error;const a=this.errorContent.message.split("@");this.errorContent.message=a[0],this.errorContent.livenessScore=Math.round(Number(100*a[1]||0)),this._splashScreenService.hide(),this.loadingResults=!1},complete:()=>{this._splashScreenService.hide(),this.loadingResults=!1,this._KYCService.navigateTo("next")}}))}retryLivenessModal(e){const i={title:this._translocoService.translate("liveness.liveness_failed"),message:this._translocoService.translate("liveness.liveness_error_message",{error:e}),icon:{show:!0,name:"heroicons_outline:exclamation-triangle",color:"warn"},actions:{confirm:{show:!0,label:this._translocoService.translate("confirm"),color:"primary"},cancel:{show:!0,label:this._translocoService.translate("cancel")}},dismissible:!1};this._matDialog.open(F.u,{autoFocus:!1,disableClose:!0,panelClass:"fuse-confirmation-dialog-panel",data:i}).afterClosed().subscribe(o=>{if("confirmed"===o)return this.restart()})}completeResults(){this.errorFace=null,this.loadingResults=!1,this.base64Image=null,this.errorResult||this.stopRecord(),this.saveImageBase64Intent&&(this.saveImageBase64Intent=clearTimeout(this.saveImageBase64Intent)),this._splashScreenService.hide(),this._changeDetectorRef.markForCheck()}ngOnDestroy(){this._unsubscribeAll.next(null),this.loadingResults=!1,this.video=void 0,this.detectFaceInterval&&this.stopRecord()}continueRedirection(){if(this.showError&&"person_not_found"===this.errorContent.message)return void window.location.reload();const e=localStorage.getItem("accessToken");window.location.href=`${Z.N.verifikProject===this.project._id?`${Z.N.appUrl}/sign-in`:this.projectFlow.redirectUrl}?type=login&token=${e}`}retry(){this._KYCService.navigateTo("instructions")}continue(){"optional"!==this.projectFlow.onboardingSettings.steps.liveness||this._KYCService.navigateTo("end")}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(t.sBO),t.Y36(O.e),t.Y36(m.Vn),t.Y36(I.j),t.Y36(t.Qsj),t.Y36(b.H))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["kyc-liveness"]],viewQuery:function(i,o){if(1&i&&(t.Gf(mt,5),t.Gf(ut,5),t.Gf(ht,5),t.Gf(ft,5),t.Gf(_t,5)),2&i){let a;t.iGM(a=t.CRH())&&(o.video=a.first),t.iGM(a=t.CRH())&&(o.canvasRef=a.first),t.iGM(a=t.CRH())&&(o.canvasResultRef=a.first),t.iGM(a=t.CRH())&&(o.canvasToSendRef=a.first),t.iGM(a=t.CRH())&&(o.credentialRef=a.first)}},standalone:!0,features:[t.jDz],decls:4,vars:4,consts:[["hidden","true",4,"ngIf"],["class","w-full flex flex-col justify-end items-end p-8",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","min-h-[60vh] justify-center p-4 sm:p-1 xs:p-1 w-full",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","flex w-full",4,"ngIf"],["hidden","true"],["credentialCanvas",""],[1,"w-full","flex","flex-col","justify-end","items-end","p-8"],[1,"text-underline","cursor-pointer",3,"click"],["fxLayout","column","fxLayoutAlign","center center",1,"min-h-[60vh]","justify-center","p-4","sm:p-1","xs:p-1","w-full"],["fxLayout","column","fxLayoutAlign","center center","class","w-full",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","id-scanning-error-div",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"w-full"],["fxLayout","column","fxLayoutAlign","center center",1,"text-center","h-20","sm:h-8","xs:h-8","my-2"],["class","mb-4",4,"ngIf"],[1,"relative"],["autoplay","",1,"absolute","top-0","left-0","oval-video"],["video",""],[1,"absolute","top-0","left-0","oval-video"],["canvas",""],[1,"absolute"],["result",""],["toSend",""],[1,"mb-4"],[1,"text-3xl","font-bold"],[1,"text-gray-600"],["fxLayout","column","fxLayoutAlign","center center",1,"id-scanning-error-div"],["src","https://cdn.verifik.co/demo/nocameraenabled.svg","alt","",1,"id-scanning-no-camera-enabled-img"],[1,"mt-4"],["fxLayout","column","fxLayoutAlign","center center",1,"flex","w-full"],["fxLayout","column","fxLayoutAlign","center center",1,"rounded-2xl","end-card","w-1/2","shadow","overflow-hidden","bg-card","error-dialog","p-8","mt-11"],["src","https://cdn.verifik.co/access/warning.svg","class","w-50","alt","",4,"ngIf"],[1,"text-center"],["class","w-full","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",1,"w-full"],["mat-stroked-button","","color","primary",1,"m-4","z-index-2","start-demo-button",3,"click"],["src","https://cdn.verifik.co/access/warning.svg","alt","",1,"w-50"],["mat-stroked-button","",1,"w-11/12","mt-4",3,"click"],["viewBox","0 0 36 36",1,"circular-chart",3,"ngClass"],["d","M18 2.0845\n\t\t\ta 15.9155 15.9155 0 0 1 0 31.831\n\t\t\ta 15.9155 15.9155 0 0 1 0 -31.831",1,"circle-bg"],["d","M18 2.0845\n\t\t\t\ta 15.9155 15.9155 0 0 1 0 31.831\n\t\t\t\ta 15.9155 15.9155 0 0 1 0 -31.831",1,"circle"],["x","18","y","20.35",1,"percentage"]],template:function(i,o){1&i&&(t.YNc(0,xt,2,0,"canvas",0),t.YNc(1,vt,4,3,"div",1),t.YNc(2,bt,3,2,"div",2),t.YNc(3,St,13,14,"div",3)),2&i&&(t.Q6J("ngIf",!o.showError&&o.project),t.xp6(1),t.Q6J("ngIf","optional"===o.projectFlow.onboardingSettings.steps.liveness),t.xp6(1),t.Q6J("ngIf",!o.showError&&o.project),t.xp6(1),t.Q6J("ngIf",o.showError))},dependencies:[w.o9,u.xw,u.Wh,L.oO,p.ez,p.mk,p.O5,A.Is,m.y4,m.Ot,_.ot,_.lW,D.Cv,T.Cq],styles:[".thumbnail[_ngcontent-%COMP%]{width:250px}.end-card[_ngcontent-%COMP%]{max-width:400px!important}.single-chart[_ngcontent-%COMP%]{width:50%;justify-content:space-around}.circular-chart[_ngcontent-%COMP%]{display:block;margin:10px auto;max-width:80%;max-height:250px}.circle-bg[_ngcontent-%COMP%]{fill:none;stroke:#eee;stroke-width:3.8}.circle[_ngcontent-%COMP%]{fill:none;stroke-width:2.8;stroke-linecap:round;animation:_ngcontent-%COMP%_progress 1s ease-out forwards}@keyframes _ngcontent-%COMP%_progress{0%{stroke-dasharray:0 100}}.circular-chart.orange[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke:#ff9f00}.circular-chart.red[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke:#f20707c8}.circular-chart.green[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke:#4cc790}.circular-chart.blue[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke:#3c9ee5}.percentage[_ngcontent-%COMP%]{fill:#666;font-family:sans-serif;font-size:.5em;text-anchor:middle}@media (max-width: 599px){.end-card[_ngcontent-%COMP%]{width:90%!important}}@media (min-width: 600px) and (max-width: 959px){.end-card[_ngcontent-%COMP%]{width:80%!important}}"]})}return n})();function kt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2),t._UZ(2,"img",3),t.TgZ(3,"h1",4),t._uU(4),t.ALo(5,"transloco"),t.qZA(),t._UZ(6,"img",5),t.TgZ(7,"h3",6),t._uU(8),t.qZA(),t.TgZ(9,"div",7)(10,"button",8),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.completeAndRedirect())}),t.TgZ(11,"span"),t._uU(12),t.ALo(13,"transloco"),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.Oqu(t.lcZ(5,12,"signup.end_step.title")),t.xp6(2),t.Q6J("src",e.face.base64,t.LSH),t.xp6(1),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.hij(" ",e.appRegistration.person.name," "),t.xp6(2),t.Udp("background",e.project.branding.buttonColor)("color",e.project.branding.buttonTxtColor),t.xp6(2),t.Oqu(t.lcZ(13,14,"signup.end_step.complete_button"))}}function Rt(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"h3",13),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.AsE("",e.appRegistration.firstName," ",e.appRegistration.lastName,"")}}function Mt(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"h3",13),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.hij(" ",e.appRegistration.fullName," ")}}function Dt(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"h3",13),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.hij(" ",e.appRegistration.fullName," ")}}function Pt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",9),t._UZ(2,"img",10),t.TgZ(3,"h1",11),t._uU(4),t.ALo(5,"transloco"),t.qZA(),t.YNc(6,Rt,3,4,"ng-container",12),t.YNc(7,Mt,3,3,"ng-container",12),t.YNc(8,Dt,3,3,"ng-container",12),t.TgZ(9,"div",7)(10,"button",8),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.completeAndRedirect())}),t.TgZ(11,"span"),t._uU(12),t.ALo(13,"transloco"),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.Oqu(t.lcZ(5,11,"signup.end_step.title")),t.xp6(2),t.Q6J("ngIf",e.appRegistration&&!e.appRegistration.fullName&&e.appRegistration.firstName&&e.appRegistration.fullName),t.xp6(1),t.Q6J("ngIf",e.appRegistration&&e.appRegistration.fullName&&!e.appRegistration.firstName&&!e.appRegistration.fullName),t.xp6(1),t.Q6J("ngIf",e.appRegistration&&e.appRegistration.fullName&&e.appRegistration.firstName&&e.appRegistration.fullName),t.xp6(2),t.Udp("background",e.project.branding.buttonColor)("color",e.project.branding.buttonTxtColor),t.xp6(2),t.Oqu(t.lcZ(13,13,"signup.end_step.complete_button"))}}function Ut(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"h3",13),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.hij(" ",e.appRegistration.documentValidation.OCRExtraction.fullName," ")}}function jt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",9),t._UZ(2,"img",10),t.TgZ(3,"h1",11),t._uU(4),t.ALo(5,"transloco"),t.qZA(),t._UZ(6,"img",5),t.YNc(7,Ut,3,3,"ng-container",12),t.TgZ(8,"div",7)(9,"button",8),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.completeAndRedirect())}),t.TgZ(10,"span"),t._uU(11),t.ALo(12,"transloco"),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.Oqu(t.lcZ(5,10,"signup.end_step.title")),t.xp6(2),t.Q6J("src",e.appRegistration.documentFace.base64,t.LSH),t.xp6(1),t.Q6J("ngIf",e.appRegistration&&e.appRegistration.documentValidation&&e.appRegistration.documentValidation.OCRExtraction),t.xp6(2),t.Udp("background",e.project.branding.buttonColor)("color",e.project.branding.buttonTxtColor),t.xp6(2),t.Oqu(t.lcZ(12,12,"signup.end_step.complete_button"))}}let Yt=(()=>{class n{constructor(e,i,o){this._KYCService=e,this._splashScreenService=i,this._changeDetectorRef=o,this.showError=!1,this.errorContent={message:""},this._initAppRegistrationData()}ngOnInit(){this._requestIdentityImages()}_initAppRegistrationData(){this.appRegistration=this._KYCService.appRegistration,this.project=this._KYCService.currentProject,this.projectFlow=this._KYCService.currentProjectFlow,this.navigation=this._KYCService.getNavigation();const e=this.appRegistration.compareFaceVerification;let i=null;this.appRegistration.biometricValidation&&(i=this.appRegistration.biometricValidation.livenessScore||0),e&&e.result.score<this.projectFlow.onboardingSettings.document.compareMinScore&&(this.appRegistration.status="FAILED"),i&&i<this.projectFlow.onboardingSettings.liveness.livenessMinScore&&(this.appRegistration.status="FAILED")}_requestIdentityImages(){if(this.appRegistration.face?._id)return this.face=this.appRegistration.face,this.face.base64.includes("data:image")||(this.face.base64=`data:image/jpeg;base64,${this.face.base64}`,this._changeDetectorRef.markForCheck()),void(3===this.face.base64.split("data:image/jpeg;base64,").length&&(this.face.base64=this.face.base64.replace("data:image/jpeg;base64,","")));this._KYCService.getIdentityImages({}).subscribe({next:e=>{this._extractFaces(e.data)},error:e=>{},complete:()=>{}})}_extractFaces(e){for(let i=0;i<e.length;i++){const o=e[i];"face"===o.category&&this.appRegistration.face===o._id&&(this.face=o,this.face.base64=`data:image/jpeg;base64,${o.base64}`),3===this.face.base64.split("data:image/jpeg;base64,").length&&(this.face.base64=this.face.base64.replace("data:image/jpeg;base64,",""))}}ngOnDestroy(){}completeAndRedirect(){if(this.loading)return;this.loading=!0;let e={token:null};this._splashScreenService.show(),this._KYCService.syncAppRegistration("end",this.appRegistration.status).subscribe({next:i=>{e=i.data},error:i=>{console.error({exception:i}),this._splashScreenService.hide()},complete:()=>{this._splashScreenService.hide(),this.loading=!1,window.location.href=`${Z.N.verifikProject===this.project._id?`${Z.N.appUrl}/sign-in`:this.projectFlow.redirectUrl}?type=onboarding&token=${e.token}`}})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(b.H),t.Y36(I.j),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["kyc-end"]],standalone:!0,features:[t.jDz],decls:3,vars:3,consts:[["fxLayout","column","fxLayoutAlign","center center","class","flex w-full",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"flex","w-full"],["fxLayout","column","fxLayoutAlign","center center",1,"rounded-2xl","end-card","w-1/2","shadow","overflow-hidden","bg-card","error-dialog","p-4","mt-4"],["src","https://cdn.verifik.co/access/check.svg","alt","",1,"w-16"],[1,"text-center","text-2xl","pt-2","pb-2"],["alt","",1,"mt-4","box-shadow-3px","final-face",3,"src"],[1,"text-center","pt-2"],["fxLayout","column","fxLayoutAlign","center center",1,"w-full"],["mat-raised-button","",1,"w-11/12","mt-4","start-demo-button",3,"click"],["fxLayout","column","fxLayoutAlign","center center",1,"rounded-2xl","end-card","w-1/2","shadow","overflow-hidden","bg-card","error-dialog","p-8","mt-11"],["src","https://cdn.verifik.co/access/check.svg","alt","",1,"w-20"],[1,"text-center","text-3xl","pt-4","pb-2"],[4,"ngIf"],[1,"text-center","pt-4"]],template:function(i,o){1&i&&(t.YNc(0,kt,14,16,"div",0),t.YNc(1,Pt,14,15,"div",0),t.YNc(2,jt,13,14,"div",0)),2&i&&(t.Q6J("ngIf",!o.showError&&o.appRegistration&&o.appRegistration.person),t.xp6(1),t.Q6J("ngIf",!o.showError&&o.appRegistration&&!o.appRegistration.person&&!o.appRegistration.documentFace),t.xp6(1),t.Q6J("ngIf",!o.showError&&o.appRegistration&&!o.appRegistration.person&&o.appRegistration.documentFace))},dependencies:[w.o9,u.xw,u.Wh,p.ez,p.O5,A.Is,m.y4,m.Ot,_.ot,_.lW,D.Cv,T.Cq],styles:[".final-face[_ngcontent-%COMP%]{width:auto!important;height:254px}.end-card[_ngcontent-%COMP%]{max-width:400px!important}@media (max-width: 599px){.end-card[_ngcontent-%COMP%]{width:90%!important}}@media (min-width: 600px) and (max-width: 959px){.end-card[_ngcontent-%COMP%]{width:80%!important}}"]})}return n})();var K=c(2982),Ft=c(4354);const Kt=["maskResult"],Nt=["toSend"];function qt(n,s){if(1&n&&(t.TgZ(0,"div")(1,"div",14),t._uU(2),t.qZA(),t.TgZ(3,"div",15),t._uU(4),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(1),t.Udp("color",e.project?e.project.branding.titleColor:null),t.xp6(1),t.Oqu(e.errorFace.title),t.xp6(1),t.Udp("color",e.project?e.project.branding.txtColor:null),t.xp6(1),t.Oqu(e.errorFace.subtitle)}}function Jt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"webcam",16),t.NdJ("imageCapture",function(o){t.CHM(e);const a=t.oxw(3);return t.KtG(a.proccessImage(o))})("initError",function(o){t.CHM(e);const a=t.oxw(3);return t.KtG(a.cameraError(o))}),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("height",e.camera.dimensions.video.max.height)("width",e.camera.dimensions.video.max.width)("videoOptions",e.camera.configuration)("imageQuality",1)("captureImageData",!0)("allowCameraSwitch",!1)("trigger",e.takePicture$)("mirrorImage",e.demoData.isMobile?"never":"always")}}function Qt(n,s){if(1&n&&(t.TgZ(0,"div",5)(1,"div",6),t.YNc(2,qt,5,6,"div",7),t.qZA(),t.TgZ(3,"div",8),t.YNc(4,Jt,1,8,"webcam",9),t._UZ(5,"canvas",10,11)(7,"canvas",12,13),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.errorFace&&!e.response.isLoading),t.xp6(1),t.Udp("width",e.camera.dimensions.video.width,"px")("height",e.camera.dimensions.video.height,"px"),t.xp6(1),t.Q6J("ngIf",!e.response.base64Image),t.xp6(1),t.Udp("width",e.response.base64Image?e.camera.dimensions.result.width:e.camera.dimensions.video.width,"px")("height",e.response.base64Image?e.camera.dimensions.result.height:e.camera.dimensions.video.height,"px")}}function Vt(n,s){1&n&&(t.TgZ(0,"div",17),t._UZ(1,"img",18),t.TgZ(2,"h1",19),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"p",19),t._uU(6),t.ALo(7,"transloco"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,2,"id_scanning.camera_not_found")),t.xp6(3),t.hij(" ",t.lcZ(7,4,"id_scanning.camera_not_found_description")," "))}function Ht(n,s){if(1&n&&(t.TgZ(0,"div",2),t.YNc(1,Qt,9,10,"div",3),t.YNc(2,Vt,8,6,"div",4),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.camera.isLoading&&e.camera.hasPermissions&&!e.camera.isLowQuality),t.xp6(1),t.Q6J("ngIf",!e.camera.isLoading&&e.camera.isLowQuality)}}function Et(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",25)(1,"button",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.recordLiveness(!0))}),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"transloco"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(4,3,"errors.replace_person_button")," ")}}function zt(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",25)(1,"button",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.retry())}),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"transloco"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(4,3,"id_scanning.retry")," ")}}function Wt(n,s){if(1&n&&(t.TgZ(0,"div",20)(1,"div",21),t._UZ(2,"img",22),t.TgZ(3,"h1",23),t._uU(4),t.ALo(5,"transloco"),t.qZA(),t.YNc(6,Et,5,5,"div",24),t.YNc(7,zt,5,5,"div",24),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,3,"errors."+e.errorContent.message)," "),t.xp6(2),t.Q6J("ngIf","person_already_set"===e.errorContent.message),t.xp6(1),t.Q6J("ngIf","Liveness_score_not_acceptable"===e.errorContent.message)}}let Xt=(()=>{class n{constructor(e,i,o,a,r,d,f){this._dom=e,this._changeDetectorRef=i,this._demoService=o,this._translocoService=a,this._splashScreenService=r,this.renderer=d,this._KYCService=f,this._matDialog=(0,t.f3M)(A.uw),this.aspectRatio=.75,this._unsubscribeAll=new M.x,this.takePicture=new M.x,this.setDefaultFace=()=>{this.face={successPosition:0,minPixels:240,minHeight:600,threshold:.25}},this.setDefaultDirections=()=>{this.direction={left:new Image,right:new Image,up:new Image,down:new Image},this.direction.right.crossOrigin="anonymous",this.direction.up.crossOrigin="anonymous",this.direction.down.crossOrigin="anonymous",this.direction.left.crossOrigin="anonymous",this.direction.left.src="https://cdn.verifik.co/web-sdk/images/left.png",this.direction.right.src="https://cdn.verifik.co/web-sdk/images/right.png",this.direction.up.src="https://cdn.verifik.co/web-sdk/images/up.png",this.direction.down.src="https://cdn.verifik.co/web-sdk/images/down.png"},this.setDefaultAttempts=()=>{this.attempts={current:0,limit:3}},this.setDefaultCamera=()=>{this.camera={hasPermissions:!1,isLoading:!1,isLowQuality:!1,configuration:{frameRate:{ideal:30,max:30},[this.demoData.isMobile?"width":"height"]:{ideal:1080},facingMode:Ft.w.USER},dimensions:{video:{max:{height:Math.ceil(.7*window.innerHeight),width:Math.ceil(.9*window.innerWidth)}}}}},this.setDefaultResponse=()=>{this.response={isLoading:!1,isFailed:!1}},this.setDefaultInterval=()=>{this.interval={}},this.setVideoNgxCameraData=()=>{const l=this._dom.nativeElement.querySelector("video");l&&(l.addEventListener("loadeddata",()=>{this.setVideoDimensions(l),this.drawOvalCenterAndMask(),this.interval.detectFace||(this.interval.detectFace=setInterval(()=>{this.response.base64Image&&(this.interval.detectFace=clearInterval(this.interval.detectFace)),this.takePicture.next()},this.demoData.time))}),this.interval.checkNgxVideo=clearInterval(this.interval.checkNgxVideo),this.setVideoDimensions(l),this.drawOvalCenterAndMask(),this.loading({isLoading:!1,start:!0}))},this.getCenterAndRadius=(l,h)=>{const g={center:{x:h/2,y:l/2},radius:{x:0,y:0},margin:{y:.05*l,x:0}};return g.margin.x=.8*g.margin.y,g.radius.y=.42*l,g.radius.x=g.radius.y*this.aspectRatio,2*g.radius.x>=h&&(g.radius.x=.48*h,g.radius.y=g.radius.x/this.aspectRatio),g},this.loading=({isLoading:l=!0,start:h,result:g})=>{const v=h?"camera":g&&"response";v&&(this[v].isLoading=l),this._splashScreenService[l?"show":"hide"]()},this.setImageOnCanvas=(l,h,g,v)=>{l.width=v.width,l.height=v.height,l.style.marginLeft=`${v.offsetX||0}px`,l.style.marginTop=`${v.offsetY||0}px`;const S=l.getContext("2d");S.clearRect(0,0,g.width,g.height),S.drawImage(h,g.offsetX,g.offsetY,g.width,g.height,0,0,v.width,v.height)},this.continueWithLiveness=this._initAppRegistrationData(),this.continueWithLiveness&&(this.demoData=this._demoService.getDemoData(),this.startDefaultValues(),this.setDefaultAttempts(),this.setDefaultDirections(),this.setDefaultFace(),this.setDefaultInterval(),this.renderer.listen("window","resize",()=>{this.interval.checkNgxVideo=setInterval(()=>{this.setMaxVideoDimensions(),this.setVideoNgxCameraData()},this.demoData.time)}),this.showError=!1,this.errorContent={message:""},this.projectFlow=this.project.currentProjectFlow,this._changeDetectorRef.markForCheck())}ngOnInit(){var e=this;this.continueWithLiveness&&(this.startDefaultValues(),this.camera.hasPermissions=!0,this.loading({start:!0}),this._demoService.faceapi$.subscribe(function(){var i=(0,x.Z)(function*(o){e.camera.isLoading=!o,e.setMaxVideoDimensions(),o&&(e.interval.checkNgxVideo=setInterval(()=>{e.setVideoNgxCameraData()},100))});return function(o){return i.apply(this,arguments)}}()))}_initAppRegistrationData(){return this.demoData=this._demoService.getDemoData(),this.appRegistration=this._KYCService.appRegistration,this.project=this._KYCService.currentProject,this.projectFlow=this._KYCService.currentProjectFlow,this.navigation=this._KYCService.getNavigation(),!0}get takePicture$(){return this.takePicture.asObservable()}startDefaultValues(){this.setDefaultResponse(),this.setDefaultCamera(),this.setMaxVideoDimensions()}setVideoDimensions(e){this.camera.dimensions.video.height=e.clientHeight,this.camera.dimensions.video.width=e.clientWidth,this.camera.dimensions.result={height:0,width:0,offsetX:0,offsetY:0},this.setResultDimensions("result",e.clientHeight,e.clientWidth),this.face.video=this.getCenterAndRadius(e.clientHeight,e.clientWidth);const i=this.maskResultCanvasRef.nativeElement;i.style.marginLeft="0px",i.style.marginTop="0px"}setMaxVideoDimensions(){this.camera.dimensions.video={max:{height:Math.ceil(.7*window.innerHeight),width:Math.ceil(.9*window.innerWidth)}},this.camera.dimensions.result=void 0}drawOvalCenterAndMask(){const e=this.camera.dimensions.video,i=this.maskResultCanvasRef.nativeElement;i.height=e.height,i.width=e.width;const o=i.getContext("2d");o.clearRect(0,0,e.width,e.height),o.fillStyle="rgba(255, 255, 255, 0.75)",o.fillRect(0,0,e.width,e.height),o.globalCompositeOperation="destination-out";const{center:a,radius:r}=this.face.video;o.fillStyle="rgba(255, 255, 255, 1)",o.beginPath(),o.ellipse(a.x,a.y,r.x,r.y,0,0,2*Math.PI),o.fill(),o.closePath(),o.globalCompositeOperation="source-over"}setResultDimensions(e,i,o){const{center:a,radius:r}=this.face[e]=this.getCenterAndRadius(i,o);this.camera.dimensions[e].height=i,this.camera.dimensions[e].offsetY=0,this.camera.dimensions[e].width=Math.min(2.8*r.x,o),this.camera.dimensions[e].offsetX=a.x-this.camera.dimensions[e].width/2}cameraError(e){e.mediaStreamError&&"NotAllowedError"===e.mediaStreamError.name&&(this.loading({isLoading:!1,start:!0}),this.camera.hasPermissions=!1)}proccessImage(e){var i=this;if(!this.interval.detectFace||this.response.base64Image)return;const o=new Image;o.src=e.imageAsDataUrl,o.onload=(0,x.Z)(function*(){if(o.height<i.face.minHeight)i.camera.isLowQuality=!0;else try{i.camera.dimensions.real={height:0,width:0,offsetX:0,offsetY:0},i.setResultDimensions("real",o.height,o.width),i.face.real=i.getCenterAndRadius(o.height,o.width);const a=yield C.Qr(o,new C.d7({minConfidence:.2})).withFaceLandmarks(),r=i.maskResultCanvasRef.nativeElement.getContext("2d");if(a.length>0&&(i.lastFace=a[0],i.errorFace=null,i.drawOvalCenterAndMask(),i.isFaceCentered(i.lastFace.landmarks.getNose()[3]),i.isFaceClose(i.lastFace.landmarks),i.drawStatusOval(r,!i.errorFace?.title),i.errorFace?i.face.successPosition=0:++i.face.successPosition,!i.errorFace&&i.face.successPosition>2))return i.face.successPosition=0,void i.takePictureLiveness(o);i._changeDetectorRef.markForCheck()}catch(a){alert(a.message)}})}takePictureLiveness(e){this.setImageOnCanvas(this.maskResultCanvasRef.nativeElement,e,this.camera.dimensions.real,this.camera.dimensions.result);const o=this.ToSendCanvasRef.nativeElement;this.setImageOnCanvas(o,e,this.camera.dimensions.real,this.camera.dimensions.real),this.response.base64Image=o.toDataURL("image/jpeg"),this.recordLiveness()}drawStatusOval(e,i){const{center:o,radius:a}=this.face.video;e.beginPath(),e.ellipse(o.x,o.y,a.x,a.y,0,0,2*Math.PI),e.lineWidth=5,e.strokeStyle=i?"green":"red",e.stroke(),e.closePath(),i||(this.errorFace.canvas?.includes("\u2191")&&e.drawImage(this.direction.up,o.x-20,o.y-a.y+10,40,40),this.errorFace.canvas?.includes("\u2193")&&e.drawImage(this.direction.down,o.x-20,o.y+a.y-50,40,40),this.errorFace.canvas?.includes("\u2192")&&e.drawImage(this.direction.right,o.x+a.x-50,o.y-20,40,40),this.errorFace.canvas?.includes("\u2190")&&e.drawImage(this.direction.left,o.x-a.x+10,o.y-20,40,40)),this._changeDetectorRef.markForCheck()}inRange(e,i,o){return e>=i&&e<=o}isFaceCentered(e){const i=e.x,o=e.y,{center:a,margin:r}=this.face.real,d=this.inRange(i,a.x-r.x,a.x+r.x),f=this.inRange(o,a.y,a.y+2.5*r.y);if(!d||!f){let h="";d||(h+=i<a.x-r.x?"\u2192":"\u2190"),f||(h+=o<a.y?"\u2193":"\u2191"),this.errorFace={title:this._translocoService.translate("liveness.center_yor_face"),subtitle:this._translocoService.translate("liveness.center_your_face_subtitle"),canvas:h}}}isFaceClose(e){const i=this.camera.dimensions.real;(e.imageHeight*e.imageWidth/Math.floor(i.height*(i.width-i.offsetX))<this.face.threshold||e.imageHeight<this.face.minPixels||e.imageWidth<this.face.minPixels)&&(this.errorFace={title:this._translocoService.translate("liveness.get_closer"),subtitle:this._translocoService.translate("liveness.get_closer_subtitle")})}recordLiveness(e){if(this.response.isLoading)return;this.loading({result:!0});const i={image:this.response.base64Image.replace(/^data:.*;base64,/,""),os:this.demoData.OS,force:!!e};this._KYCService.createBiometricValidation(i).subscribe({next:o=>{this.appRegistration.person=o.data.person,this.appRegistration.biometricValidation=o.data.biometricValidation},error:o=>{this.showError=!0,this.errorContent=o.error,this._splashScreenService.hide(),this.loading({isLoading:!1,result:!0})},complete:()=>{this._splashScreenService.hide(),this.loading({isLoading:!1,result:!0}),this._KYCService.navigateTo("next")}})}retryLivenessModal(e){const i={title:this._translocoService.translate("liveness.liveness_failed"),message:this._translocoService.translate("liveness.liveness_error_message",{error:e}),icon:{show:!0,name:"heroicons_outline:exclamation-triangle",color:"warn"},actions:{confirm:{show:!0,label:this._translocoService.translate("confirm"),color:"primary"},cancel:{show:!0,label:this._translocoService.translate("cancel")}},dismissible:!1};this._matDialog.open(F.u,{autoFocus:!1,disableClose:!0,panelClass:"fuse-confirmation-dialog-panel",data:i}).afterClosed().subscribe(o=>{if("confirmed"===o)return this.setDefaultInterval(),this.setDefaultFace(),this.ngOnInit();this._demoService.restart()})}continueRedirection(){if(this.showError&&"person_not_found"===this.errorContent.message)return void window.location.reload();const e=localStorage.getItem("accessToken");window.location.href=`${Z.N.verifikProject===this.project._id?`${Z.N.appUrl}/sign-in`:this.projectFlow.redirectUrl}?type=login&token=${e}`}ngOnDestroy(){this._unsubscribeAll.next(null)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(O.e),t.Y36(m.Vn),t.Y36(I.j),t.Y36(t.Qsj),t.Y36(b.H))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["kyc-liveness-ios"]],viewQuery:function(i,o){if(1&i&&(t.Gf(Kt,5),t.Gf(Nt,5)),2&i){let a;t.iGM(a=t.CRH())&&(o.maskResultCanvasRef=a.first),t.iGM(a=t.CRH())&&(o.ToSendCanvasRef=a.first)}},standalone:!0,features:[t.jDz],decls:2,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center","class","min-h-[60vh] justify-center p-4 sm:p-1 xs:p-1 w-full",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","flex w-full",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"min-h-[60vh]","justify-center","p-4","sm:p-1","xs:p-1","w-full"],["fxLayout","column","fxLayoutAlign","center center","class","justify-center w-full",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","id-scanning-error-div",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"justify-center","w-full"],["fxLayout","column","fxLayoutAlign","center center",1,"justify-center","text-center","h-20","sm:h-8","xs:h-8","my-2"],[4,"ngIf"],[1,"relative"],[3,"height","width","videoOptions","imageQuality","captureImageData","allowCameraSwitch","trigger","mirrorImage","imageCapture","initError",4,"ngIf"],[1,"absolute","top-0","left-0"],["maskResult",""],["hidden","true"],["toSend",""],[1,"text-3xl","font-bold"],[1,"text-gray-600"],[3,"height","width","videoOptions","imageQuality","captureImageData","allowCameraSwitch","trigger","mirrorImage","imageCapture","initError"],["fxLayout","column","fxLayoutAlign","center center",1,"id-scanning-error-div"],["src","https://cdn.verifik.co/demo/nocameraenabled.svg","alt","",1,"id-scanning-no-camera-enabled-img"],[1,"mt-4"],["fxLayout","column","fxLayoutAlign","center center",1,"flex","w-full"],["fxLayout","column","fxLayoutAlign","center center",1,"rounded-2xl","end-card","w-1/2","shadow","overflow-hidden","bg-card","error-dialog","p-8","mt-11"],["src","https://cdn.verifik.co/access/warning.svg","alt","",1,"w-50"],[1,"text-center"],["fxLayout","column","fxLayoutAlign","center center","class","w-full",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"w-full"],["mat-stroked-button","",1,"w-11/12","mt-4",3,"click"]],template:function(i,o){1&i&&(t.YNc(0,Ht,3,2,"div",0),t.YNc(1,Wt,8,5,"div",1)),2&i&&(t.Q6J("ngIf",!o.showError&&o.project),t.xp6(1),t.Q6J("ngIf",o.showError&&o.project))},dependencies:[w.o9,u.xw,u.Wh,p.ez,p.O5,A.Is,m.y4,m.Ot,_.ot,_.lW,D.Cv,T.Cq,K.Tm,K.i3],styles:[".thumbnail[_ngcontent-%COMP%]{width:250px}.end-card[_ngcontent-%COMP%]{max-width:400px!important}@media (max-width: 599px){.end-card[_ngcontent-%COMP%]{width:90%!important}}@media (min-width: 600px) and (max-width: 959px){.end-card[_ngcontent-%COMP%]{width:80%!important}}"]})}return n})();var Bt=c(1094),Gt=c(692),N=c(9773),q=c(617),$t=c(3372),J=c(9236);const te=["cardIdFace"];function ee(n,s){if(1&n&&t._UZ(0,"img",18),2&n){const e=t.oxw(2);t.Q6J("src",e.base64Image,t.LSH)}}function ne(n,s){1&n&&t._UZ(0,"mat-icon",19)}const ie=function(n){return{"text-xs":n}};function oe(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("fileDropped",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.onFileDropped(o))}),t.TgZ(1,"input",7,8),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.fileBrowseHandler(o.target.files))}),t.qZA(),t.TgZ(3,"div",9)(4,"div",10)(5,"div",11),t.YNc(6,ee,1,1,"img",12),t.YNc(7,ne,1,0,"mat-icon",13),t.qZA()(),t.TgZ(8,"div",14)(9,"div",15),t._uU(10),t.ALo(11,"transloco"),t.qZA(),t.TgZ(12,"div",16),t._uU(13),t.ALo(14,"transloco"),t.qZA()()(),t.TgZ(15,"label",17),t._uU(16),t.ALo(17,"transloco"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngIf",e.base64Image),t.xp6(1),t.Q6J("ngIf",!e.base64Image),t.xp6(3),t.hij(" ",t.lcZ(11,10,"step_two.drag_n_drop_title")," "),t.xp6(3),t.hij(" ",t.lcZ(14,12,"step_two.drag_n_drop_description")," "),t.xp6(2),t.Udp("background",e.project.branding.buttonColor)("color",e.project.branding.buttonTxtColor),t.Q6J("ngClass",t.VKq(16,ie,e.phoneMode)),t.xp6(1),t.Oqu(t.lcZ(17,14,"step_two.upload_button"))}}function ae(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.cancelUpload())}),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"button",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.continue())}),t._uU(5),t.ALo(6,"transloco"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,7,"step_two.cancel_button")," "),t.xp6(2),t.Udp("background",e.project.branding.buttonColor)("color",e.project.branding.buttonTxtColor),t.Q6J("disabled",!e.base64Image),t.xp6(1),t.hij(" ",t.lcZ(6,9,"step_two.continue_button")," ")}}function se(n,s){if(1&n&&t._UZ(0,"kyc-document-errors-display",23),2&n){const e=t.oxw();t.Q6J("errorContent",e.errorContent)("attempts",e.attempts)("attemptsLimit",e.attemptsLimit)("dialogRef",e.dialogRef)}}let re=(()=>{class n{constructor(e,i,o,a,r){this._demoService=e,this.dialogRef=i,this._splashScreenService=o,this.mediaService=a,this._KYCService=r,this._unsubscribeAll=new M.x,this.demoData=this._demoService.getDemoData(),this.appRegistration=this._KYCService.appRegistration,this.project=this._KYCService.currentProject,this.projectFlow=this._KYCService.currentProjectFlow,this.attempts=this.appRegistration?.failedDocumentValidations?.length||0,this.attemptsLimit=this.projectFlow.onboardingSettings.document.maxAttempts,this.errorContent={message:""},this.mediaService.onMediaChange$.pipe((0,N.R)(this._unsubscribeAll)).subscribe(d=>{this.phoneMode=!d.matchingAliases.includes("lg")&&!d.matchingAliases.includes("md")&&!d.matchingAliases.includes("sm")}),this.attempts>=this.attemptsLimit&&(this.errorResult=!0,this.errorContent={message:"attempts_limit_reached"})}ngOnDestroy(){this._unsubscribeAll.complete()}onFileDropped(e){this.prepareFilesList(e)}fileBrowseHandler(e){this.prepareFilesList(e)}prepareFilesList(e){var i=this;const o=new FileReader;this._splashScreenService.show(),o.onload=a=>{const r=new Image;r.src=a.target.result,r.onload=(0,x.Z)(function*(){try{const d=yield i.detectFace(r);if(i.demoData.loading=!1,i._splashScreenService.hide(),!d)return i.errorResult=!0,void(i.errorContent={message:"face_not_found"});i.base64Image=a.target.result;const f=i._demoService.getBiggestFace(d);i.faceIdCard=i._demoService.cutFaceIdCard(r,f,i.cardIdFaceRef.nativeElement)}catch(d){alert(d.message)}})},o.readAsDataURL(e[0])}detectFace(e){var i=this;return(0,x.Z)(function*(){try{const o=yield C.Qr(e,new C.d7({minConfidence:.2})).withFaceLandmarks();if(o.length){const a=o.map(r=>r.detection.box);for(let r of a){const{faceImage:f,backgroundImage:l}=i.extractRegions(e,r,10),v=(i._demoService.detectEdges(f),i._demoService.analyzeBlurNoise(f),i._demoService.extractBackgroundImage(e,r)),S=i.compareColorConsistency(f,l);i._demoService.checkLightingConsistency(f,v),console.log({colorConsistency:S})}return a}return}catch(o){alert(o.message)}})()}compareColorConsistency(e,i){const o=this.calculateAverageColor(e),a=this.calculateAverageColor(i);return Math.sqrt(Math.pow(o.r-a.r,2)+Math.pow(o.g-a.g,2)+Math.pow(o.b-a.b,2))<50}calculateAverageColor(e){const a=e.getContext("2d").getImageData(0,0,e.width,e.height).data;let r=0,d=0,f=0;const l=a.length/4;for(let h=0;h<a.length;h+=4)r+=a[h],d+=a[h+1],f+=a[h+2];return{r:r/l,g:d/l,b:f/l}}extractRegions(e,i,o){const a=document.createElement("canvas"),r=a.getContext("2d"),d=document.createElement("canvas"),f=d.getContext("2d"),l=Math.max(0,i.x-o),h=Math.max(0,i.y-o),g=Math.min(e.width,i.width+2*o),v=Math.min(e.height,i.height+2*o);return a.width=g,a.height=v,r.drawImage(e,l,h,g,v,0,0,g,v),d.width=e.width,d.height=e.height,f.drawImage(e,0,0),f.clearRect(l,h,g,v),{faceImage:a,backgroundImage:d}}extractFaceImage(e,i){const o=document.createElement("canvas"),a=o.getContext("2d");return o.width=i.width,o.height=i.height,a.drawImage(e,i.x,i.y,i.width,i.height,0,0,i.width,i.height),o}cancelUpload(){this.dialogRef.close()}tryAgain(){this.errorResult=!1,this.base64Image=null,this.attempts++}restartDemo(){this._demoService.moveToStep(1),this.dialogRef.close()}continue(){if(this.demoData.loading)return;this.demoData.loading=!0,this._splashScreenService.show();const e={image:this.base64Image.replace(/^data:image\/.*;base64,/,""),documentFace:this.faceIdCard,force:!!this.appRegistration?.forceUpload,inputMethod:"FILE_UPLOAD"};this._KYCService.createDocumentValidation(e).subscribe({next:o=>{this.responseData=o.data,this.dialogRef.close(o.data)},error:o=>{this.errorContent=o.error,this.errorResult=!0,this._splashScreenService.hide()},complete:()=>{this.demoData.loading=!1,this._splashScreenService.hide()}})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(O.e),t.Y36(A.so),t.Y36(I.j),t.Y36(J.T),t.Y36(b.H))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["kyc-document-uploader"]],viewQuery:function(i,o){if(1&i&&t.Gf(te,5),2&i){let a;t.iGM(a=t.CRH())&&(o.cardIdFaceRef=a.first)}},standalone:!0,features:[t.jDz],decls:6,vars:3,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"w-full"],["hidden","true"],["cardIdFace",""],["class","white-background csv-container w-full sm:w-3/5 mt-10","appDnd","",3,"fileDropped",4,"ngIf"],["class","w-full mt-5","fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],[3,"errorContent","attempts","attemptsLimit","dialogRef",4,"ngIf"],["appDnd","",1,"white-background","csv-container","w-full","sm:w-3/5","mt-10",3,"fileDropped"],["type","file","id","fileDropRef","accept","image/*",3,"change"],["fileDropRef",""],[1,"grid","grid-cols-4"],[1,"flex","items-center","col-span-4","sm:col-span-1","justify-center"],[1,"flex","items-center","rounded-lg","justify-center","p-4","text-primary-700","dark:bg-primary","dark:text-on-primary",2,"min-width","7rem !important","max-width","7rem !important"],["alt","Imagen seleccionada",3,"src",4,"ngIf"],["svgIcon","feather:upload","style","transform: scale(2); filter: invert(14%) sepia(100%) saturate(4147%) hue-rotate(228deg) brightness(89%) contrast(114%)",4,"ngIf"],[1,"flex","flex-col","col-span-4","sm:col-span-3","text-start"],[1,"text-sm","mt-4"],[1,"text-xs","text-secondary","mb-6"],["for","fileDropRef",1,"mx-2",3,"ngClass"],["alt","Imagen seleccionada",3,"src"],["svgIcon","feather:upload",2,"transform","scale(2)","filter","invert(14%) sepia(100%) saturate(4147%) hue-rotate(228deg) brightness(89%) contrast(114%)"],["fxLayout","row","fxLayoutAlign","center center",1,"w-full","mt-5"],["mat-stroked-button","","color","warn",1,"mx-2",3,"click"],["mat-raised-button","",1,"mx-2",3,"disabled","click"],[3,"errorContent","attempts","attemptsLimit","dialogRef"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"canvas",1,2),t.YNc(3,oe,18,18,"div",3),t.YNc(4,ae,7,11,"div",4),t.YNc(5,se,1,4,"kyc-document-errors-display",5),t.qZA()),2&i&&(t.xp6(3),t.Q6J("ngIf",!o.errorResult),t.xp6(1),t.Q6J("ngIf",!o.errorResult),t.xp6(1),t.Q6J("ngIf",o.errorResult))},dependencies:[p.ez,p.mk,p.O5,w.o9,u.xw,u.Wh,L.oO,m.y4,m.Ot,q.Ps,q.Hw,_.ot,_.lW,$t.M],styles:[".id-scanning-error-div[_ngcontent-%COMP%]{width:auto;background:white;height:600px;padding:16px}.id-scanning-error-div[_ngcontent-%COMP%]   .id-scanning-failed-document-img[_ngcontent-%COMP%]{width:30%}.id-scanning-error-div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#0036e7;font-size:24px;font-weight:800;text-align:center}.id-scanning-error-div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#01236da6;font-size:16px;font-weight:300;text-align:center}.menu-section[_ngcontent-%COMP%]{width:50%;min-height:300px;padding-bottom:100px;padding-left:32px;padding-right:16px}.white-background[_ngcontent-%COMP%]{width:50%;background-color:#fff;padding-bottom:100px;padding-left:32px;padding-right:16px}.csv-container[_ngcontent-%COMP%]{height:auto;padding:2rem;text-align:center;border:dashed 3px #979797;border-radius:.5rem;position:relative;margin:0 auto}.csv-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}.csv-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;width:auto;height:auto;border-radius:21.5px;background-color:#0036e7;padding:8px}.csv-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#38424c}.btn-cancel[_ngcontent-%COMP%]{color:#fff;width:auto;height:auto;border-radius:21.5px;background-color:#0036e7;padding:8px;z-index:10}"]})}return n})();function ce(n,s){1&n&&(t.TgZ(0,"div",11),t._UZ(1,"img",12),t.TgZ(2,"h4"),t._uU(3),t.ALo(4,"transloco"),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("src","https://cdn.verifik.co/assets/biometric-services/Passport.svg",t.LSH),t.xp6(2),t.hij(" ",t.lcZ(4,2,"signup.document.passport")," "))}function de(n,s){1&n&&(t.TgZ(0,"div",11),t._UZ(1,"img",13),t.TgZ(2,"h4"),t._uU(3),t.ALo(4,"transloco"),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("src","https://cdn.verifik.co/assets/biometric-services/driverLicense.svg",t.LSH),t.xp6(2),t.hij(" ",t.lcZ(4,2,"signup.document.driver_license")," "))}function le(n,s){1&n&&(t.TgZ(0,"div",11),t._UZ(1,"img",13),t.TgZ(2,"h4"),t._uU(3),t.ALo(4,"transloco"),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("src","https://cdn.verifik.co/assets/biometric-services/governmentID.svg",t.LSH),t.xp6(2),t.hij(" ",t.lcZ(4,2,"signup.document.government_ID")," "))}function pe(n,s){if(1&n&&(t.TgZ(0,"div",6)(1,"div",7)(2,"h2",8),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"div",9),t.YNc(6,ce,5,4,"div",10),t.YNc(7,de,5,4,"div",10),t.YNc(8,le,5,4,"div",10),t.qZA()()()),2&n){const e=t.oxw();t.xp6(2),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.hij(" ",t.lcZ(4,6,"signup.document.allowed_documents")," "),t.xp6(3),t.Q6J("ngIf",e.projectFlow.onboardingSettings.document.usePassport),t.xp6(1),t.Q6J("ngIf",e.projectFlow.onboardingSettings.document.useLicense),t.xp6(1),t.Q6J("ngIf",e.projectFlow.onboardingSettings.document.useGovernmentID)}}function ge(n,s){if(1&n&&(t.TgZ(0,"p",25)(1,"span",26),t._uU(2),t.qZA(),t.TgZ(3,"span",27),t._uU(4),t.ALo(5,"transloco"),t.qZA()()),2&n){const e=s.$implicit,i=s.index;t.xp6(2),t.hij(" ",i+1," "),t.xp6(2),t.hij(" ",t.lcZ(5,2,"signup.document."+e)," ")}}function me(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",17)(1,"div",18)(2,"h2",19),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"div",20),t._UZ(6,"img",21),t.TgZ(7,"div",22),t.YNc(8,ge,6,4,"p",23),t.qZA()(),t.TgZ(9,"button",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.openUploadFile())}),t._uU(10),t.ALo(11,"transloco"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.hij(" ",t.lcZ(4,9,"step_two.file_description")," "),t.xp6(5),t.Q6J("ngForOf",e.uploadSteps),t.xp6(1),t.Udp("background",e.project.branding.buttonColor)("color",e.project.branding.buttonTxtColor),t.xp6(1),t.hij(" ",t.lcZ(11,11,"step_two.file")," ")}}function ue(n,s){if(1&n&&(t.TgZ(0,"p",33)(1,"span",26),t._uU(2),t.qZA(),t.TgZ(3,"span",27),t._uU(4),t.ALo(5,"transloco"),t.qZA()()),2&n){const e=s.$implicit,i=s.index;t.xp6(2),t.hij(" ",i+1," "),t.xp6(2),t.hij(" ",t.lcZ(5,2,"signup.document."+e)," ")}}function he(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",28)(1,"div",18)(2,"h2",19),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"div",20),t._UZ(6,"img",29),t.TgZ(7,"div",30),t.YNc(8,ue,6,4,"p",31),t.qZA()(),t.TgZ(9,"button",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.openCamera())}),t._uU(10),t.ALo(11,"transloco"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.hij(" ",t.lcZ(4,9,"step_two.manual_description")," "),t.xp6(5),t.Q6J("ngForOf",e.scanSteps),t.xp6(1),t.Udp("background",e.project.branding.buttonColor)("color",e.project.branding.buttonTxtColor),t.xp6(1),t.hij(" ",t.lcZ(11,11,"step_two.manual")," ")}}function fe(n,s){if(1&n&&(t.TgZ(0,"div",14),t.YNc(1,me,12,13,"div",15),t.YNc(2,he,12,13,"div",16),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.documentSettings.uploadDocumentAllowed),t.xp6(1),t.Q6J("ngIf",e.documentSettings.scanDocumentAllowed)}}function _e(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",34)(1,"div",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.continue())}),t._uU(2),t.ALo(3,"transloco"),t.qZA()()}2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"skip")))}function xe(n,s){1&n&&t._UZ(0,"div",36)}function ve(n,s){1&n&&t._UZ(0,"id-scanning-ios",37)}function Ce(n,s){1&n&&t._UZ(0,"id-scanning",37)}let we=(()=>{class n{constructor(e,i,o){this._demoService=e,this.dialog=i,this._KYCService=o,this.demoData=this._demoService.getDemoData(),this.appRegistration=this._KYCService.appRegistration,this.project=this._KYCService.currentProject,this.projectFlow=this._KYCService.currentProjectFlow,this.documentSettings=this.projectFlow.onboardingSettings.document,this.navigation=this._KYCService.getNavigation(),this.selectOption="",this._initSteps()}_initSteps(){this.uploadSteps=["open_your_files_or_drop_it","select_allowed_document","confirm_upload"],this.scanSteps=["get_your_document_in_place","open_your_camera","place_your_document_properly","confirm_upload"]}ngOnInit(){this._demoService.getAddress()}openUploadFile(){this.dialog.open(re,{width:"900px"}).afterClosed().subscribe(i=>{if(i){if(i.documentValidation)return this.appRegistration.documentValidation=i.documentValidation,void this._KYCService.navigateTo("next");this.appRegistration.failedDocumentValidations.push(1)}})}openCamera(){(this.appRegistration?.failedDocumentValidations?.length||0)>=(this.projectFlow.onboardingSettings.document?.maxAttempts||3)?this.openUploadFile():this.selectOption="idscan"}continue(){"optional"!==this.projectFlow.onboardingSettings.steps.document||this._KYCService.navigateTo("liveness")}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(O.e),t.Y36(A.uw),t.Y36(b.H))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["kyc-document"]],standalone:!0,features:[t.jDz],decls:7,vars:6,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"w-full"],["class","w-full","fxLayout","row","fxLayout.xs","column","fxLayoutAlign","center center","fxLayoutAlign.xs","center center",4,"ngIf"],["class","id-details-body w-full","fxLayout","row","fxLayout.xs","column","fxLayout.sm","column","fxLayoutAlign","center center","fxLayoutAlign.xs","center center","fxLayoutAlign.sm","center center",4,"ngIf"],["class","w-full flex flex-col justify-end items-end p-8",4,"ngIf"],["class","white-background","fxHide.xs","true",4,"ngIf"],["fxLayoutAlign","center center","class","w-full h-full mb-6",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","center center","fxLayoutAlign.xs","center center",1,"w-full"],["ngClass.xs","w-full","ngClass.sm","w-3/4","fxLayout","column","fxLayoutAlign","start center","fxLayoutAlign.xs","start center",1,"w-50p","mt-4","mb-4"],[1,"pt-0"],["fxLayout","row","fxLayoutAlign","center center",1,"w-full"],["class","kyc-documents-allowed-card","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"kyc-documents-allowed-card"],["alt","",1,"kyc-passport-img",3,"src"],["alt","",1,"kyc-gov-id-img",3,"src"],["fxLayout","row","fxLayout.xs","column","fxLayout.sm","column","fxLayoutAlign","center center","fxLayoutAlign.xs","center center","fxLayoutAlign.sm","center center",1,"id-details-body","w-full"],["class","w-50p upload-file-section","fxLayout","column","fxLayoutAlign","start center","fxLayoutAlign.xs","start center","ngClass.sm","w-full",4,"ngIf"],["class","w-50p scan-file-section","fxLayout","column","fxLayoutAlign","start center","fxLayoutAlign.xs","start center","ngClass.sm","w-full",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start center","fxLayoutAlign.xs","start center","ngClass.sm","w-full",1,"w-50p","upload-file-section"],["fxLayout","column","fxLayoutAlign","space-between center",1,"kyc-document-instruction-card"],[1,"title-margin"],["fxLayout","row","fxLayoutAlign","start start","fxLayout.xs","column","fxLayoutAlign.xs","center center",1,"w-full"],["src","https://cdn.verifik.co/assets/kyc/upload.gif","alt","",1,""],["fxLayout","column","fxLayoutAlign","center start","fxLayoutAlign.xs","center start",1,"w-full"],["fxLayout","row","fxLayoutAlign","start center","class","m-1",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"mb-5",3,"click"],["fxLayout","row","fxLayoutAlign","start center",1,"m-1"],[1,"instruction-number"],[1,"w-3/4"],["fxLayout","column","fxLayoutAlign","start center","fxLayoutAlign.xs","start center","ngClass.sm","w-full",1,"w-50p","scan-file-section"],["src","https://cdn.verifik.co/assets/kyc/scanOCR.gif"],["fxLayout","column","fxLayoutAlign","start start",1,"w-full"],["fxLayout","row","fxLayoutAlign","start center","class","m-1 w-full",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"mb-5","mt-5",3,"click"],["fxLayout","row","fxLayoutAlign","start center",1,"m-1","w-full"],[1,"w-full","flex","flex-col","justify-end","items-end","p-8"],[1,"text-underline","cursor-pointer",3,"click"],["fxHide.xs","true",1,"white-background"],["fxLayoutAlign","center center",1,"w-full","h-full","mb-6"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0),t.YNc(1,pe,9,8,"div",1),t.YNc(2,fe,3,2,"div",2),t.YNc(3,_e,4,3,"div",3),t.YNc(4,xe,1,0,"div",4),t.YNc(5,ve,1,0,"id-scanning-ios",5),t.YNc(6,Ce,1,0,"id-scanning",5),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngIf",!o.selectOption),t.xp6(1),t.Q6J("ngIf",!o.selectOption),t.xp6(1),t.Q6J("ngIf","optional"===o.projectFlow.onboardingSettings.steps.document),t.xp6(1),t.Q6J("ngIf",!o.selectOption),t.xp6(1),t.Q6J("ngIf","idscan"===o.selectOption&&"IOS"==o.demoData.OS),t.xp6(1),t.Q6J("ngIf","idscan"===o.selectOption&&"IOS"!=o.demoData.OS))},dependencies:[w.o9,u.xw,u.Wh,L.b8,L.oO,R.p9,_.ot,_.lW,Bt.s,Gt.s,p.ez,p.sg,p.O5,m.y4,m.Ot],styles:[".white-background[_ngcontent-%COMP%]{width:50%;background-color:#fff;position:absolute;z-index:-1;top:0;left:50%;height:100%}.scan-img[_ngcontent-%COMP%]{width:400px;padding:2rem}.upload-img[_ngcontent-%COMP%]{width:450px;padding:2rem}.title-margin[_ngcontent-%COMP%]{margin-top:1.25rem;margin-bottom:1.25rem}h2[_ngcontent-%COMP%]{text-align:center;padding-left:4px;padding-right:4px;font-size:22px!important}.id-details-body[_ngcontent-%COMP%]{margin-bottom:100px}.kyc-documents-allowed-card[_ngcontent-%COMP%]{z-index:2;width:33%;max-width:500px;min-height:150px;background:white;border:1px solid rgba(204,204,204,.3960784314);box-shadow:2px 2px 2px 2px #00000005;text-align:center;border-radius:22px;margin:2px}.kyc-documents-allowed-card[_ngcontent-%COMP%]   .kyc-gov-id-img[_ngcontent-%COMP%]{width:55%;height:95px}.kyc-documents-allowed-card[_ngcontent-%COMP%]   .kyc-passport-img[_ngcontent-%COMP%]{width:35%;height:95px}.kyc-document-instruction-card[_ngcontent-%COMP%]{z-index:2;width:92%;margin-top:24px;min-width:350px;min-height:400px;background:white;border:1px solid rgba(204,204,204,.3960784314);box-shadow:3px 3px 3px 3px #0000000d;border-radius:25px}.kyc-document-instruction-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:4px;width:40%}.kyc-document-instruction-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:12px}.kyc-document-instruction-card[_ngcontent-%COMP%]   .instruction-number[_ngcontent-%COMP%]{text-align:center;padding-top:4px;margin-right:8px;width:32px;height:32px;border-radius:50%;background-color:#dce1ff}@media (max-height: 599px){.title-margin[_ngcontent-%COMP%]{margin-top:.25rem;margin-bottom:.25rem}.upload-img[_ngcontent-%COMP%]{width:330px!important;padding:1rem}.scan-img[_ngcontent-%COMP%]{width:285px!important;margin-bottom:.25rem;padding:1rem}}@media (min-height: 600px) and (max-height: 959px){.title-margin[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}.upload-img[_ngcontent-%COMP%]{width:370px!important;padding:1rem}.scan-img[_ngcontent-%COMP%]{width:325px!important;padding:1rem}}@media (max-width: 599px){.kyc-document-instruction-card[_ngcontent-%COMP%]{width:80%!important}.upload-file-section[_ngcontent-%COMP%]{width:95%!important;min-height:300px}.upload-file-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;text-align:center}.scan-file-section[_ngcontent-%COMP%]{width:95%!important;min-height:700px}.scan-file-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;text-align:center;padding:8px;height:65px!important}}@media (min-width: 600px) and (max-width: 959px){.kyc-document-instruction-card[_ngcontent-%COMP%]{width:80%!important;min-height:300px}.upload-file-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .scan-file-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;text-align:center;padding:8px}}"],data:{animation:k.L}})}return n})();var Q=c(7398),V=c(6306),H=c(2096),ye=c(9315);function be(n,s){if(1&n&&(t.TgZ(0,"div",20)(1,"h3"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()()),2&n){const e=s.$implicit,i=t.oxw(3);t.xp6(1),t.Udp("color",i.project.branding.txtColor),t.xp6(1),t.Oqu(t.lcZ(3,4,"general_information."+e.key)),t.xp6(3),t.Oqu(e.value)}}function Le(n,s){if(1&n&&(t.TgZ(0,"div",7),t.YNc(1,be,6,6,"div",15),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.demoData.generalInformation)}}function Ae(n,s){if(1&n&&(t.TgZ(0,"h1",21),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&n){const e=t.oxw(2);t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.hij(" ",t.lcZ(2,3,"extracted_information.pro")," ")}}function Ze(n,s){if(1&n&&(t.TgZ(0,"h1",21),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&n){const e=t.oxw(2);t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.hij(" ",t.lcZ(2,3,"extracted_information.prompt")," ")}}function Oe(n,s){if(1&n&&(t.TgZ(0,"h1",5),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&n){const e=t.oxw(2);t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.hij(" ",t.lcZ(2,3,"extracted_information.studio")," ")}}function Ie(n,s){if(1&n&&(t.TgZ(0,"div",20)(1,"h3"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()()),2&n){const e=s.$implicit,i=t.oxw(2);t.xp6(1),t.Udp("color",i.project.branding.txtColor),t.xp6(1),t.Oqu(t.lcZ(3,4,"extracted_information."+e.key)),t.xp6(3),t.Oqu(e.value)}}function Se(n,s){if(1&n&&(t.TgZ(0,"div",20)(1,"h3"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()()),2&n){const e=s.$implicit,i=t.oxw(3);t.xp6(1),t.Udp("color",i.project.branding.txtColor),t.xp6(1),t.Oqu(t.lcZ(3,4,"user_location."+e.key)),t.xp6(3),t.Oqu(e.value)}}function Te(n,s){if(1&n&&(t.TgZ(0,"div",11)(1,"h1",5),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"div",14),t.YNc(5,Se,6,6,"div",15),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.Oqu(t.lcZ(3,4,"step_three.user_location")),t.xp6(3),t.Q6J("ngForOf",e.demoData.location)}}const ke=function(){return{"box-shadow-3px":!0}};function Re(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1",5),t._uU(4),t.ALo(5,"transloco"),t.qZA(),t.TgZ(6,"div",6)(7,"h3",7),t._uU(8),t.ALo(9,"transloco"),t.qZA(),t._UZ(10,"img",8),t.qZA()()(),t.TgZ(11,"div",9)(12,"h1",5),t._uU(13),t.ALo(14,"transloco"),t.qZA(),t.YNc(15,Le,2,1,"div",10),t.TgZ(16,"div",11),t.YNc(17,Ae,3,5,"h1",12),t.YNc(18,Ze,3,5,"h1",12),t.YNc(19,Oe,3,5,"h1",13),t.TgZ(20,"div",14),t.YNc(21,Ie,6,6,"div",15),t.qZA()(),t.YNc(22,Te,6,6,"div",16),t.TgZ(23,"div",17)(24,"button",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.scanAgain())}),t._uU(25),t.ALo(26,"transloco"),t.qZA(),t.TgZ(27,"button",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.continue())}),t._uU(28),t.ALo(29,"transloco"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.Oqu(t.lcZ(5,27,"step_three.document_scanned")),t.xp6(3),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.Oqu(t.lcZ(9,29,"step_three.front_side")),t.xp6(2),t.Q6J("src",e.documentFrontSideUrl,t.LSH),t.xp6(1),t.Q6J("ngClass.xs",t.DdM(37,ke)),t.xp6(1),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.Oqu(t.lcZ(14,31,"step_three.general_information")),t.xp6(2),t.Q6J("ngIf",e.hasGeneralInformation()),t.xp6(2),t.Q6J("ngIf","SCAN_PRO"===e.appRegistration.documentValidation.validationMethod),t.xp6(1),t.Q6J("ngIf","SCAN_PROMPT"===e.appRegistration.documentValidation.validationMethod),t.xp6(1),t.Q6J("ngIf","SCAN_STUDIO"===e.appRegistration.documentValidation.validationMethod),t.xp6(2),t.Q6J("ngForOf",e.extractedData),t.xp6(1),t.Q6J("ngIf",e.hasLocation()),t.xp6(2),t.Udp("color",e.project.branding.txtColor),t.Q6J("disabled",!e.completed),t.xp6(1),t.hij(" ",t.lcZ(26,33,"step_three.scan_again")," "),t.xp6(2),t.Udp("background",e.project.branding.buttonColor)("color",e.project.branding.buttonTxtColor),t.Q6J("disabled",!e.completed),t.xp6(1),t.hij(" ",t.lcZ(29,35,"continue")," ")}}let Me=(()=>{class n{constructor(e,i,o,a){this._demoService=e,this.dialog=i,this._KYCService=o,this._changeDetectorRef=a,this.completed=!1,this.demoData=this._demoService.getDemoData(),this.appRegistration=this._KYCService.appRegistration,this.project=this._KYCService.currentProject,this.projectFlow=this._KYCService.currentProjectFlow,this.navigation=this._KYCService.getNavigation(),this.selectOption="",this.extractedData=[],this.sendDocumentValidationAndNameValidation()}ngOnInit(){this._demoService.getAddress(),this._setExtractedData()}_setExtractedData(){for(const e in this.appRegistration.documentValidation.OCRExtraction){Object.prototype.hasOwnProperty.call(this.appRegistration.documentValidation.OCRExtraction,e);const i=this.appRegistration.documentValidation.OCRExtraction[e];null==i||""===i||this.extractedData.push({key:e,value:i})}this.documentFrontSideUrl=this.appRegistration.documentValidation.url}hasGeneralInformation(){return!!this.generalInfoLoaded||(this.demoData.generalInformation.length?(this.generalInfoLoaded=!0,this.generalInfoLoaded):void 0)}hasLocation(){var e=this;return(0,x.Z)(function*(){return!!(e.locationLoaded&&e.demoData.lat&&e.demoData.lng)||!(e.locationLoading||!e.demoData.lat||!e.demoData.lng)&&(!!e.demoData.location.length||(e.locationLoading=!0,void((yield e._demoService.getAddress())&&(e.locationLoaded=!0))))})()}continue(){this._KYCService.navigateTo("skip"!==this.projectFlow.onboardingSettings.steps.liveness?"next":"end")}scanAgain(){this.appRegistration.documentValidation=null,this.appRegistration.forceUpload=!0,this._KYCService.navigateTo("document")}sendDocumentValidationAndNameValidation(){const e=this.projectFlow.onboardingSettings.document,i=[];if(e.verifyNames&&i.push(this._KYCService.updateDocumentValidationNameValidation({_id:this.appRegistration.documentValidation._id,force:!0}).pipe((0,Q.U)(a=>({status:"fulfilled",value:a})),(0,V.K)(a=>(0,H.of)({status:"rejected",reason:a})))),e.verifyCriminalHistory&&i.push(this._KYCService.updateInformationValidationWithCriminalRecords({_id:this.appRegistration.informationValidation._id,force:Z.N.production}).pipe((0,Q.U)(a=>({status:"fulfilled",value:a})),(0,V.K)(a=>(0,H.of)({status:"rejected",reason:a})))),0===i.length)return this.completed=!0,void this._changeDetectorRef.markForCheck();(0,ye.D)(i).subscribe(o=>{o.forEach(a=>{"fulfilled"===a.status?console.log("Observable fulfilled:",{result:a}):console.error("Observable rejected:",{result:a})}),this.completed=!0,this._changeDetectorRef.markForCheck()},o=>{console.error("Unexpected error occurred:",o)})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(O.e),t.Y36(A.uw),t.Y36(b.H),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["kyc-document-review"]],standalone:!0,features:[t.jDz],decls:2,vars:1,consts:[["class","id-details-body","fxLayout","row","fxLayout.xs","column","fxLayoutAlign","start start","fxLayoutAlign.xs","center center",4,"ngIf"],["fxHide.xs","true",1,"white-background"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","start start","fxLayoutAlign.xs","center center",1,"id-details-body"],["fxLayout","column","fxLayoutAlign","start end","fxLayoutAlign.xs","start center",1,"id-details-first-section"],["fxLayout","column","fxLayoutAlign","start center"],[1,"mt-4"],["fxLayout","column","fxLayoutAlign","start center",1,"id-details-front-side-doc"],[1,"mt-8"],["alt","",1,"mt-4","box-shadow-3px",3,"src"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutAlign.xs","center center",1,"id-details-second-section",3,"ngClass.xs"],["class","mt-8",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutAlign.xs","center center",1,"w-full"],["class","mt-4 underline",3,"color",4,"ngIf"],["class","mt-4",3,"color",4,"ngIf"],[1,"mt-8","w-full"],["fxLayout","column","fxLayoutAlign","start start","class","id-details-item",4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutAlign.xs","center center","class","w-full",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start start",1,"w-full"],["mat-stroked-button","","color","primary",1,"m-4","z-index-2","start-demo-button",3,"disabled","click"],["mat-raised-button","","color","primary",1,"m-4","z-index-2","start-demo-button",3,"disabled","click"],["fxLayout","column","fxLayoutAlign","start start",1,"id-details-item"],[1,"mt-4","underline"]],template:function(i,o){1&i&&(t.YNc(0,Re,30,38,"div",0),t._UZ(1,"div",1)),2&i&&t.Q6J("ngIf",o.appRegistration.documentValidation)},dependencies:[w.o9,u.xw,u.Wh,L.b8,L.oO,R.p9,_.ot,_.lW,p.ez,p.sg,p.O5,m.y4,m.Ot],styles:[".id-details-second-section[_ngcontent-%COMP%]{width:50%;padding-bottom:100px;padding-left:32px;padding-right:16px}.white-background[_ngcontent-%COMP%]{width:50%;background-color:#fff;position:absolute;z-index:-1;top:0;left:50%;height:100%}.id-details-first-section[_ngcontent-%COMP%]{width:50%;min-height:1200px}.id-details-body[_ngcontent-%COMP%]{padding-top:2px;padding-bottom:2px;width:100%;min-height:800px}.id-details-body[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px;font-weight:800;color:#0036e777}.id-details-body[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;color:#000;font-weight:600}.id-details-front-side-doc[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%}.id-details-item[_ngcontent-%COMP%]{min-height:65px;width:70%;padding:10px;border-top:1px solid rgba(128,128,128,.148);border-bottom:1px solid rgba(128,128,128,.148)}.id-details-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:800}.id-details-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:400}@media (max-width: 599px){.id-details-first-section[_ngcontent-%COMP%]{width:95%;min-height:400px}.id-details-front-side-doc[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%}.id-details-second-section[_ngcontent-%COMP%]{width:95%;margin-top:10px;background-color:#ffffffbd;padding-bottom:70px;padding-left:10px;padding-right:10px}.id-details-item[_ngcontent-%COMP%]{min-height:65px;width:95%;padding:10px;border-top:1px solid rgba(128,128,128,.148);border-bottom:1px solid rgba(128,128,128,.148)}.id-details-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:800}.id-details-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.start-demo-button[_ngcontent-%COMP%]{width:45%}}@media (min-width: 600px) and (max-width: 959px){.id-details-first-section[_ngcontent-%COMP%]{width:50%;min-height:400px}.id-details-front-side-doc[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%}.id-details-second-section[_ngcontent-%COMP%]{width:50%;margin-top:0;background-color:#ffffffbd;padding-bottom:70px;padding-left:10px;padding-right:10px}.id-details-item[_ngcontent-%COMP%]{min-height:65px;width:95%;padding:10px;border-top:1px solid rgba(128,128,128,.148);border-bottom:1px solid rgba(128,128,128,.148)}.id-details-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:800}.id-details-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.start-demo-button[_ngcontent-%COMP%]{width:40%}}@media (min-width: 960px) and (max-width: 1279px){.id-details-first-section[_ngcontent-%COMP%]{width:95%;min-height:400px}.id-details-front-side-doc[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45%!important}.id-details-second-section[_ngcontent-%COMP%]{width:50%;padding-bottom:70px;padding-left:24px;padding-right:24px}.id-details-item[_ngcontent-%COMP%]{min-height:65px;width:95%;padding:10px;border-top:1px solid rgba(128,128,128,.148);border-bottom:1px solid rgba(128,128,128,.148)}.id-details-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:800}.id-details-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.start-demo-button[_ngcontent-%COMP%]{width:35%}}@media (min-width: 1280px) and (max-width: 1919px){.start-demo-button[_ngcontent-%COMP%]{width:33%}}@media (min-width: 1920px){.start-demo-button[_ngcontent-%COMP%]{width:25%}}"],data:{animation:k.L}})}return n})();function De(n,s){if(1&n&&t._UZ(0,"img",20),2&n){const e=t.oxw(3);t.Q6J("src",e.face.base64,t.LSH)}}function Pe(n,s){if(1&n&&t._UZ(0,"img",20),2&n){const e=t.oxw(3);t.Q6J("src",e.documentFace.base64,t.LSH)}}function Ue(n,s){if(1&n&&(t.TgZ(0,"div",17)(1,"h1",6),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"div",18),t.YNc(5,De,1,1,"img",19),t.YNc(6,Pe,1,1,"img",19),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.Oqu(t.lcZ(3,5,"results.selfie")),t.xp6(3),t.Q6J("ngIf",e.face),t.xp6(1),t.Q6J("ngIf",e.documentFace)}}function je(n,s){if(1&n&&(t.TgZ(0,"div",17)(1,"h1",6),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"div",18)(5,"h3",21),t._uU(6),t.ALo(7,"transloco"),t.qZA(),t._UZ(8,"img",20),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.Oqu(t.lcZ(3,7,"step_three.document_scanned")),t.xp6(3),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.Oqu(t.lcZ(7,9,"step_three.front_side")),t.xp6(2),t.Q6J("src",e.documentFrontSideUrl,t.LSH)}}function Ye(n,s){if(1&n&&(t.TgZ(0,"div",22)(1,"h3"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()()),2&n){const e=s.$implicit,i=t.oxw(2);t.xp6(1),t.Udp("color",i.project.branding.txtColor),t.xp6(1),t.Oqu(t.lcZ(3,4,e.key)),t.xp6(3),t.Oqu(e.value)}}function Fe(n,s){if(1&n&&(t.TgZ(0,"div",22)(1,"h3"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()()),2&n){const e=s.$implicit,i=t.oxw(3);t.xp6(1),t.Udp("color",i.project.branding.txtColor),t.xp6(1),t.Oqu(t.lcZ(3,4,"general_information."+e.key)),t.xp6(3),t.Oqu(e.value)}}function Ke(n,s){if(1&n&&(t.TgZ(0,"div",21),t.YNc(1,Fe,6,6,"div",8),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.demoData.generalInformation)}}const E=function(n,s){return{green:n,red:s}};function Ne(n,s){if(1&n&&(t.TgZ(0,"div",23)(1,"h3"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.O4$(),t.TgZ(4,"svg",24),t._UZ(5,"path",25)(6,"path",26),t.TgZ(7,"text",27),t._uU(8),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(1),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.Oqu(t.lcZ(3,6,"results.liveness_score")),t.xp6(2),t.Q6J("ngClass",t.WLB(8,E,e.appRegistration.biometricValidation.livenessScore>=e.compareMinScore,e.appRegistration.biometricValidation.livenessScore<e.livenessMinScore)),t.xp6(2),t.uIk("stroke-dasharray",100*e.appRegistration.biometricValidation.livenessScore+", 100"),t.xp6(2),t.hij("",100*e.appRegistration.biometricValidation.livenessScore,"%")}}function qe(n,s){if(1&n&&(t.TgZ(0,"div",28)(1,"h3"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.O4$(),t.TgZ(4,"svg",24),t._UZ(5,"path",29)(6,"path",30),t.TgZ(7,"text",27),t._uU(8),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(1),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.Oqu(t.lcZ(3,6,"results.match_score")),t.xp6(2),t.Q6J("ngClass",t.WLB(8,E,e.appRegistration.compareFaceVerification.result.score>=e.compareMinScore,e.appRegistration.compareFaceVerification.result.score<e.compareMinScore)),t.xp6(2),t.uIk("stroke-dasharray",100*e.appRegistration.compareFaceVerification.result.score+", 100"),t.xp6(2),t.hij("",100*e.appRegistration.compareFaceVerification.result.score,"%")}}function Je(n,s){if(1&n&&(t.TgZ(0,"h1",6),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&n){const e=t.oxw(3);t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.hij(" ",t.lcZ(2,3,"extracted_information.pro")," ")}}function Qe(n,s){if(1&n&&(t.TgZ(0,"h1",6),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&n){const e=t.oxw(3);t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.hij(" ",t.lcZ(2,3,"extracted_information.prompt")," ")}}function Ve(n,s){if(1&n&&(t.TgZ(0,"h1",6),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&n){const e=t.oxw(3);t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.hij(" ",t.lcZ(2,3,"extracted_information.studio")," ")}}function He(n,s){if(1&n&&(t.TgZ(0,"div",22)(1,"h3"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()()),2&n){const e=s.$implicit,i=t.oxw(3);t.xp6(1),t.Udp("color",i.project.branding.txtColor),t.xp6(1),t.Oqu(t.lcZ(3,4,"extracted_information."+e.key)),t.xp6(3),t.Oqu(e.value)}}function Ee(n,s){if(1&n&&(t.TgZ(0,"div",31),t.YNc(1,Je,3,5,"h1",32),t.YNc(2,Qe,3,5,"h1",32),t.YNc(3,Ve,3,5,"h1",32),t.TgZ(4,"div",7),t.YNc(5,He,6,6,"div",8),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf","SCAN_PRO"===e.appRegistration.documentValidation.validationMethod),t.xp6(1),t.Q6J("ngIf","SCAN_PROMPT"===e.appRegistration.documentValidation.validationMethod),t.xp6(1),t.Q6J("ngIf","SCAN_STUDIO"===e.appRegistration.documentValidation.validationMethod),t.xp6(2),t.Q6J("ngForOf",e.extractedData)}}function ze(n,s){if(1&n&&(t.TgZ(0,"div",22)(1,"h3"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.qZA()()),2&n){const e=s.$implicit,i=t.oxw(3);t.xp6(1),t.Udp("color",i.project.branding.txtColor),t.xp6(1),t.Oqu(t.lcZ(3,4,"user_location."+e.key)),t.xp6(3),t.Oqu(e.value)}}function We(n,s){if(1&n&&(t.TgZ(0,"div",31)(1,"h1",6),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"div",7),t.YNc(5,ze,6,6,"div",8),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.Oqu(t.lcZ(3,4,"step_three.user_location")),t.xp6(3),t.Q6J("ngForOf",e.demoData.location)}}const Xe=function(){return{"box-shadow-3px":!0}};function Be(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3),t.YNc(2,Ue,7,7,"div",4),t.YNc(3,je,9,11,"div",4),t.qZA(),t.TgZ(4,"div",5)(5,"h1",6),t._uU(6),t.ALo(7,"transloco"),t.qZA(),t.TgZ(8,"div",7),t.YNc(9,Ye,6,6,"div",8),t.qZA(),t.TgZ(10,"h1",6),t._uU(11),t.ALo(12,"transloco"),t.qZA(),t.YNc(13,Ke,2,1,"div",9),t.TgZ(14,"div",10),t.YNc(15,Ne,9,11,"div",11),t.YNc(16,qe,9,11,"div",12),t.qZA(),t.YNc(17,Ee,6,4,"div",13),t.YNc(18,We,6,6,"div",13),t.TgZ(19,"div",14)(20,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.doLivenessAgain())}),t._uU(21),t.ALo(22,"transloco"),t.qZA(),t.TgZ(23,"button",16),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.continue())}),t._uU(24),t.ALo(25,"transloco"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.face||e.documentFace),t.xp6(1),t.Q6J("ngIf",e.appRegistration.documentValidation),t.xp6(1),t.Q6J("ngClass.xs",t.DdM(31,Xe)),t.xp6(1),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.Oqu(t.lcZ(7,23,"signup.basic_information.title")),t.xp6(3),t.Q6J("ngForOf",e.basicInformation),t.xp6(1),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.Oqu(t.lcZ(12,25,"step_three.general_information")),t.xp6(2),t.Q6J("ngIf",e.hasGeneralInformation()),t.xp6(2),t.Q6J("ngIf",e.appRegistration.biometricValidation&&e.appRegistration.biometricValidation._id),t.xp6(1),t.Q6J("ngIf",e.appRegistration.compareFaceVerification&&e.appRegistration.compareFaceVerification.result),t.xp6(1),t.Q6J("ngIf",e.appRegistration.documentValidation),t.xp6(1),t.Q6J("ngIf",e.hasLocation()),t.xp6(2),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(22,27,"restart")," "),t.xp6(2),t.Udp("background",e.project.branding.buttonColor)("color",e.project.branding.buttonTxtColor),t.xp6(1),t.hij(" ",t.lcZ(25,29,"continue")," ")}}let Ge=(()=>{class n{constructor(e,i,o,a){this._demoService=e,this._translocoService=i,this._KYCService=o,this._changeDetectorRef=a,this.demoData=this._demoService.getDemoData(),this.appRegistration=this._KYCService.appRegistration,this.project=this._KYCService.currentProject,this.projectFlow=this._KYCService.currentProjectFlow,this.compareMinScore=this.projectFlow.onboardingSettings.document.compareMinScore,this.livenessMinScore=this.projectFlow.onboardingSettings.liveness.livenessMinScore,this.navigation=this._KYCService.getNavigation(),this.selectOption="",this.extractedData=[]}ngOnInit(){this._demoService.getAddress(),this._extractBasicInformation(),this._setExtractedData(),this._requestIdentityImages()}_extractBasicInformation(){this.appRegistration.informationValidation?._id&&(this.basicInformation=[],this.appRegistration.informationValidation.fullName?this.basicInformation.push({key:"extracted_information.fullName",value:this.appRegistration.informationValidation.fullName}):(this.basicInformation.push({key:"extracted_information.firstName",value:this.appRegistration.informationValidation.firstName}),this.basicInformation.push({key:"extracted_information.lastName",value:this.appRegistration.informationValidation.lastName})),this.appRegistration.emailValidation?._id&&this.basicInformation.push({key:"login.email",value:this.appRegistration.emailValidation.email}),this.appRegistration.phoneValidation?._id&&this.basicInformation.push({key:"login.phone",value:`${this.appRegistration.phoneValidation.countryCode} ${this.appRegistration.phoneValidation.phone}`}),this.appRegistration.informationValidation?.company&&this.basicInformation.push({key:"signup.company",value:`${this.appRegistration.informationValidation.company}`}),this.appRegistration.informationValidation?.role&&this.basicInformation.push({key:"signup.role",value:this._translocoService.translate(`signup.roles.${this.appRegistration.informationValidation.role}`)}))}_setExtractedData(){if(this.appRegistration.documentValidation?.OCRExtraction){for(const e in this.appRegistration.documentValidation.OCRExtraction){Object.prototype.hasOwnProperty.call(this.appRegistration.documentValidation.OCRExtraction,e);const i=this.appRegistration.documentValidation.OCRExtraction[e];null==i||""===i||this.extractedData.push({key:e,value:i})}this.documentFrontSideUrl=this.appRegistration.documentValidation.url}}_requestIdentityImages(){const e=[];if(this.appRegistration.face&&e.push(this.appRegistration.face),this.appRegistration.documentFace&&e.push(this.appRegistration.documentFace),e.length)return this._extractFaces(e),void this._compareFaces();this._KYCService.getIdentityImages({}).subscribe({next:i=>{this._extractFaces(i.data),this._compareFaces()},error:i=>{console.error({exception:i})},complete:()=>{}})}_extractFaces(e){for(let i=0;i<e.length;i++){const o=e[i];("face"===o.category||this.appRegistration.face?._id===o._id)&&(this.face=o,this.face.base64=`data:image/jpeg;base64,${o.base64}`,3===this.face.base64.split("data:image/jpeg;base64,").length&&(this.face.base64=o.base64.replace("data:image/jpeg;base64,","")),this.appRegistration.face=this.face),("documentFace"===o.category||this.appRegistration.documentFace?._id===o._id)&&(this.documentFace=o,this.appRegistration.documentFace=this.documentFace),this._changeDetectorRef.markForCheck()}}_compareFaces(){this.appRegistration.compareFaceVerification||!this.appRegistration.documentValidation||this._KYCService.compareFaces().subscribe({next:e=>{this.appRegistration.compareFaceVerification=e.data.compareFaceVerification,console.info("Verifik: comparison completed")},error:e=>{},complete:()=>{}})}hasGeneralInformation(){return!!this.generalInfoLoaded||(this.demoData.generalInformation.length?(this.generalInfoLoaded=!0,this.generalInfoLoaded):void 0)}hasLocation(){var e=this;return(0,x.Z)(function*(){return!!(e.locationLoaded&&e.demoData.lat&&e.demoData.lng)||!(e.locationLoading||!e.demoData.lat||!e.demoData.lng)&&(!!e.demoData.location.length||(e.locationLoading=!0,void((yield e._demoService.getAddress())&&(e.locationLoaded=!0))))})()}continue(){this._KYCService.navigateTo("next")}doLivenessAgain(){this._KYCService.restartKYC().subscribe({next:e=>{this.appRegistration.biometricValidation=null,this.appRegistration.person=null,this.appRegistration.documentValidation=null},error:e=>{console.error({exception:e})},complete:()=>{this._KYCService.navigateTo("document")}})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(O.e),t.Y36(m.Vn),t.Y36(b.H),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["kyc-document-liveness-review"]],standalone:!0,features:[t.jDz],decls:2,vars:1,consts:[["class","id-details-body","fxLayout","row","fxLayout.xs","column","fxLayoutAlign","start start","fxLayoutAlign.xs","center center",4,"ngIf"],["fxHide.xs","true",1,"white-background"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","start start","fxLayoutAlign.xs","center center",1,"id-details-body"],["fxLayout","column","fxLayoutAlign","start end","fxLayoutAlign.xs","start center",1,"id-details-first-section"],["fxLayout","column","fxLayoutAlign","start center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutAlign.xs","center center",1,"id-details-second-section",3,"ngClass.xs"],[1,"mt-4"],[1,"mt-8","w-full"],["fxLayout","column","fxLayoutAlign","start start","class","id-details-item",4,"ngFor","ngForOf"],["class","mt-8",4,"ngIf"],[1,"flex-wrapper","w-full","mt-6"],["class","single-chart mr-4","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["class","single-chart","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutAlign.xs","center center","class","w-full",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start start",1,"w-full"],["mat-stroked-button","","color","primary",1,"m-4","z-index-2","start-demo-button",3,"click"],["mat-raised-button","","color","primary",1,"m-4","z-index-2","start-demo-button",3,"click"],["fxLayout","column","fxLayoutAlign","start center"],["fxLayout","column","fxLayoutAlign","start center",1,"id-details-front-side-doc"],["alt","","class","mt-4 box-shadow-3px",3,"src",4,"ngIf"],["alt","",1,"mt-4","box-shadow-3px",3,"src"],[1,"mt-8"],["fxLayout","column","fxLayoutAlign","start start",1,"id-details-item"],["fxLayout","column","fxLayoutAlign","center center",1,"single-chart","mr-4"],["viewBox","0 0 36 36",1,"circular-chart",3,"ngClass"],["d","M18 2.0845\n\t\t\t\ta 15.9155 15.9155 0 0 1 0 31.831\n\t\t\t\ta 15.9155 15.9155 0 0 1 0 -31.831",1,"circle-bg"],["d","M18 2.0845\n\t\t\t\t\ta 15.9155 15.9155 0 0 1 0 31.831\n\t\t\t\t\ta 15.9155 15.9155 0 0 1 0 -31.831",1,"circle"],["x","18","y","20.35",1,"percentage"],["fxLayout","column","fxLayoutAlign","center center",1,"single-chart"],["d","M18 2.0845\n\t\t\t\t\ta 15.9155 15.9155 0 0 1 0 31.831\n\t\t\t\t\ta 15.9155 15.9155 0 0 1 0 -31.831",1,"circle-bg"],["d","M18 2.0845\n\t\t\t\t\t\ta 15.9155 15.9155 0 0 1 0 31.831\n\t\t\t\t\t\ta 15.9155 15.9155 0 0 1 0 -31.831",1,"circle"],["fxLayout","column","fxLayoutAlign","start start","fxLayoutAlign.xs","center center",1,"w-full"],["class","mt-4",3,"color",4,"ngIf"]],template:function(i,o){1&i&&(t.YNc(0,Be,26,32,"div",0),t._UZ(1,"div",1)),2&i&&t.Q6J("ngIf",o.appRegistration)},dependencies:[w.o9,u.xw,u.Wh,L.b8,L.oO,R.p9,_.ot,_.lW,p.ez,p.mk,p.sg,p.O5,m.y4,m.Ot],styles:[".id-details-second-section[_ngcontent-%COMP%]{width:50%;padding-bottom:100px;padding-left:32px;padding-right:16px}.white-background[_ngcontent-%COMP%]{width:50%;background-color:#fff;position:absolute;z-index:-1;top:0;left:50%;height:100%}.id-details-first-section[_ngcontent-%COMP%]{width:50%;min-height:1200px}.id-details-body[_ngcontent-%COMP%]{padding-top:2px;padding-bottom:2px;width:100%;min-height:800px}.id-details-body[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px;font-weight:800;color:#0036e777}.id-details-body[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;color:#000;font-weight:600}.id-details-front-side-doc[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%}.id-details-item[_ngcontent-%COMP%]{min-height:65px;width:70%;padding:10px;border-top:1px solid rgba(128,128,128,.148);border-bottom:1px solid rgba(128,128,128,.148)}.id-details-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:800}.id-details-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.flex-wrapper[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}.single-chart[_ngcontent-%COMP%]{width:50%;justify-content:space-around}.circular-chart[_ngcontent-%COMP%]{display:block;margin:10px auto;max-width:80%;max-height:250px}.circle-bg[_ngcontent-%COMP%]{fill:none;stroke:#eee;stroke-width:3.8}.circle[_ngcontent-%COMP%]{fill:none;stroke-width:2.8;stroke-linecap:round;animation:_ngcontent-%COMP%_progress 1s ease-out forwards}@keyframes _ngcontent-%COMP%_progress{0%{stroke-dasharray:0 100}}.circular-chart.orange[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke:#ff9f00}.circular-chart.red[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke:#f20707c8}.circular-chart.green[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke:#4cc790}.circular-chart.blue[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke:#3c9ee5}.percentage[_ngcontent-%COMP%]{fill:#666;font-family:sans-serif;font-size:.5em;text-anchor:middle}@media (max-width: 599px){.id-details-first-section[_ngcontent-%COMP%]{width:95%;min-height:400px}.id-details-front-side-doc[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%}.id-details-second-section[_ngcontent-%COMP%]{width:95%;margin-top:30px;background-color:#ffffffbd;padding-bottom:70px;padding-left:10px;padding-right:10px}.id-details-item[_ngcontent-%COMP%]{min-height:65px;width:95%;padding:10px;border-top:1px solid rgba(128,128,128,.148);border-bottom:1px solid rgba(128,128,128,.148)}.id-details-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:800}.id-details-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.start-demo-button[_ngcontent-%COMP%]{width:45%}}@media (min-width: 600px) and (max-width: 959px){.id-details-first-section[_ngcontent-%COMP%]{width:50%;min-height:400px}.id-details-front-side-doc[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%}.id-details-second-section[_ngcontent-%COMP%]{width:50%;background-color:#ffffffbd;padding-bottom:70px;padding-left:10px;padding-right:10px}.id-details-item[_ngcontent-%COMP%]{min-height:65px;width:95%;padding:10px;border-top:1px solid rgba(128,128,128,.148);border-bottom:1px solid rgba(128,128,128,.148)}.id-details-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:800}.id-details-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.start-demo-button[_ngcontent-%COMP%]{width:40%}h3[_ngcontent-%COMP%]{font-size:12px!important}}@media (min-width: 960px) and (max-width: 1279px){.id-details-first-section[_ngcontent-%COMP%]{width:95%;min-height:400px}.id-details-front-side-doc[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45%!important}.id-details-second-section[_ngcontent-%COMP%]{width:50%;padding-bottom:70px;padding-left:24px;padding-right:24px}.id-details-item[_ngcontent-%COMP%]{min-height:65px;width:95%;padding:10px;border-top:1px solid rgba(128,128,128,.148);border-bottom:1px solid rgba(128,128,128,.148)}.id-details-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:800}.id-details-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.start-demo-button[_ngcontent-%COMP%]{width:35%}}@media (min-width: 1280px) and (max-width: 1919px){.start-demo-button[_ngcontent-%COMP%]{width:33%}}@media (min-width: 1920px){.start-demo-button[_ngcontent-%COMP%]{width:25%}}"],data:{animation:k.L}})}return n})();const $e=function(n){return{"disabled-background":n}},tn=function(n){return{"font-bold":n}};function en(n,s){if(1&n&&(t.TgZ(0,"div",4)(1,"span",5),t._uU(2),t.qZA(),t.TgZ(3,"span",6),t._uU(4),t.ALo(5,"transloco"),t.qZA()()),2&n){const e=s.$implicit,i=s.index,o=t.oxw(2);t.xp6(1),t.Udp("background",o.project.branding.buttonColor)("color",o.project.branding.buttonTxtColor),t.Q6J("ngClass",t.VKq(12,$e,o.navigation.currentStep!==e.code)),t.xp6(1),t.hij(" ",i+1,""),t.xp6(1),t.Udp("color",o.project.branding.txtColor),t.Q6J("ngClass",t.VKq(14,tn,o.navigation.currentStep===e.code)),t.xp6(1),t.hij("",t.lcZ(5,10,"header."+e.code)," ")}}function nn(n,s){if(1&n&&(t.TgZ(0,"div",1)(1,"div",2),t.YNc(2,en,6,16,"div",3),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.navigation.displayableSteps)}}function on(n,s){if(1&n&&t._UZ(0,"div",13),2&n){const e=t.oxw(3);t.Udp("background",e.project.branding.buttonColor)}}function an(n,s){1&n&&t._UZ(0,"div",13)}function sn(n,s){if(1&n&&(t.ynx(0),t.YNc(1,on,1,2,"div",11),t.YNc(2,an,1,0,"div",12),t.BQk()),2&n){const e=s.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.navigation.currentStep===e.code),t.xp6(1),t.Q6J("ngIf",i.navigation.currentStep!==e.code)}}function rn(n,s){if(1&n&&(t.TgZ(0,"div",1)(1,"div",7)(2,"div",8),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"div",9),t.YNc(6,sn,3,2,"ng-container",10),t.qZA()()()),2&n){const e=t.oxw();t.xp6(2),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(4,4,"header."+e.navigation.currentStep)," "),t.xp6(3),t.Q6J("ngForOf",e.navigation.displayableSteps)}}let cn=(()=>{class n{constructor(e,i,o,a){this._KYCService=e,this._splashScreenService=i,this._changeDetectorRef=o,this._fuseMediaWatcherService=a,this._unsubscribeAll=new M.x,this._ObserveDomMedia(),this.appRegistration=this._KYCService.appRegistration,this.project=this._KYCService.currentProject,this.projectFlow=this._KYCService.currentProjectFlow,this.navigation=this._KYCService.getNavigation()}ngOnInit(){this.steps=[];for(let e=0;e<this.navigation.displayableSteps.length;e++){const i=this.navigation.displayableSteps[e];"end"===i.code&&(i.code="documentLivenessReview"),this.steps.push(i)}}_ObserveDomMedia(){this._fuseMediaWatcherService.onMediaChange$.pipe((0,N.R)(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{this.phoneMode=!e.includes("lg")&&!e.includes("md")&&!e.includes("sm"),this.tabletMode=!(e.includes("lg")||e.includes("md")||!e.includes("sm")),this._changeDetectorRef.markForCheck()})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(b.H),t.Y36(I.j),t.Y36(t.sBO),t.Y36(J.T))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["kyc-stepper"]],standalone:!0,features:[t.jDz],decls:2,vars:2,consts:[["fxLayout","column","fxLayoutAlign","start start",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start"],["fxLayout","row","fxLayoutAlign","space-between center",1,"verifik-stepper"],["fxLayout","row","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center"],[1,"step-number-circle",3,"ngClass"],["fxHide.xs","true","fxHide.xs","true",3,"ngClass"],["fxLayout","column","fxLayoutAlign","center",1,"verifik-stepper"],[1,"font-bold","w-full","flex-row","justify-center","items-center","flex","my-1"],[1,"w-full","flex-row","justify-center","items-center","flex","my-1"],[4,"ngFor","ngForOf"],["class","dot",3,"background",4,"ngIf"],["class","dot",4,"ngIf"],[1,"dot"]],template:function(i,o){1&i&&(t.YNc(0,nn,3,1,"div",0),t.YNc(1,rn,7,6,"div",0)),2&i&&(t.Q6J("ngIf",o.navigation&&!o.phoneMode&&!o.tabletMode),t.xp6(1),t.Q6J("ngIf",o.navigation&&(o.phoneMode||o.tabletMode)))},dependencies:[w.o9,u.xw,u.Wh,L.b8,L.oO,p.ez,p.mk,p.sg,p.O5,A.Is,m.y4,m.Ot,_.ot,D.Cv,T.Cq],styles:[".verifik-stepper[_ngcontent-%COMP%]{width:100%;height:65px;background:white;box-shadow:5px 5px 5px #0000000d}.verifik-stepper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:24px;margin-left:24px}.dot[_ngcontent-%COMP%]{width:10px;height:10px;background-color:#00000040;border-radius:50%;margin:0 5px}.blue-dot[_ngcontent-%COMP%]{background-color:#0057f8}.step-number-circle[_ngcontent-%COMP%]{background:#0036e7;z-index:2;color:#fff;width:45px;height:45px;padding-top:11px;text-align:center;border-radius:50%;margin-right:25px}@media (max-width: 599px){.verifik-stepper[_ngcontent-%COMP%]{width:100%;height:65px;background:white;box-shadow:5px 5px 5px #0000000d}.verifik-stepper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:8px;margin-left:8px}}@media (min-width: 600px) and (max-width: 959px){.verifik-stepper[_ngcontent-%COMP%]{width:100%;height:65px;background:white;box-shadow:5px 5px 5px #0000000d}.verifik-stepper[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:6px;margin-left:6px}}"]})}return n})();var z=c(3403);function dn(n,s){1&n&&t._UZ(0,"kyc-stepper",1)}function ln(n,s){1&n&&t._UZ(0,"mat-progress-bar",10)}function pn(n,s){1&n&&t._UZ(0,"kyc-instructions")}function gn(n,s){1&n&&t._UZ(0,"kyc-document")}function mn(n,s){1&n&&t._UZ(0,"kyc-document-review")}function un(n,s){1&n&&t._UZ(0,"kyc-liveness")}function hn(n,s){1&n&&t._UZ(0,"kyc-liveness-ios")}function fn(n,s){1&n&&t._UZ(0,"kyc-document-liveness-review")}function _n(n,s){1&n&&t._UZ(0,"kyc-end")}function xn(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"img",4),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.backToStepOne())}),t.qZA()(),t.TgZ(4,"div",5)(5,"div",6),t._UZ(6,"languages"),t.qZA()()(),t.YNc(7,dn,1,0,"kyc-stepper",0),t.YNc(8,ln,1,0,"mat-progress-bar",7),t.ynx(9,8),t.YNc(10,pn,1,0,"kyc-instructions",9),t.YNc(11,gn,1,0,"kyc-document",9),t.YNc(12,mn,1,0,"kyc-document-review",9),t.YNc(13,un,1,0,"kyc-liveness",9),t.YNc(14,hn,1,0,"kyc-liveness-ios",9),t.YNc(15,fn,1,0,"kyc-document-liveness-review",9),t.YNc(16,_n,1,0,"kyc-end",9),t.BQk(),t._UZ(17,"app-demo-footer"),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Udp("background",e.project.branding.bgColor),t.xp6(2),t.Q6J("src",e.project.branding.logo,t.LSH),t.xp6(4),t.Q6J("ngIf",1!==e.navigation.currentStep&&e.appRegistration),t.xp6(1),t.Q6J("ngIf",e.kycData&&e.kycData.loading),t.xp6(2),t.Q6J("ngIf",1===e.navigation.currentStep||"instructions"===e.navigation.currentStep),t.xp6(1),t.Q6J("ngIf","document"===e.navigation.currentStep),t.xp6(1),t.Q6J("ngIf","documentReview"===e.navigation.currentStep),t.xp6(1),t.Q6J("ngIf","liveness"===e.navigation.currentStep&&"IOS"!==e.demoData.OS),t.xp6(1),t.Q6J("ngIf","liveness"===e.navigation.currentStep&&"IOS"===e.demoData.OS),t.xp6(1),t.Q6J("ngIf","documentLivenessReview"===e.navigation.currentStep),t.xp6(1),t.Q6J("ngIf","end"===e.navigation.currentStep)}}const vn=[{path:"",component:(()=>{class n{constructor(e,i,o,a,r){this._router=e,this._KYCService=i,this._splashScreenService=o,this.activatedRoute=a,this._demoService=r,this.alert={type:"success",message:""},this.showAlert=!1,this._splashScreenService.show(),this.demoData=this._demoService.getDemoData()}ngOnInit(){var e=this;this.activatedRoute.queryParams.subscribe(function(){var i=(0,x.Z)(function*(o){const a=o.token;a&&(localStorage.setItem("accessToken",a),e._requestAppRegistration(),e._loadContent())});return function(o){return i.apply(this,arguments)}}())}_loadContent(){var e=this;return(0,x.Z)(function*(){e._demoService.getDeviceDetails(),yield e._demoService.getAddress()})()}_requestAppRegistration(){this._KYCService.getAppRegistration({populates:["project","projectFlow","emailValidation","phoneValidation","biometricValidation","person","documentValidation","compareFaceVerification","face","documentFace","informationValidation"]}).subscribe({next:e=>{this.appRegistration=e.data,this.project=new Y.XR(this.appRegistration.project),this.projectFlow=new Y.nd(this.appRegistration.projectFlow)},error:e=>{this.errorContent=e.error,this._splashScreenService.hide()},complete:()=>{if(this._splashScreenService.hide(),this.projectFlow.onboardingSettings.signUpForm.phone&&!this.appRegistration.phoneValidation||this.projectFlow.onboardingSettings.signUpForm.email&&!this.appRegistration.emailValidation){const e=localStorage.getItem("accessToken");this._router.navigateByUrl(`/confirmation-required/${this.appRegistration._id}?token=${e}`)}this.navigation=this._KYCService.initNavigation(),this.requirementsLoaded=!0}})}backToStepOne(){}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(z.F0),t.Y36(b.H),t.Y36(I.j),t.Y36(z.gz),t.Y36(O.e))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["auth-forgot-password"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","w-full",4,"ngIf"],[1,"w-full"],["fxLayout","row","fxLayoutAlign","end center",1,"w-full","demo-header"],["fxFlex",""],["alt","",1,"demo-header-logo","cursor-pointer",3,"src","click"],["fxFlex","","fxLayout","row","fxLayoutAlign","end center",1,"demo-header-actions","cursor-pointer"],["fxLayout","row","fxLayoutAlign","center center",1,"demo-header-action","cursor-pointer"],["mode","query","class","w-full",4,"ngIf"],[1,"demo-content"],[4,"ngIf"],["mode","query",1,"w-full"]],template:function(i,o){1&i&&t.YNc(0,xn,18,12,"div",0),2&i&&t.Q6J("ngIf",o.requirementsLoaded)},dependencies:[p.O5,y.u5,y.UX,U.lN,j.c,_.ot,T.Cq,W.v,w.o9,u.xw,u.Wh,u.yH,X.w,gt,we,Me,Tt,Xt,Ge,Yt,cn],styles:[".demo-header{width:100%;height:64px;color:#fff!important;border:1px solid rgba(128,128,128,.0784313725);z-index:10!important}.demo-header-logo{width:52px;padding-left:16px;height:auto}.demo-header-action{padding-right:25px}.demo-header-partner-icon{width:40px;padding-right:10px}.demo-content{width:100%;height:auto}.step-one-circle{background:#0036e7;z-index:2;color:#fff;width:45px;height:45px;padding-top:11px;text-align:center;border-radius:50%;margin-right:25px}.disabled-background{background:rgba(0,0,0,.062745098)!important}.font-bold{font-weight:800}.box-shadow-3px{box-shadow:3px 3px 3px 3px #0000000d}.grey-background{background-color:#80808021}.m-2{margin:2px}.m-4{margin:4px}.m-8{margin:8px}.mt-4{margin-top:4px}.mt-8{margin-top:8px}.cursor-pointer{cursor:pointer!important;font-weight:800}.w-50p{width:50%}.text-center{text-align:center}.margin-left-16{margin-left:25px}h1{font-size:35px;padding-top:32px;font-weight:700;color:#0036e7}h2{font-size:30px;padding-top:16px;font-weight:700;color:#0036e7}\n"],encapsulation:2,data:{animation:k.L}})}return n})()}]}}]);