"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[330],{8340:(k,R,s)=>{s.d(R,{H:()=>y});var h=s(553),C=s(9397),O=s(8533),p=s(5879),I=s(2065),o=s(8991),v=s(9862);let y=(()=>{class M{constructor(d,g,t){this._httpWrapper=d,this._translocoService=g,this._http=t,this.baseUrl=h.N.apiUrl}getNavigation(){return this.navigation}initNavigation(){let d=1;const g=[],t={},x=this.currentProjectFlow.onboardingSettings.steps;return["mandatory","optional"].includes(x.document)&&(d++,g.push({code:"document",status:x.document}),t.document=x.document,d++,g.push({code:"documentReview",status:x.document}),t.documentReview=x.document),["mandatory","optional"].includes(x.liveness)&&(d++,g.push({code:"liveness",status:x.liveness}),t.liveness=x.liveness,t.document&&(d++,t.documentLivenessReview=x.liveness)),g.push({code:"end",status:"mandatory"}),d++,this.navigation={currentStep:1,lastStep:d,steps:x,map:t,displayableSteps:g},this.navigation}getProject(){return this.currentProject}navigateTo(d){setTimeout(()=>{if("next"!==d)this.navigation.currentStep=d;else switch(this.navigation.currentStep){case"liveness":this.navigation.currentStep="documentLivenessReview";break;case"document":this.navigation.currentStep="documentReview";break;case"documentReview":this.navigation.currentStep="liveness";break;case"documentLivenessReview":this.navigation.currentStep="end"}},750)}getAppRegistration(d){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/app-registrations/me`,d).pipe((0,C.b)(g=>{this.appRegistration=g.data,this.currentProject=new O.XR({...this.appRegistration.project,type:"onboarding"}),this.currentProjectFlow=this.appRegistration.projectFlow}))}createAppRegistration(d){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/app-registrations`,d)}sendEmailValidation(d){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/email-validations`,{email:d,project:this.currentProject._id,projectFlow:this.currentProjectFlow._id,type:"onboarding",validationMethod:"verificationCode",language:this._translocoService.getActiveLang()}).pipe((0,C.b)(g=>{}))}sendPhoneValidation(d,g,t){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/phone-validations`,{countryCode:d,phone:g,project:this.currentProject._id,projectFlow:this.currentProjectFlow._id,type:"onboarding",validationMethod:"verificationCode",language:this._translocoService.getActiveLang(),phoneGateway:t||"sms"}).pipe((0,C.b)(x=>{}))}confirmEmailValidation(d,g){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/email-validations/validate`,{email:d,otp:g,project:this.currentProject._id,projectFlow:this.currentProjectFlow._id})}confirmPhoneValidation(d,g,t){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/phone-validations/validate`,{countryCode:d,phone:g,otp:t,project:this.currentProject._id,projectFlow:this.currentProjectFlow._id})}updateAppRegistration(d){return this._httpWrapper.sendRequest("put",`${this.baseUrl}/v2/app-registrations/${this.appRegistration._id}`,{...d})}syncAppRegistration(d,g){return this._httpWrapper.sendRequest("put",`${this.baseUrl}/v2/app-registrations/${this.appRegistration._id}/sync`,{step:d,status:g})}createDocumentValidation(d){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/document-validations/app-registration`,d)}createBiometricValidation(d){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/biometric-validations/app-registration`,d)}updateInformationValidationWithCriminalRecords(d){return this._httpWrapper.sendRequest("put",`${this.baseUrl}/v2/information-validations/${d._id}/background-check`,d)}updateDocumentValidationNameValidation(d){return this._httpWrapper.sendRequest("put",`${this.baseUrl}/v2/document-validations/${d._id}/validate`,d)}getIdentityImages(d){return this._httpWrapper.sendRequest("get",`${this.baseUrl}/v2/identity-images`,d)}compareFaces(){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/face-recognition/compare/app-registration`,{})}restartKYC(){return this._httpWrapper.sendRequest("delete",`${this.baseUrl}/v2/biometric-validations/${this.appRegistration.biometricValidation._id}`)}static#t=this.\u0275fac=function(g){return new(g||M)(p.LFG(I.O),p.LFG(o.Vn),p.LFG(v.eN))};static#e=this.\u0275prov=p.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"})}return M})()},5789:(k,R,s)=>{s.d(R,{w:()=>o});var h=s(6814),C=s(1447),O=s(8991),p=s(5879),I=s(3814);let o=(()=>{class v{static#t=this.\u0275fac=function(P){return new(P||v)};static#e=this.\u0275cmp=p.Xpm({type:v,selectors:[["app-demo-footer"]],standalone:!0,features:[p.jDz],decls:4,vars:3,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"footer"],["href","https://verifik.co"]],template:function(P,d){1&P&&(p.TgZ(0,"div",0)(1,"a",1),p._uU(2),p.ALo(3,"transloco"),p.qZA()()),2&P&&(p.xp6(2),p.Oqu(p.lcZ(3,1,"footerText")))},dependencies:[C.o9,I.xw,I.Wh,h.ez,O.y4,O.Ot],styles:[".footer[_ngcontent-%COMP%]{width:100%;height:60px;position:absolute;bottom:0;background-color:#fff;box-shadow:3px 3px 3px #0000000d;z-index:3}"]})}return v})()},1094:(k,R,s)=>{s.d(R,{s:()=>q});var h=s(5861),C=s(6814),O=s(1447),p=s(2296),I=s(5986),o=s(5940),v=s(8991),y=s(2982),M=s(8645),P=s(9773),d=s(4354),g=s(6799),t=s(8533),x=s(3372),n=s(5879),m=s(9162),T=s(6036),D=s(3403),L=s(9236),b=s(8340),A=s(3814),F=s(7509);const W=["maskResult"],K=["toSend"],B=["cardIdFace"];function H(_,w){if(1&_){const i=n.EpF();n.TgZ(0,"webcam",17),n.NdJ("imageCapture",function(e){n.CHM(i);const r=n.oxw(2);return n.KtG(r.proccessImage(e))})("initError",function(e){n.CHM(i);const r=n.oxw(2);return n.KtG(r.cameraError(e))}),n.qZA()}if(2&_){const i=n.oxw(2);n.Q6J("height",i.camera.dimensions.video.max.height)("width",i.camera.dimensions.video.max.width)("videoOptions",i.camera.configuration)("imageQuality",1)("captureImageData",!0)("allowCameraSwitch",!1)("trigger",i.takePicture$)("mirrorImage",i.demoData.isMobile?"never":"always")}}function Y(_,w){if(1&_&&n._UZ(0,"canvas",18,19),2&_){const i=n.oxw(2);n.Udp("width",i.response.base64Image?i.camera.dimensions.result.width:i.camera.dimensions.video.width,"px")("height",i.response.base64Image?i.camera.dimensions.result.height:i.camera.dimensions.video.height,"px")}}function Q(_,w){if(1&_&&n._UZ(0,"img",20),2&_){const i=n.oxw(2);n.Q6J("src",i.response.base64Image,n.LSH)}}function J(_,w){if(1&_&&(n.TgZ(0,"div")(1,"div",21),n._uU(2),n.qZA(),n.TgZ(3,"div",22),n._uU(4),n.qZA()()),2&_){const i=n.oxw(2);n.xp6(1),n.Udp("color",i.project.branding.titleColor),n.xp6(1),n.Oqu(i.errorFace.title),n.xp6(1),n.Udp("color",i.project.branding.txtColor),n.xp6(1),n.Oqu(i.errorFace.subtitle)}}const N=function(_){return{"id-scanning-error-container":_}};function V(_,w){if(1&_){const i=n.EpF();n.TgZ(0,"div",3),n._UZ(1,"canvas",4,5),n.TgZ(3,"div",6),n.YNc(4,H,1,8,"webcam",7),n.YNc(5,Y,2,4,"canvas",8),n.YNc(6,Q,1,1,"img",9),n._UZ(7,"canvas",null,10),n.qZA(),n.TgZ(9,"div",11),n.YNc(10,J,5,6,"div",12),n.qZA(),n.TgZ(11,"div",13)(12,"button",14),n.NdJ("click",function(){n.CHM(i);const e=n.oxw();return n.KtG(e.takePictureSnapshot())}),n._uU(13),n.ALo(14,"transloco"),n.qZA(),n.TgZ(15,"button",15),n.NdJ("click",function(){n.CHM(i);const e=n.oxw();return n.KtG(e.ngOnInit())}),n._uU(16),n.ALo(17,"transloco"),n.qZA(),n.TgZ(18,"button",16),n.NdJ("click",function(){n.CHM(i);const e=n.oxw();return n.KtG(e.continue())}),n._uU(19),n.ALo(20,"transloco"),n.qZA()()()}if(2&_){const i=n.oxw();n.xp6(3),n.Udp("width",i.camera.dimensions.video.width,"px")("height",i.camera.dimensions.video.height,"px"),n.xp6(1),n.Q6J("ngIf",!i.response.base64Image),n.xp6(1),n.Q6J("ngIf",!i.response.base64Image),n.xp6(1),n.Q6J("ngIf",i.response.base64Image),n.xp6(1),n.ekj("hidden",!0),n.xp6(2),n.Q6J("ngClass",n.VKq(37,N,i.errorFace&&i.errorFace.title)),n.xp6(1),n.Q6J("ngIf",i.errorFace&&!i.loadingResults),n.xp6(2),n.Udp("background",i.project.branding.buttonColor)("color",i.project.branding.buttonTxtColor),n.ekj("hidden",i.response.base64Image),n.Q6J("disabled",i.errorFace),n.xp6(1),n.hij(" ",n.lcZ(14,31,"id_scanning.manual_capture_button")," "),n.xp6(2),n.Udp("background",i.project.branding.buttonColor)("color",i.project.branding.buttonTxtColor),n.ekj("hidden",!i.response.base64Image),n.xp6(1),n.hij(" ",n.lcZ(17,33,"id_scanning.retry")," "),n.xp6(2),n.Udp("color",i.project.branding.txtColor),n.ekj("hidden",!i.response.base64Image),n.xp6(1),n.hij(" ",n.lcZ(20,35,"continue")," ")}}function G(_,w){if(1&_&&(n.TgZ(0,"div",23),n._UZ(1,"img",24),n.TgZ(2,"h1",25),n._uU(3),n.ALo(4,"transloco"),n.qZA(),n.TgZ(5,"p",25),n._uU(6),n.ALo(7,"transloco"),n.qZA()()),2&_){const i=n.oxw();n.xp6(2),n.Udp("color",i.project.branding.titleColor),n.xp6(1),n.Oqu(n.lcZ(4,6,"id_scanning.camera_not_found")),n.xp6(2),n.Udp("color",i.project.branding.txtColor),n.xp6(1),n.hij(" ",n.lcZ(7,8,"id_scanning.camera_not_found_description")," ")}}function z(_,w){if(1&_&&n._UZ(0,"kyc-document-errors-display",26),2&_){const i=n.oxw();n.Q6J("errorContent",i.errorContent)("attempts",i.attempts)("attemptsLimit",i.attemptsLimit)("callback",i.onErrorCallback)}}function $(_,w){if(1&_&&(n.TgZ(0,"p",25),n._uU(1),n.ALo(2,"transloco"),n.qZA()),2&_){const i=n.oxw(2);n.Udp("color",i.project.branding.txtColor),n.xp6(1),n.AsE(" ",n.lcZ(2,4,"id_scanning.remaining_attempts")," ",i.attempts.limit-i.attempts.current," ")}}function X(_,w){if(1&_){const i=n.EpF();n.TgZ(0,"div",23),n._UZ(1,"img",27),n.TgZ(2,"h1",25),n._uU(3),n.ALo(4,"transloco"),n.qZA(),n.TgZ(5,"p",25),n._uU(6),n.ALo(7,"transloco"),n.qZA(),n.YNc(8,$,3,6,"p",28),n.TgZ(9,"button",29),n.NdJ("click",function(){n.CHM(i);const e=n.oxw();return n.KtG(e.attempts.limit-e.attempts.current>0?e.tryAgain():e.restartDemo())}),n._uU(10),n.ALo(11,"transloco"),n.qZA()()}if(2&_){const i=n.oxw();n.xp6(1),n.Q6J("src",i.attempts.limit-i.attempts.current>0?"https://cdn.verifik.co/demo/failedtodetectdocument@3x.png":"https://cdn.verifik.co/demo/redstop.svg",n.LSH),n.xp6(1),n.Udp("color",i.project.branding.titleColor),n.xp6(1),n.hij(" ",n.lcZ(4,13,i.attempts.limit-i.attempts.current>0?"id_scanning.document_not_detected":"id_scanning.failed_to_detect_limit")," "),n.xp6(2),n.Udp("color",i.project.branding.txtColor),n.xp6(1),n.hij(" ",n.lcZ(7,15,i.attempts.limit-i.attempts.current>0?"id_scanning.document_not_detected_description":"id_scanning.failed_to_detect_limit_description")," "),n.xp6(2),n.Q6J("ngIf",i.attempts.limit-i.attempts.current>0),n.xp6(1),n.Udp("background",i.project.branding.buttonColor)("color",i.project.branding.buttonTxtColor),n.xp6(1),n.hij(" ",n.lcZ(11,17,i.failedToDetectDocument?"id_scanning.retry":"restart")," ")}}let q=(()=>{class _{get takePicture$(){return this.takePicture.asObservable()}constructor(i,a,e,r,c,l,u,U,tt){this._dom=i,this._demoService=a,this._splashScreenService=e,this._translocoService=r,this.renderer=c,this._router=l,this._changeDetectorRef=u,this._fuseMediaWatcherService=U,this._KYCService=tt,this.aspectRatio=85.6/53.98,this.takePicture=new M.x,this._unsubscribeAll=new M.x,this.setDefaultCamera=()=>{this.camera={hasPermissions:!1,isLoading:!1,configuration:{frameRate:{ideal:30,max:30},[this.demoData.isMobile?"width":"height"]:{ideal:1080},facingMode:d.w[this.demoData.isMobile]},dimensions:{video:{max:{height:Math.ceil(.7*window.innerHeight),width:Math.ceil(.9*window.innerWidth)}}}}},this.setDefaultInterval=()=>{this.interval={}},this.setDefaultResponse=()=>{this.response={isLoading:!1,isFailed:!1}},this.setVideoNgxCameraData=()=>{const f=this._dom.nativeElement.querySelector("video");f&&(f.addEventListener("loadeddata",()=>{this.setVideoDimensions(f),this.drawRect()}),this.interval.detectFace||(this.interval.detectFace=setInterval(()=>{this.response.base64Image&&(this.interval.detectFace=clearInterval(this.interval.detectFace)),this.takePicture.next()},this.demoData.time)),this.interval.checkNgxVideo=clearInterval(this.interval.checkNgxVideo),this.setVideoDimensions(f),this.drawRect(),this.loading({isLoading:!1,start:!0}))},this.loading=({isLoading:f=!0,start:Z,result:E})=>{const S=Z?"camera":E&&"response";S&&(this[S].isLoading=f);const j=f?"show":"hide";this.demoData.loading=f,this._splashScreenService[j]()},this.setImageOnCanvas=(f,Z,E,S)=>{f.width=S.width,f.height=S.height,f.style.marginLeft=`${S.offsetX||0}px`,f.style.marginTop=`${S.offsetY||0}px`;const j=f.getContext("2d");j.clearRect(0,0,E.width,E.height),j.drawImage(Z,E.offsetX,E.offsetY,E.width,E.height,0,0,S.width,S.height)},this._ObserveDomMedia(),this.demoData=this._demoService.getDemoData(),this.view=this._router.url.includes("/kyc")?"kyc":"demo",this.project=new t.XR({}),this.projectFlow=new t.nd({}),"kyc"===this.view&&(this.appRegistration=this._KYCService.appRegistration,this.project=this._KYCService.currentProject,this.projectFlow=this._KYCService.currentProjectFlow,this.navigation=this._KYCService.getNavigation(),this.attempts=this.appRegistration?.failedDocumentValidations?.length||0,this.attemptsLimit=this.projectFlow.onboardingSettings.document.maxAttempts),this.errorContent={message:""},this.startDefaultValues(),this.setDefaultInterval(),this.renderer.listen("window","resize",()=>{this.interval.checkNgxVideo=setInterval(()=>{this.setVideoNgxCameraData()},this.demoData.time)}),this._changeDetectorRef.markForCheck()}_ObserveDomMedia(){this._fuseMediaWatcherService.onMediaChange$.pipe((0,P.R)(this._unsubscribeAll)).subscribe(({matchingAliases:i})=>{this.phoneMode=!i.includes("lg")&&!i.includes("md")&&!i.includes("sm"),this.tabletMode=!(i.includes("lg")||i.includes("md")||!i.includes("sm")),this._changeDetectorRef.markForCheck()})}ngOnInit(){var i=this;this.startDefaultValues(),this.camera.hasPermissions=!0,this.errorFace={},this.loading({start:!0}),this._demoService.faceapi$.subscribe(function(){var a=(0,h.Z)(function*(e){e&&(i.interval.checkNgxVideo=setInterval(()=>{i.setMaxVideoDimensions(),i.setVideoNgxCameraData()},i.demoData.time))});return function(e){return a.apply(this,arguments)}}())}startDefaultValues(){this.setDefaultResponse(),this.setDefaultCamera(),this.setMaxVideoDimensions(),this._changeDetectorRef.markForCheck()}setVideoDimensions(i){this.camera.dimensions.video.height=i.clientHeight,this.camera.dimensions.video.width=i.clientWidth;const a=this.maskResultCanvasRef.nativeElement;a.style.marginLeft="0px",a.style.marginTop="0px"}setMaxVideoDimensions(){this.camera.dimensions.video={max:{height:Math.ceil(.7*window.innerHeight),width:Math.ceil(.9*window.innerWidth)}},this.camera.dimensions.result=void 0}setResultDimensions(i,a,e){a<e?(i.offsetY=Math.floor(.1*a),i.height=Math.floor(.8*a),i.width=Math.floor(this.aspectRatio*i.height),i.offsetX=Math.floor((e-i.width)/2)):(i.offsetX=Math.floor(.1*e),i.width=Math.floor(.8*e),i.height=Math.floor(this.aspectRatio*i.width),i.offsetY=Math.floor((a-i.height)/2))}drawRect(){this.camera.dimensions.result={height:0,width:0,offsetX:0,offsetY:0},this.setResultDimensions(this.camera.dimensions.result,this.camera.dimensions.video.height,this.camera.dimensions.video.width);const i=this.maskResultCanvasRef.nativeElement,a=this.camera.dimensions.video,e=this.camera.dimensions.result;i.height=a.height,i.width=a.width;const r=i.getContext("2d");r.clearRect(0,0,a.width,a.height),r.fillStyle="rgba(255, 255, 255, 0.75)",r.fillRect(0,0,a.width,a.height),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0, 0, 0, 1)",r.fillRect(e.offsetX,e.offsetY,e.width,e.height),r.globalCompositeOperation="source-over"}cameraError(i){i.mediaStreamError&&"NotAllowedError"===i.mediaStreamError.name&&(this.loading({isLoading:!1,start:!0}),this.camera.hasPermissions=!1)}proccessImage(i){var a=this;if(this.response.base64Image)return;if(!this.interval.detectFace)return void this.takePictureManual(i);const e=new Image;e.src=i.imageAsDataUrl,e.onload=(0,h.Z)(function*(){try{a.detectFace(e)}catch(r){alert(r.message)}})}detectFace(i){var a=this;return(0,h.Z)(function*(){try{const e=yield g.Qr(i,new g.d7({minConfidence:.2})).withFaceLandmarks();return e.length?(a.checkFaceTimeout=clearTimeout(a.checkFaceTimeout),a.errorFace=null,e):(a.checkFaceTimeout||(a.checkFaceTimeout=setTimeout(()=>{a.errorFace={title:a._translocoService.translate("id_scanning.face_not_found"),subtitle:a._translocoService.translate("id_scanning.face_not_found_details")}},3*a.demoData.time)),null)}catch(e){alert(e.message)}})()}takePictureManual(i){var a=this;const e=new Image;e.src=i.imageAsDataUrl,e.onload=(0,h.Z)(function*(){const r=yield a.detectFace(e);if(!r||!r.length)return alert(a._translocoService.translate("id_scanning.face_not_found")),a.tryAgain();const c=a._demoService.getBiggestFace(r.map(U=>U.detection.box));a.idCard={face:a._demoService.cutFaceIdCard(e,c,a.cardIdFaceRef.nativeElement)},a.camera.dimensions.real={height:0,width:0,offsetX:0,offsetY:0},a.setResultDimensions(a.camera.dimensions.real,e.height,e.width),a.setImageOnCanvas(a.maskResultCanvasRef.nativeElement,e,a.camera.dimensions.real,a.camera.dimensions.result);const u=a.ToSendCanvasRef.nativeElement;a.setImageOnCanvas(u,e,a.camera.dimensions.real,a.camera.dimensions.real),a.response.base64Image=u.toDataURL("image/jpeg")})}takePictureSnapshot(){this.interval.detectFace=clearInterval(this.interval.detectFace),this.takePicture.next()}continue(){var i=this;return(0,h.Z)(function*(){const a={image:i.response.base64Image.replace("data:image/jpeg;base64",""),force:i.appRegistration?.forceUpload||!1};i.loading({result:!0}),"kyc"!==i.view?i._demoService.sendDocument(a).subscribe(e=>{i._demoService.setDemoDocument(e.data),localStorage.setItem("idCardFaceImage",i.idCard.face),localStorage.setItem("documentId",e.data._id),i.loading({isLoading:!1}),i._demoService.moveToStep(3)},e=>{i.response.isFailed=!0,i.loading({isLoading:!1})}):i._KYCService.createDocumentValidation({...a,documentFace:i.idCard.face}).subscribe({next:e=>{i.appRegistration.documentValidation=e.data.documentValidation,i._KYCService.navigateTo("next")},error:e=>{i.errorResult=!0,i.errorContent=e.error,i.loading({isLoading:!1}),i._splashScreenService.hide()},complete:()=>{i.loading({isLoading:!1})}})})()}tryAgain(){this.attempts++,this.ngOnInit()}restartDemo(){this._demoService.restart()}onErrorCallback(i){window.location.reload()}static#t=this.\u0275fac=function(a){return new(a||_)(n.Y36(n.SBq),n.Y36(m.e),n.Y36(T.j),n.Y36(v.Vn),n.Y36(n.Qsj),n.Y36(D.F0),n.Y36(n.sBO),n.Y36(L.T),n.Y36(b.H))};static#e=this.\u0275cmp=n.Xpm({type:_,selectors:[["id-scanning-ios"]],viewQuery:function(a,e){if(1&a&&(n.Gf(W,5),n.Gf(K,5),n.Gf(B,5)),2&a){let r;n.iGM(r=n.CRH())&&(e.maskResultCanvasRef=r.first),n.iGM(r=n.CRH())&&(e.ToSendCanvasRef=r.first),n.iGM(r=n.CRH())&&(e.cardIdFaceRef=r.first)}},standalone:!0,features:[n.jDz],decls:5,vars:4,consts:[["fxLayout","column","fxLayoutAlign","start center","class","bg-white rounded-lg shadow-lg w-full",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","id-scanning-error-div",4,"ngIf"],["class","m-16",3,"errorContent","attempts","attemptsLimit","callback",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start center",1,"bg-white","rounded-lg","shadow-lg","w-full"],["hidden","true"],["cardIdFace",""],[1,"relative"],[3,"height","width","videoOptions","imageQuality","captureImageData","allowCameraSwitch","trigger","mirrorImage","imageCapture","initError",4,"ngIf"],["class","absolute top-0 left-0",3,"width","height",4,"ngIf"],["class","captured-image","alt","",3,"src",4,"ngIf"],["toSend",""],["fxLayout","column","fxLayoutAlign","center center",1,"text-center","h-20","pb-4","sm:h-8","xs:h-8","my-2",3,"ngClass"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center",1,"capture_button"],["mat-raised-button","",1,"m-4","z-index-2","capture_button",3,"disabled","click"],["mat-stroked-button","",1,"m-4","z-index-2",3,"click"],["mat-raised-button","",1,"mx-2",3,"click"],[3,"height","width","videoOptions","imageQuality","captureImageData","allowCameraSwitch","trigger","mirrorImage","imageCapture","initError"],[1,"absolute","top-0","left-0"],["maskResult",""],["alt","",1,"captured-image",3,"src"],[1,"text-3xl","font-bold"],[1,"text-gray-600"],["fxLayout","column","fxLayoutAlign","center center",1,"id-scanning-error-div"],["src","https://cdn.verifik.co/demo/nocameraenabled.svg","alt","",1,"id-scanning-no-camera-enabled-img"],[1,"mt-4"],[1,"m-16",3,"errorContent","attempts","attemptsLimit","callback"],["alt","",1,"id-scanning-failed-document-img",3,"src"],["class","mt-4",3,"color",4,"ngIf"],["mat-raised-button","",1,"mt-4","z-index-2","id-scanning-try-again-button",3,"click"]],template:function(a,e){1&a&&(n.ynx(0),n.YNc(1,V,21,39,"div",0),n.BQk(),n.YNc(2,G,8,10,"div",1),n.YNc(3,z,1,4,"kyc-document-errors-display",2),n.YNc(4,X,12,19,"div",1)),2&a&&(n.xp6(1),n.Q6J("ngIf",!e.response.isFailed&&e.camera.hasPermissions&&!e.errorResult),n.xp6(1),n.Q6J("ngIf",!e.response.isFailed&&!e.camera.hasPermissions&&!e.camera.isLoading),n.xp6(1),n.Q6J("ngIf",e.errorContent.message),n.xp6(1),n.Q6J("ngIf",e.response.isFailed))},dependencies:[O.o9,A.xw,A.Wh,F.oO,I.p9,p.ot,p.lW,C.ez,C.mk,C.O5,o.Cq,v.y4,v.Ot,y.Tm,y.i3,x.M],styles:[".id-scanning-error-div[_ngcontent-%COMP%]{margin-top:20px;width:600px;background:white;height:600px;padding:16px;box-shadow:3px 3px 3px 3px #0000000d}.id-scanning-error-div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#0036e7;font-size:24px;font-weight:800;text-align:center}.id-scanning-error-div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#01236da6;font-size:16px;font-weight:300;text-align:center}.id-scanning-no-camera-enabled-img[_ngcontent-%COMP%], .id-scanning-failed-document-img[_ngcontent-%COMP%]{width:40%}@media (max-width: 599px){.capture_button[_ngcontent-%COMP%]{z-index:100;position:absolute;bottom:100px;left:50%;margin:0!important;transform:translate(-50%)}.id-scanning-error-container[_ngcontent-%COMP%]{position:absolute;top:30%;left:0;width:100%;height:320px!important;z-index:100;background:rgba(128,128,128,.1411764706);border-radius:25px}.captured-image[_ngcontent-%COMP%]{max-width:100%;max-height:50vh;width:auto;height:auto;display:block;margin:0 auto}}",".demo-header[_ngcontent-%COMP%]{background-color:#01236d;width:100%;height:64px;color:#fff!important}.demo-header-logo[_ngcontent-%COMP%]{width:120px;padding-left:16px;height:auto}.demo-header-action[_ngcontent-%COMP%]{padding-right:25px}.demo-header-partner-icon[_ngcontent-%COMP%]{width:40px;padding-right:10px}.demo-content[_ngcontent-%COMP%]{width:100%;height:auto}.step-one-circle[_ngcontent-%COMP%]{background:#0036e7;z-index:2;color:#fff;width:45px;height:45px;padding-top:11px;text-align:center;border-radius:50%;margin-right:25px}.disabled-background[_ngcontent-%COMP%]{background:rgba(0,54,231,.2509803922)!important}.font-bold[_ngcontent-%COMP%]{font-weight:800}.box-shadow-3px[_ngcontent-%COMP%]{box-shadow:3px 3px 3px 3px #0000000d}.grey-background[_ngcontent-%COMP%]{background-color:#80808021}.m-2[_ngcontent-%COMP%]{margin:2px}.m-4[_ngcontent-%COMP%]{margin:4px}.m-8[_ngcontent-%COMP%]{margin:8px}.mt-4[_ngcontent-%COMP%]{margin-top:4px}.mt-8[_ngcontent-%COMP%]{margin-top:8px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer!important;font-weight:800}.w-50p[_ngcontent-%COMP%]{width:50%}.text-center[_ngcontent-%COMP%]{text-align:center}.margin-left-16[_ngcontent-%COMP%]{margin-left:25px}h1[_ngcontent-%COMP%]{font-size:35px;padding-top:32px;font-weight:700;color:#0036e7}h2[_ngcontent-%COMP%]{font-size:30px;padding-top:16px;font-weight:700;color:#0036e7}@media (max-width: 599px){.demo-header-logo[_ngcontent-%COMP%]{width:120px}}"]})}return _})()},692:(k,R,s)=>{s.d(R,{s:()=>w});var h=s(5861),C=s(6814),O=s(1447),p=s(2296),I=s(5986),o=s(5940),v=s(8991),y=s(6799),M=s(8533),P=s(3372),d=s(8645),g=s(9773),t=s(5879),x=s(9162),n=s(3403),m=s(6036),T=s(9236),D=s(8340),L=s(3814),b=s(7509);const A=["videoElement"],F=["canvas"],W=["result"],K=["toSend"],B=["cardIdFace"];function H(i,a){if(1&i&&(t.TgZ(0,"div")(1,"div",11),t._uU(2),t.qZA(),t.TgZ(3,"div",12),t._uU(4),t.qZA()()),2&i){const e=t.oxw(3);t.xp6(1),t.Udp("color",e.project?e.project.branding.titleColor:null),t.xp6(1),t.Oqu(e.errorFace.title),t.xp6(1),t.Udp("color",e.project?e.project.branding.txtColor:null),t.xp6(1),t.Oqu(e.errorFace.subtitle)}}function Y(i,a){if(1&i&&t._UZ(0,"img",25),2&i){const e=t.oxw(4);t.Q6J("src",e.response.base64Image,t.LSH)}}const Q=function(i){return{"mobile-height":i}},J=function(i){return{"max-h-[75vh]":i}};function N(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14),t._UZ(2,"video",15,16)(4,"canvas",17,18),t.YNc(6,Y,1,1,"img",19),t._UZ(7,"canvas",17,20),t.qZA(),t.TgZ(9,"div",21)(10,"button",22),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(3);return t.KtG(c.takePicture())}),t._uU(11),t.ALo(12,"transloco"),t.qZA(),t.TgZ(13,"button",23),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(3);return t.KtG(c.tryAgain())}),t._uU(14),t.ALo(15,"transloco"),t.qZA(),t.TgZ(16,"button",24),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(3);return t.KtG(c.continue())}),t._uU(17),t.ALo(18,"transloco"),t.qZA()()()}if(2&i){const e=t.oxw(3);t.Q6J("ngClass",t.VKq(45,Q,e.phoneMode)),t.xp6(1),t.Udp("width",e.WIDTH,"px")("height",e.HEIGHT,"px"),t.xp6(1),t.ekj("hidden",e.base64Images),t.Q6J("ngClass",t.VKq(47,J,!e.phoneMode)),t.xp6(2),t.Udp("width",e.WIDTH,"px")("height",e.HEIGHT,"px"),t.ekj("hidden",e.base64Images),t.xp6(2),t.Q6J("ngIf",e.response.base64Image),t.xp6(1),t.ekj("hidden",!0),t.xp6(3),t.Udp("background",e.project.branding.buttonColor)("color",e.project.branding.buttonTxtColor),t.ekj("hidden",e.base64Images),t.Q6J("disabled",e.errorFace),t.xp6(1),t.hij(" ",t.lcZ(12,39,"id_scanning.manual_capture_button")," "),t.xp6(2),t.Udp("background",e.project.branding.buttonColor)("color",e.project.branding.buttonTxtColor),t.ekj("hidden",!e.base64Images),t.xp6(1),t.hij(" ",t.lcZ(15,41,"id_scanning.retry")," "),t.xp6(2),t.Udp("background",e.project.branding.buttonColor)("color",e.project.branding.buttonTxtColor),t.ekj("hidden",!e.base64Images),t.xp6(1),t.hij(" ",t.lcZ(18,43,"continue")," ")}}const V=function(i){return{"id-scanning-error-container":i}};function G(i,a){if(1&i&&(t.TgZ(0,"div",7)(1,"div",8),t.YNc(2,H,5,6,"div",9),t.qZA(),t.YNc(3,N,19,49,"div",10),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.VKq(3,V,e.errorFace&&e.errorFace.title)),t.xp6(1),t.Q6J("ngIf",e.errorFace&&!e.loadingResults),t.xp6(1),t.Q6J("ngIf",!e.failedToDetectDocument)}}function z(i,a){if(1&i&&(t.TgZ(0,"div",3),t._UZ(1,"canvas",4,5),t.YNc(3,G,4,5,"div",6),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",!e.loadingCamera&&e.hasCameraPermissions)}}function $(i,a){if(1&i&&(t.TgZ(0,"div",26),t._UZ(1,"img",27),t.TgZ(2,"h1",28),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"p",28),t._uU(6),t.ALo(7,"transloco"),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.Oqu(t.lcZ(4,6,"id_scanning.camera_not_found")),t.xp6(2),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(7,8,"id_scanning.camera_not_found_description")," ")}}function X(i,a){if(1&i&&t._UZ(0,"kyc-document-errors-display",29),2&i){const e=t.oxw();t.Q6J("errorContent",e.errorContent)("attempts",e.attempts)("attemptsLimit",e.attemptsLimit)("callback",e.onErrorCallback)}}function q(i,a){if(1&i&&(t.TgZ(0,"p",28),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&i){const e=t.oxw(2);t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.AsE(" ",t.lcZ(2,4,"id_scanning.remaining_attempts")," ",e.attemptsLimit-e.attempts," ")}}function _(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",26),t._UZ(1,"img",30),t.TgZ(2,"h1",28),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"p",28),t._uU(6),t.ALo(7,"transloco"),t.qZA(),t.YNc(8,q,3,6,"p",31),t.TgZ(9,"button",32),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.attemptsLimit-c.attempts>0?c.tryAgain(!0):c.restartDemo())}),t._uU(10),t.ALo(11,"transloco"),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("src",e.attemptsLimit-e.attempts>0?"https://cdn.verifik.co/demo/failedtodetectdocument@3x.png":"https://cdn.verifik.co/demo/redstop.svg",t.LSH),t.xp6(1),t.Udp("color",e.project.branding.titleColor),t.xp6(1),t.hij(" ",t.lcZ(4,13,e.attemptsLimit-e.attempts>0?"id_scanning.document_not_detected":"id_scanning.failed_to_detect_limit")," "),t.xp6(2),t.Udp("color",e.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(7,15,e.attemptsLimit-e.attempts>0?"id_scanning.document_not_detected_description":"id_scanning.failed_to_detect_limit_description")," "),t.xp6(2),t.Q6J("ngIf",e.attemptsLimit-e.attempts>0),t.xp6(1),t.Udp("color",e.project.branding.buttonTxtColor)("background",e.project.branding.buttonColor),t.xp6(1),t.hij(" ",t.lcZ(11,17,e.failedToDetectDocument?"id_scanning.retry":"restart")," ")}}let w=(()=>{class i{constructor(e,r,c,l,u,U,tt,f){this._demoService=e,this._router=r,this._splashScreenService=c,this._changeDetectorRef=l,this._translocoService=u,this._fuseMediaWatcherService=U,this.renderer=tt,this._KYCService=f,this.aspectRatio=85.6/53.98,this.videoOptions={frameRate:{ideal:30,max:30}},this._unsubscribeAll=new d.x,this.setCanvasDimensions=()=>{this.HEIGHT=this.videoElement.nativeElement.clientHeight,this.WIDTH=this.videoElement.nativeElement.clientWidth;const E=this.canvasRef.nativeElement;E.height=this.HEIGHT,E.width=this.WIDTH,this.drawRect(E.getContext("2d"))},this._ObserveDomMedia(),this.attemptsLimit=3,this.loadingCamera=!1,this.loading=!1,this.hasCameraPermissions=!1,this.failedToDetectDocument=!1,this.base64Images=void 0,this.errorFace={},this.demoData=this._demoService.getDemoData(),this.view=this._router.url.includes("/kyc")?"kyc":"demo",this.project=new M.XR({}),this.projectFlow=new M.nd({}),"kyc"===this.view&&(this.appRegistration=this._KYCService.appRegistration,this.project=this._KYCService.currentProject,this.projectFlow=this._KYCService.currentProjectFlow,this.navigation=this._KYCService.getNavigation(),this.attempts=this.appRegistration?.failedDocumentValidations?.length||0,this.attemptsLimit=this.projectFlow.onboardingSettings.document.maxAttempts),this.errorContent={message:""},this.videoOptions[this.demoData.isMobile?"width":"height"]={ideal:1080},this.videoOptions.facingMode=this.demoData.isMobile?"environment":"user",this.video={},this.rectCredential={},this.renderer.listen("window","resize",()=>{this.videoElement&&this.setCanvasDimensions()})}ngOnInit(){this._ObserveDomMedia(),this._demoService.faceapi$.subscribe(e=>{e&&this.startCamera()})}_ObserveDomMedia(){this._fuseMediaWatcherService.onMediaChange$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(({matchingAliases:e})=>{this.phoneMode=!e.includes("lg")&&!e.includes("md")&&!e.includes("sm"),this.tabletMode=!(e.includes("lg")||e.includes("md")||!e.includes("sm")),this._changeDetectorRef.markForCheck()})}detectFace(e){var r=this;return(0,h.Z)(function*(){try{const c=yield y.Qr(e,new y.d7({minConfidence:.2})).withFaceLandmarks();return c.length?(r.checkFaceTimeout=clearTimeout(r.checkFaceTimeout),r.errorFace=null,c):(r.checkFaceTimeout||(r.checkFaceTimeout=setTimeout(()=>{r.errorFace={title:r._translocoService.translate("id_scanning.face_not_found"),subtitle:r._translocoService.translate("id_scanning.face_not_found_details")}},3*r.demoData.time)),null)}catch(c){alert(c.message)}})()}startCamera(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(this.loadingCamera=!0,this._splashScreenService.show(),navigator.mediaDevices.getUserMedia({video:this.videoOptions,audio:!1}).then(e=>{this.stream=e,this.hasCameraPermissions=!0,this.loadingCamera=!1;const c=this.stream.getVideoTracks()[0].getSettings(),{width:l,height:u}=c;this.video.height=u,this.video.width=l,setTimeout(()=>{this.videoElement.nativeElement.srcObject=e,this.videoElement.nativeElement.addEventListener("loadedmetadata",()=>{this.demoData.isMobile||(this.videoElement.nativeElement.style.transform="scaleX(-1)"),this.setCanvasDimensions(),this.detectFaceInterval=setInterval(()=>this.detectFace(this.videoElement.nativeElement),this.demoData.time),this.demoData.loading=!1,this._splashScreenService.hide()})},300)}).catch(e=>{console.error("Error accessing the camera:",e),this.loadingCamera=!1,this.hasCameraPermissions=!1,this.demoData.loading=!1,this._splashScreenService.hide()})):(console.error("Browser does not support getUserMedia API."),this.hasCameraPermissions=!1)}tryAgain(e=!1){e&&this.attempts++,this.base64Images=void 0,this.failedToDetectDocument=!1,this.errorFace={},this.errorContent.message=null,this.errorResult=!1,this.startCamera()}restartDemo(){"kyc"===this.view&&(this.appRegistration.documentValidation=null),this._demoService.restart()}continue(){var e=this;return(0,h.Z)(function*(){if(e.loading)return;e.loading=!0,e.idToSend={image:e.base64Images,force:e.appRegistration?.forceUpload||!1};const r=yield e.detectFace(e.canvasToSendRef.nativeElement);if(!r.length)return e.errorResult=!0,e.errorContent={message:"face_not_found"},e.tryAgain();const c=e._demoService.getBiggestFace(r.map(u=>u.detection.box)),l=e._demoService.cutFaceIdCard(e.canvasToSendRef.nativeElement,c,e.cardIdFaceRef.nativeElement);e.demoData.loading=!0,e._splashScreenService.show(),"kyc"!==e.view?e._demoService.sendDocument({image:e.idToSend.image}).subscribe(u=>{e._demoService.setDemoDocument(u.data),localStorage.setItem("documentId",u.data._id),localStorage.setItem("idCardFaceImage",l),e.demoData.loading=!1,e._splashScreenService.hide(),e._demoService.moveToStep(3)},u=>{e.failedToDetectDocument=!0,e.demoData.loading=!1,e._splashScreenService.hide()}):e._KYCService.createDocumentValidation({...e.idToSend,documentFace:l}).subscribe({next:u=>{e.appRegistration.documentValidation=u.data.documentValidation,e._KYCService.navigateTo("next")},error:u=>{e.errorResult=!0,e.errorContent=u.error,e._splashScreenService.hide()},complete:()=>{e.demoData.loading=!1,e._splashScreenService.hide()}})})()}drawRect(e){e.clearRect(0,0,this.WIDTH,this.HEIGHT),e.fillStyle="rgba(255, 255, 255, 0.75)",e.fillRect(0,0,this.WIDTH,this.HEIGHT),e.globalCompositeOperation="destination-out";const r=this.video.height<this.video.width;this.setDimensions(r,this.HEIGHT,this.WIDTH,this.rectCredential),this.setDimensions(r,this.video.height,this.video.width,this.video),e.fillStyle="rgba(0, 0, 0, 1)",e.fillRect(this.rectCredential.x,this.rectCredential.y,this.rectCredential.rectWidth,this.rectCredential.rectHeight),e.globalCompositeOperation="source-over"}setDimensions(e,r,c,l){e?(l.y=Math.floor(.1*r),l.rectHeight=Math.floor(.8*r),l.rectWidth=Math.floor(this.aspectRatio*l.rectHeight),l.x=Math.floor((c-l.rectWidth)/2)):(l.x=Math.floor(.1*c),l.rectWidth=Math.floor(.8*c),l.rectHeight=Math.floor(this.aspectRatio*l.rectWidth),l.y=Math.floor((r-l.rectHeight)/2))}stopRecord(){this.stream&&this.stream.getTracks().forEach(e=>e.stop())}takePicture(){var e=this;return(0,h.Z)(function*(){e.detectFaceInterval=clearInterval(e.detectFaceInterval);const r=e.canvasToSendRef.nativeElement;e.setPictureInCavas(e.canvasResultRef.nativeElement,e.rectCredential,e.video),e.setPictureInCavas(r,e.video);const l=r.toDataURL("image/jpeg").replace(/^data:.*;base64,/,"");e.base64Images=l,e._changeDetectorRef.markForCheck(),e.stopRecord()})()}setPictureInCavas(e,r,c){const l=e.getContext("2d");e.width=r.rectWidth,e.height=r.rectHeight,e.style.marginLeft=`${r.x}px`,e.style.marginTop=`${r.y}px`,c||(c={x:r.x,y:r.y,rectWidth:r.rectWidth,rectHeight:r.rectHeight}),l.drawImage(this.videoElement.nativeElement,c.x,c.y,c.rectWidth,c.rectHeight,0,0,r.rectWidth,r.rectHeight)}onErrorCallback(e){window.location.reload()}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(x.e),t.Y36(n.F0),t.Y36(m.j),t.Y36(t.sBO),t.Y36(v.Vn),t.Y36(T.T),t.Y36(t.Qsj),t.Y36(D.H))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["id-scanning"]],viewQuery:function(r,c){if(1&r&&(t.Gf(A,5),t.Gf(F,5),t.Gf(W,5),t.Gf(K,5),t.Gf(B,5)),2&r){let l;t.iGM(l=t.CRH())&&(c.videoElement=l.first),t.iGM(l=t.CRH())&&(c.canvasRef=l.first),t.iGM(l=t.CRH())&&(c.canvasResultRef=l.first),t.iGM(l=t.CRH())&&(c.canvasToSendRef=l.first),t.iGM(l=t.CRH())&&(c.cardIdFaceRef=l.first)}},standalone:!0,features:[t.jDz],decls:4,vars:4,consts:[["fxLayout","column","fxLayoutAlign","center center","class","bg-white rounded-lg shadow-lg items-center w-full",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","id-scanning-error-div",4,"ngIf"],["class","mt-16 w-1/2",3,"errorContent","attempts","attemptsLimit","callback",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"bg-white","rounded-lg","shadow-lg","items-center","w-full"],["hidden","true"],["cardIdFace",""],["class","w-full height-full",4,"ngIf"],[1,"w-full","height-full"],["fxLayout","column","fxLayoutAlign","center center",1,"text-center","h-20","pb-4","sm:h-8","xs:h-8","my-2",3,"ngClass"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","w-full h-full",3,"ngClass",4,"ngIf"],[1,"text-3xl","font-bold"],[1,"text-gray-600"],["fxLayout","column","fxLayoutAlign","center center",1,"w-full","h-full",3,"ngClass"],[1,"relative","w-full"],["autoplay","",1,"absolute","top-0","left-0","w-full",3,"ngClass"],["videoElement",""],[1,"absolute","top-0","left-0"],["canvas",""],["class","captured-image","alt","",3,"src",4,"ngIf"],["toSend",""],["fxLayout","row","fxLayoutAlign","center center",1,"capture_button"],["mat-raised-button","",1,"m-4","z-index-2","capture_button",3,"disabled","click"],["mat-stroked-button","",1,"m-4","z-index-2",3,"click"],["mat-raised-button","",1,"mx-2",3,"click"],["alt","",1,"captured-image",3,"src"],["fxLayout","column","fxLayoutAlign","center center",1,"id-scanning-error-div"],["src","https://cdn.verifik.co/demo/nocameraenabled.svg","alt","",1,"id-scanning-no-camera-enabled-img"],[1,"mt-4"],[1,"mt-16","w-1/2",3,"errorContent","attempts","attemptsLimit","callback"],["alt","",1,"id-scanning-failed-document-img",3,"src"],["class","mt-4",3,"color",4,"ngIf"],["mat-raised-button","","color","primary",1,"mt-4","z-index-2","id-scanning-try-again-button",3,"click"]],template:function(r,c){1&r&&(t.YNc(0,z,4,1,"div",0),t.YNc(1,$,8,10,"div",1),t.YNc(2,X,1,4,"kyc-document-errors-display",2),t.YNc(3,_,12,19,"div",1)),2&r&&(t.Q6J("ngIf",!c.failedToDetectDocument&&c.hasCameraPermissions&&!c.loadingCamera&&!c.errorResult),t.xp6(1),t.Q6J("ngIf",!c.failedToDetectDocument&&!c.hasCameraPermissions&&!c.loadingCamera),t.xp6(1),t.Q6J("ngIf",c.errorContent.message),t.xp6(1),t.Q6J("ngIf",c.failedToDetectDocument))},dependencies:[O.o9,L.xw,L.Wh,b.oO,I.p9,p.ot,p.lW,C.ez,C.mk,C.O5,o.Cq,v.y4,v.Ot,P.M],styles:[".id-scanning-error-div[_ngcontent-%COMP%]{margin-top:20px;width:600px;background:white;height:600px;padding:16px;box-shadow:3px 3px 3px 3px #0000000d}.id-scanning-error-div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#0036e7;font-size:24px;font-weight:800;text-align:center}.id-scanning-error-div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#01236da6;font-size:16px;font-weight:300;text-align:center}.mobile-height[_ngcontent-%COMP%]{height:calc(100vh - 190px)}.id-scanning-no-camera-enabled-img[_ngcontent-%COMP%]{width:40%}.height-full[_ngcontent-%COMP%]{height:calc(100vh - 189px)}.height-full-canvas[_ngcontent-%COMP%]{height:calc(100vh - 269px)}.height-full-button[_ngcontent-%COMP%]{height:calc(100vh - 480px)}.id-scanning-failed-document-img[_ngcontent-%COMP%]{width:40%}@media (max-width: 599px){.capture_button[_ngcontent-%COMP%]{z-index:100;position:absolute;bottom:100px;left:50%;margin:0!important;transform:translate(-50%)}.id-scanning-error-container[_ngcontent-%COMP%]{position:absolute;top:30%;left:0;width:100%;height:320px!important;z-index:100;background:rgba(128,128,128,.1411764706);border-radius:25px}.captured-image[_ngcontent-%COMP%]{max-width:100%;max-height:50vh;width:auto;height:auto;display:block;margin:0 auto}}",".demo-header[_ngcontent-%COMP%]{background-color:#01236d;width:100%;height:64px;color:#fff!important}.demo-header-logo[_ngcontent-%COMP%]{width:120px;padding-left:16px;height:auto}.demo-header-action[_ngcontent-%COMP%]{padding-right:25px}.demo-header-partner-icon[_ngcontent-%COMP%]{width:40px;padding-right:10px}.demo-content[_ngcontent-%COMP%]{width:100%;height:auto}.step-one-circle[_ngcontent-%COMP%]{background:#0036e7;z-index:2;color:#fff;width:45px;height:45px;padding-top:11px;text-align:center;border-radius:50%;margin-right:25px}.disabled-background[_ngcontent-%COMP%]{background:rgba(0,54,231,.2509803922)!important}.font-bold[_ngcontent-%COMP%]{font-weight:800}.box-shadow-3px[_ngcontent-%COMP%]{box-shadow:3px 3px 3px 3px #0000000d}.grey-background[_ngcontent-%COMP%]{background-color:#80808021}.m-2[_ngcontent-%COMP%]{margin:2px}.m-4[_ngcontent-%COMP%]{margin:4px}.m-8[_ngcontent-%COMP%]{margin:8px}.mt-4[_ngcontent-%COMP%]{margin-top:4px}.mt-8[_ngcontent-%COMP%]{margin-top:8px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer!important;font-weight:800}.w-50p[_ngcontent-%COMP%]{width:50%}.text-center[_ngcontent-%COMP%]{text-align:center}.margin-left-16[_ngcontent-%COMP%]{margin-left:25px}h1[_ngcontent-%COMP%]{font-size:35px;padding-top:32px;font-weight:700;color:#0036e7}h2[_ngcontent-%COMP%]{font-size:30px;padding-top:16px;font-weight:700;color:#0036e7}@media (max-width: 599px){.demo-header-logo[_ngcontent-%COMP%]{width:120px}}"]})}return i})()},3372:(k,R,s)=>{s.d(R,{M:()=>n});var h=s(6814),C=s(1447),O=s(2296),p=s(617),I=s(8991),o=s(5879),v=s(3814);function y(m,T){1&m&&(o.TgZ(0,"div",6),o._UZ(1,"img",7),o.TgZ(2,"h1",8),o._uU(3),o.ALo(4,"transloco"),o.qZA()()),2&m&&(o.xp6(1),o.Q6J("src","https://cdn.verifik.co/demo/failedtodetectdocument@3x.png",o.LSH),o.xp6(2),o.hij(" ",o.lcZ(4,2,"id_scanning.country_not_allowed")," "))}function M(m,T){1&m&&(o.TgZ(0,"div",6),o._UZ(1,"img",7),o.TgZ(2,"h1",8),o._uU(3),o.ALo(4,"transloco"),o.qZA()()),2&m&&(o.xp6(1),o.Q6J("src","https://cdn.verifik.co/assets/biometric-services/driverLicense.svg",o.LSH),o.xp6(2),o.hij(" ",o.lcZ(4,2,"id_scanning.driver_license_not_allowed")," "))}function P(m,T){1&m&&(o.TgZ(0,"div",6),o._UZ(1,"img",7),o.TgZ(2,"h1",8),o._uU(3),o.ALo(4,"transloco"),o.qZA()()),2&m&&(o.xp6(1),o.Q6J("src","https://cdn.verifik.co/assets/biometric-services/Passport.svg",o.LSH),o.xp6(2),o.hij(" ",o.lcZ(4,2,"id_scanning.passport_not_allowed")," "))}function d(m,T){1&m&&(o.TgZ(0,"div",6),o._UZ(1,"img",7),o.TgZ(2,"h1",8),o._uU(3),o.ALo(4,"transloco"),o.qZA()()),2&m&&(o.xp6(1),o.Q6J("src","https://cdn.verifik.co/assets/biometric-services/governmentID.svg",o.LSH),o.xp6(2),o.hij(" ",o.lcZ(4,2,"id_scanning.government_id_not_allowed")," "))}function g(m,T){1&m&&(o.TgZ(0,"div",6),o._UZ(1,"img",9),o.TgZ(2,"h1",8),o._uU(3),o.ALo(4,"transloco"),o.qZA()()),2&m&&(o.xp6(1),o.Q6J("src","https://cdn.verifik.co/demo/redstop.svg",o.LSH),o.xp6(2),o.hij(" ",o.lcZ(4,2,"id_scanning.face_not_found")," "))}function t(m,T){if(1&m&&(o.TgZ(0,"div",6),o._UZ(1,"img",7),o.TgZ(2,"h1",8),o._uU(3),o.ALo(4,"transloco"),o.qZA()()),2&m){const D=o.oxw();o.xp6(1),o.Q6J("src",D.attemptsLimit-D.attempts>0?"https://cdn.verifik.co/demo/failedtodetectdocument@3x.png":"https://cdn.verifik.co/demo/redstop.svg",o.LSH),o.xp6(2),o.hij(" ",o.lcZ(4,2,D.attemptsLimit-D.attempts>0?"id_scanning.document_not_detected":"id_scanning.failed_to_detect_limit")," ")}}function x(m,T){if(1&m&&(o.TgZ(0,"p",8),o._uU(1),o.ALo(2,"transloco"),o.qZA()),2&m){const D=o.oxw();o.xp6(1),o.AsE("",o.lcZ(2,2,"id_scanning.remaining_attempts")," ",D.attemptsLimit-D.attempts,"")}}let n=(()=>{class m{ngOnInit(){}tryAgain(D){this.dialogRef&&this.dialogRef.close({addAttempt:1}),this.callback&&this.callback({addAttempt:1})}restartDemo(){this.dialogRef&&this.dialogRef.close({addAttempt:1}),this.callback&&this.callback({addAttempt:1})}static#t=this.\u0275fac=function(L){return new(L||m)};static#e=this.\u0275cmp=o.Xpm({type:m,selectors:[["kyc-document-errors-display"]],inputs:{errorContent:"errorContent",attempts:"attempts",attemptsLimit:"attemptsLimit",dialogRef:"dialogRef",callback:"callback"},standalone:!0,features:[o.jDz],decls:12,vars:10,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"id-scanning-error-div"],["fxLayout","column","fxLayoutAlign","center center",3,"ngSwitch"],["fxLayout","column","fxLayoutAlign","center center",4,"ngSwitchCase"],["fxLayout","column","fxLayoutAlign","center center",4,"ngSwitchDefault"],["class","mt-4",4,"ngIf"],["mat-raised-button","","color","primary",1,"mt-4","z-index-2","id-scanning-try-again-button",3,"click"],["fxLayout","column","fxLayoutAlign","center center"],["alt","",1,"id-scanning-failed-document-img",3,"src"],[1,"mt-4"],["alt","",1,"face_not_found",3,"src"]],template:function(L,b){1&L&&(o.TgZ(0,"div",0)(1,"div",1),o.YNc(2,y,5,4,"div",2),o.YNc(3,M,5,4,"div",2),o.YNc(4,P,5,4,"div",2),o.YNc(5,d,5,4,"div",2),o.YNc(6,g,5,4,"div",2),o.YNc(7,t,5,4,"div",3),o.qZA(),o.YNc(8,x,3,4,"p",4),o.TgZ(9,"button",5),o.NdJ("click",function(){return b.attemptsLimit-b.attempts>0?b.tryAgain(!0):b.restartDemo()}),o._uU(10),o.ALo(11,"transloco"),o.qZA()()),2&L&&(o.xp6(1),o.Q6J("ngSwitch",b.errorContent.message),o.xp6(1),o.Q6J("ngSwitchCase","country_not_allowed"),o.xp6(1),o.Q6J("ngSwitchCase","driver_license_not_allowed"),o.xp6(1),o.Q6J("ngSwitchCase","passport_not_allowed"),o.xp6(1),o.Q6J("ngSwitchCase","government_id_not_allowed"),o.xp6(1),o.Q6J("ngSwitchCase","face_not_found"),o.xp6(2),o.Q6J("ngIf",b.attemptsLimit-b.attempts>0),o.xp6(2),o.hij(" ",o.lcZ(11,8,b.attemptsLimit-b.attempts>0?"id_scanning.retry":"restart")," "))},dependencies:[h.ez,h.O5,h.RF,h.n9,h.ED,C.o9,v.xw,v.Wh,I.y4,I.Ot,p.Ps,O.ot,O.lW],styles:[".id-scanning-error-div[_ngcontent-%COMP%]{width:auto;background:white;height:600px;padding:16px}.id-scanning-error-div[_ngcontent-%COMP%]   .id-scanning-failed-document-img[_ngcontent-%COMP%]{width:45%}.id-scanning-error-div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#0036e7;font-size:24px;font-weight:800;text-align:center}.id-scanning-error-div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#01236da6;font-size:16px;font-weight:300;text-align:center}"]})}return m})()}}]);