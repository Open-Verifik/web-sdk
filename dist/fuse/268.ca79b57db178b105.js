"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[268],{8905:(T,S,n)=>{n.d(S,{e:()=>p});var i=n(5861),t=n(5619),D=n(553),y=n(1088),b=n(6799),O=n(5879),k=n(2065);let I=null,p=(()=>{class f{constructor(r,c){this._httpWrapperService=r,this.breakpointObserver=c,this._faceapi=new t.X(null),this.apiUrl=D.N.apiUrl,this.loadModels(),this.initNavigation(),this.initDemoData(),I=this,c.observe([y.u3.XSmall,y.u3.Small]).subscribe(m=>{this.demoData.isMobile=m.matches})}get faceapi$(){return this._faceapi.asObservable()}loadModels(){var r=this;return(0,i.Z)(function*(){const c=[];c.push(b.qB.ssdMobilenetv1.loadFromUri("assets/models")),c.push(b.qB.faceLandmark68Net.loadFromUri("assets/models")),yield Promise.allSettled(c),r._faceapi.next(!0)})()}getNavigation(){return this.navigation}initNavigation(){this.navigation={currentStep:1,lastStep:5}}getDemoData(){return!this.demoData.document?._id&&localStorage.getItem("document")&&(this.demoData.document=JSON.parse(localStorage.getItem("document"))),!this.demoData.extractedData.length&&localStorage.getItem("extractedData")&&(this.demoData.extractedData=JSON.parse(localStorage.getItem("extractedData"))),!this.demoData.liveness?._id&&localStorage.getItem("liveness")&&(this.demoData.liveness=JSON.parse(localStorage.getItem("liveness"))),!this.demoData.livenessResult.length&&localStorage.getItem("livenessResult")&&(this.demoData.livenessResult=JSON.parse(localStorage.getItem("livenessResult"))),!this.demoData.comparison?._id&&localStorage.getItem("comparison")&&(this.demoData.comparison=JSON.parse(localStorage.getItem("comparison"))),!this.demoData.comparisonResult.length&&localStorage.getItem("comparisonResult")&&(this.demoData.comparisonResult=JSON.parse(localStorage.getItem("comparisonResult"))),this.demoData}initDemoData(){this.demoData={loading:!1,document:{},liveness:{},comparison:{},livenessResult:[],comparisonResult:[],generalInformation:[],location:[],extractedData:[],lat:null,lng:null}}setDemoDocument(r){this.demoData.document=r,this.demoData.extractedData.push({key:"documentType",value:r.documentType}),this.demoData.extractedData.push({key:"documentNumber",value:r.documentNumber});for(const c in r.OCRExtraction)if(Object.prototype.hasOwnProperty.call(r.OCRExtraction,c)){const m=r.OCRExtraction[c];if(["documentNumber","details"].includes(c))continue;this.demoData.extractedData.push({key:c,value:m})}localStorage.setItem("document",JSON.stringify(r)),localStorage.setItem("extractedData",JSON.stringify(this.demoData.extractedData))}setDemoLiveness(r){this.demoData.liveness=r,this.demoData.liveness.result.liveness_score=parseInt(""+100*this.demoData.liveness.result.liveness_score),this.demoData.liveness.result.min_score=parseInt(""+100*this.demoData.liveness.result.min_score),this.demoData.livenessResult=[];for(const c in r.result)this.demoData.livenessResult.push({key:c,value:r.result[c]});localStorage.setItem("livenessId",r._id),localStorage.setItem("liveness",JSON.stringify(r)),localStorage.setItem("livenessResult",JSON.stringify(this.demoData.livenessResult))}setDemoCompare(r){this.demoData.comparison=r,this.demoData.comparison.result.score=parseInt(""+100*this.demoData.comparison.result.score);for(const c in r.result)this.demoData.comparisonResult.push({key:c,value:r.result[c]});localStorage.setItem("comparisonId",r._id),localStorage.setItem("comparison",JSON.stringify(r)),localStorage.setItem("comparisonResult",JSON.stringify(this.demoData.comparisonResult))}moveToStep(r){r>this.navigation.lastStep||r<=0||(this.navigation.currentStep=r,localStorage.setItem("step",`${r}`))}restart(){localStorage.clear(),this.navigation.currentStep=1,localStorage.setItem("step",`${this.navigation.currentStep}`)}getDeviceDetails(){if(this.demoData.generalInformation.length)return;const r={userAgent:navigator.userAgent,platform:navigator.platform,appName:navigator.appName,appVersion:navigator.appVersion,language:navigator.language,onLine:navigator.onLine,cookiesEnabled:navigator.cookieEnabled,doNotTrack:navigator.doNotTrack,screenResolution:`${screen.width} x ${screen.height}`,screenAvailableResolution:`${screen.availWidth} x ${screen.availHeight}`,colorDepth:screen.colorDepth,pixelDepth:screen.pixelDepth,innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight,touchSupported:"ontouchstart"in window,geolocationSupported:"geolocation"in navigator,onlineStatus:navigator.onLine?"Online":"Offline"};return this.demoData.generalInformation.push({key:"device",value:r.platform},{key:"language",value:r.language},{key:"userAgent",value:r.userAgent}),this.getLocation(),r}getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.showPosition,this.showError):console.log("Geolocation is not supported by this browser.")}showPosition(r){I.demoData.lat=r?.coords.latitude,I.demoData.lng=r?.coords.longitude,localStorage.setItem("lat",I.demoData.lat),localStorage.setItem("lng",I.demoData.lng)}showError(r){switch(r.code){case r.PERMISSION_DENIED:console.log("User denied the request for Geolocation.");break;case r.POSITION_UNAVAILABLE:console.log("Location information is unavailable.");break;case r.TIMEOUT:console.log("The request to get user location timed out.");break;case r.UNKNOWN_ERROR:console.log("An unknown error occurred.")}}reverseGeocodeWithOSM(r,c){return(0,i.Z)(function*(){const m=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${r}&lon=${c}`;try{const v=yield(yield fetch(m)).json();return v&&v.display_name?v:null}catch(g){return console.error("Error during reverse geocoding with OSM:",g),null}})()}getAddress(){var r=this;return(0,i.Z)(function*(){const c=r.demoData.lat||localStorage.getItem("lat"),m=r.demoData.lng||localStorage.getItem("lng");if(!c||!m)return null;if(r.demoData.location.length)return r.demoData.location;let g=localStorage.getItem("location");if(g)return void(r.demoData.location=JSON.parse(g));const v=yield r.reverseGeocodeWithOSM(c,m);if(v){for(const d in v.address)Object.prototype.hasOwnProperty.call(v.address,d)&&r.demoData.location.push({key:d,value:v.address[d]});return localStorage.setItem("location",JSON.stringify(r.demoData.location)),r.demoData.location}})()}requestDocument(r){return this._httpWrapperService.sendRequest("get",`${this.apiUrl}/v2/document-validations/demo/${r}`)}sendDocument(r){return this._httpWrapperService.sendRequest("post",`${this.apiUrl}/v2/ocr/scan-demo`,r)}sendSelfie(r){return this._httpWrapperService.sendRequest("post",`${this.apiUrl}/v2/face-recognition/liveness/demo`,r)}compareDocumentWithSelfie(r){return this._httpWrapperService.sendRequest("post",`${this.apiUrl}/v2/face-recognition/compare/demo`,r)}cleanVariables(){const r=["documentId","document","extractedData","liveness","livenessId","livenessResult","comparison","comparisonResult","comparisonId"];for(let c=0;c<r.length;c++){const m=r[c];localStorage.removeItem(m),this.demoData[m]&&(this.demoData[m]=Array.isArray(this.demoData[m])?[]:Object.keys(this.demoData[m])?{}:null)}}static#e=this.\u0275fac=function(c){return new(c||f)(O.LFG(k.O),O.LFG(y.Yg))};static#t=this.\u0275prov=O.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()},8268:(T,S,n)=>{n.r(S),n.d(S,{FaceComponent:()=>X});var i=n(5861),t=n(5879),D=n(6814),y=n(8645),b=n(7700),O=n(8991),k=n(2296),I=n(9036),p=n(6799),f=n(6007),x=n(5940),r=n(1944),c=n(8905),m=n(6036);const g=["video"],v=["canvas"],d=["result"],u=["toSend"],l=["credentialCanvas"];function C(_,A){if(1&_&&(t.TgZ(0,"div")(1,"div",17),t._uU(2),t.qZA(),t.TgZ(3,"div",18),t._uU(4),t.qZA()()),2&_){const e=t.oxw(2);t.xp6(2),t.Oqu(e.errorFace.title),t.xp6(2),t.Oqu(e.errorFace.subtitle)}}const H=function(_,A){return{"width.px":_,"height.px":A}};function N(_,A){if(1&_&&(t.TgZ(0,"div",5)(1,"div",6),t.YNc(2,C,5,2,"div",7),t.qZA(),t.TgZ(3,"div",8)(4,"div",9),t._UZ(5,"video",10,11)(7,"div",12,13)(9,"canvas",12,14)(11,"canvas",15,16),t.qZA()()()),2&_){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.errorFace&&!e.loadingResults),t.xp6(1),t.Q6J("ngStyle",t.WLB(14,H,e.WIDTH,e.HEIGHT)),t.xp6(1),t.Udp("width",e.WIDTH,"px")("height",e.HEIGHT,"px"),t.xp6(1),t.ekj("hidden",e.base64Image),t.xp6(2),t.ekj("hidden",e.base64Image),t.xp6(2),t.ekj("hidden",!e.base64Image),t.xp6(2),t.ekj("hidden",!0)}}let X=(()=>{class _{constructor(e,a,s,o,h){this._changeDetectorRef=e,this._sdkService=a,this._demoService=s,this._translocoService=o,this._splashScreenService=h,this._matDialog=(0,t.f3M)(b.uw),this.debugText="debug",this.OVAL={},this.loadingResults=!1,this.loadingModel=!1,this._unsubscribeAll=new y.x,this.loadingModel=!0,this.debugIndex=0,this.osInfo=this.detectOS(),this.demoData=this._demoService.getDemoData(),this.listenModeDebug(),this._changeDetectorRef.markForCheck()}listenModeDebug(){this.isActiveDebug=!!localStorage.getItem("isActiveDebug"),document.addEventListener("keydown",e=>{if(this.debugText.charAt(this.debugIndex)===e.key.toLowerCase())return 3===this.debugIndex&&(this.isActiveDebug=!this.isActiveDebug,localStorage.setItem("isActiveDebug",this.isActiveDebug?"true":""),this._changeDetectorRef.markForCheck()),this.debugIndex++;this.debugIndex=0})}stopRecord(){this.detectFaceInterval&&clearInterval(this.detectFaceInterval),this.stream&&this.stream.getTracks().forEach(e=>e.stop())}ngOnInit(){var e=this;return(0,i.Z)(function*(){e._splashScreenService.show(),e.idCardImage=localStorage.getItem("idCard"),e.errorFace=null,e.loadingResults=!1,e.base64Image=null,yield e.loadImages(),e._demoService.faceapi$.subscribe(function(){var a=(0,i.Z)(function*(s){e.loadingModel=!s,s&&(yield e.startAsyncVideo())});return function(s){return a.apply(this,arguments)}}())})()}restart(){var e=this;return(0,i.Z)(function*(){e.completeResults(),yield e.startAsyncVideo()})()}loadImages(){var e=this;return(0,i.Z)(function*(){e.left=new Image,e.left.crossOrigin="anonymous",e.left.src="https://cdn.verifik.co/web-sdk/images/left.png",e.right=new Image,e.right.crossOrigin="anonymous",e.right.src="https://cdn.verifik.co/web-sdk/images/right.png",e.up=new Image,e.up.crossOrigin="anonymous",e.up.src="https://cdn.verifik.co/web-sdk/images/up.png",e.down=new Image,e.down.crossOrigin="anonymous",e.down.src="https://cdn.verifik.co/web-sdk/images/down.png"})()}detectFaceBiggest(e){var a=this;return(0,i.Z)(function*(){const s=document.getElementById("credential"),o=yield p.Qr(s,new p.d7({minConfidence:e})).withFaceLandmarks();if(e<=.1)return;if(!o.length)return void a.detectFaceBiggest(e-.1);let w,h=0;for(const F of o){const B=F.detection.box,U=B.width*B.height;U>h&&(w=F.detection,h=U)}const M=w.box;let E=Math.ceil(3*M.width),R=Math.ceil(3*M.height),W=Math.floor(M.x)-M.width,L=Math.floor(M.y)-M.height;E>s.naturalWidth&&(E=s.naturalWidth,R=s.naturalHeight,W=0,L=0);const P=a.credentialRef.nativeElement,Y=P.getContext("2d");P.height=R,P.width=E,Y.drawImage(s,W,L,E,R,0,0,E,R),a.faceIdCard=P.toDataURL("image/jpeg").replace(/^data:.*;base64,/,"")})()}startAsyncVideo(){var e=this;return(0,i.Z)(function*(){try{e.stream=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"user",height:{ideal:720}},audio:!1}),e.detectFaceBiggest(.9),e.videoInput=e.video.nativeElement,e.videoInput.srcObject=e.stream,e.videoInput.style.transform="scaleX(-1)",e.canvasRef.nativeElement.style.transform="scaleX(-1)";const s=e.stream.getVideoTracks()[0].getSettings(),{width:o,height:h}=s;e.videoDimensions={height:h,width:o},setTimeout(()=>{e.video||e.canvas?setTimeout(()=>{e.HEIGHT=e.videoInput.clientHeight,e.WIDTH=e.videoInput.clientWidth,e.videoCenterX=e.WIDTH/2,e.videoCenterY=e.HEIGHT/2,e.marginY=.04*e.HEIGHT,e.marginX=.8*e.marginY,e.OVAL.radiusY=.42*e.HEIGHT,e.OVAL.radiusX=.75*e.OVAL.radiusY,2*e.OVAL.radiusX>=e.WIDTH&&(e.OVAL.radiusX=.48*e.WIDTH,e.OVAL.radiusY=e.OVAL.radiusX/.75),e.displaySize={width:e.WIDTH,height:e.HEIGHT},e.demoData.loading=!1,e._splashScreenService.hide(),e.detectFaces(),e._changeDetectorRef.markForCheck()},300):e.stopRecord()},300)}catch(a){alert(`${a.message}`),console.error("SHOW ERROR")}})()}detectFaces(){var e=this;return(0,i.Z)(function*(){yield e.setConfigCanvas(),e.detectFaceInterval=setInterval((0,i.Z)(function*(){const a=yield p.Qr(e.videoInput,new p.d7).withFaceLandmarks(),s=e.canvas.getContext("2d");a.length>0&&(e.lastFace=a[0],e.errorFace=null,e.drawFaceAndCenter(a,s),e.isFaceCentered(e.lastFace.landmarks.getNose()[3]),e.isFaceClose(e.lastFace.landmarks),e.drawStatusOval(s,!e.errorFace?.title),e.errorFace||e.captureBase64Image()),e._changeDetectorRef.markForCheck()}),e.demoData.isMobile?500:300)})()}manualCapture(){this.takePicture()}setConfigCanvas(){var e=this;return(0,i.Z)(function*(){e.canvas||(e.canvas=yield p.Jd(e.videoInput),e.canvasEl=e.canvasRef.nativeElement,e.canvasEl.appendChild(e.canvas),e.canvas.setAttribute("id","canvas"),p.JF(e.canvas,e.displaySize));const a=e.canvas.getContext("2d");e.drawOvalCenterAndMask(a)})()}drawFaceAndCenter(e,a){const s=p._C(e,this.displaySize);this.drawOvalCenterAndMask(a),this.isActiveDebug&&(a.strokeStyle="red",a.lineWidth=4,a.strokeRect(this.videoCenterX-this.marginX,this.videoCenterY,2*this.marginX,2*this.marginY),p.ii.drawFaceLandmarks(this.canvas,s),p.ii.drawFaceExpressions(this.canvas,s),new p.ii.DrawBox(e[0].detection.box,{label:`${e[0].gender.toUpperCase()} | ${Math.round(e[0].age)} years old`}).draw(this.canvas))}drawOvalCenterAndMask(e){e.clearRect(0,0,this.canvas.width,this.canvas.height),e.fillStyle="rgba(255, 255, 255, 0.75)",e.fillRect(0,0,this.canvas.width,this.canvas.height),e.globalCompositeOperation="destination-out",e.fillStyle="rgba(255, 255, 255, 1)",e.beginPath(),e.ellipse(this.videoCenterX,this.videoCenterY,this.OVAL.radiusX,this.OVAL.radiusY,0,0,2*Math.PI),e.fill(),e.closePath(),e.globalCompositeOperation="source-over"}drawText(e,a,s,o){e.font="30px Arial",e.textAlign="center";const h=e.measureText(a);e.fillStyle="black",e.fillRect(s-h.width/2,o-30-10,h.width+2,60),e.fillStyle="white",e.fillText(a,s,o)}drawStatusOval(e,a){e.beginPath(),e.ellipse(this.videoCenterX,this.videoCenterY,this.OVAL.radiusX,this.OVAL.radiusY,0,0,2*Math.PI),e.lineWidth=5,e.strokeStyle=a?"green":"red",e.stroke(),e.closePath(),a||(this.errorFace.canvas?.includes("\u2191")&&e.drawImage(this.up,this.videoCenterX-20,this.videoCenterY-this.OVAL.radiusY+10,40,40),this.errorFace.canvas?.includes("\u2193")&&e.drawImage(this.down,this.videoCenterX-20,this.videoCenterY+this.OVAL.radiusY-50,40,40),this.errorFace.canvas?.includes("\u2192")&&e.drawImage(this.right,this.videoCenterX+this.OVAL.radiusX-50,this.videoCenterY-20,40,40),this.errorFace.canvas?.includes("\u2190")&&e.drawImage(this.left,this.videoCenterX-this.OVAL.radiusX+10,this.videoCenterY-20,40,40)),this._changeDetectorRef.markForCheck()}isFaceCentered(e){const a=e.x/this.videoDimensions.width*this.WIDTH,s=e.y/this.videoDimensions.height*this.HEIGHT;if(!(a>this.videoCenterX-this.marginX&&a<this.videoCenterX+this.marginX&&s>this.videoCenterY&&s<this.videoCenterY+2*this.marginY)){let h="";(a<this.videoCenterX-this.marginX||a>this.videoCenterX+this.marginX)&&(h+=` ${a<this.videoCenterX-this.marginX?"\u2192":"\u2190"} `),(s<this.videoCenterY||s>this.videoCenterY+2*this.marginY)&&(h+=` ${s<this.videoCenterY?"\u2191":"\u2193"}  `),this.errorFace={title:this._translocoService.translate("liveness.center_yor_face"),subtitle:this._translocoService.translate("liveness.center_your_face_subtitle"),canvas:h}}}isFaceClose(e){e.imageHeight*e.imageWidth/(4*this.OVAL.radiusX*this.videoInput.height)<(this.demoData.isMobile?.5:.25)&&(this.errorFace={title:this._translocoService.translate("liveness.get_closer"),subtitle:this._translocoService.translate("liveness.get_closer_subtitle")})}captureBase64Image(){this.saveImageBase64Intent||(this.saveImageBase64Intent=setTimeout(()=>{this.errorFace&&(this.saveImageBase64Intent=clearTimeout(this.saveImageBase64Intent)),this.takePicture()},1500))}takePicture(){var e=this;return(0,i.Z)(function*(){const a=e.canvasToSendRef.nativeElement,o={rectHeight:e.HEIGHT,rectWidth:2.8*e.OVAL.radiusX,y:0,x:e.videoCenterX-1.4*e.OVAL.radiusX},h={rectHeight:e.videoDimensions.height,rectWidth:o.rectWidth/e.WIDTH*e.videoDimensions.width,y:0,x:o.x/e.WIDTH*e.videoDimensions.width};e.setPictureInCavas(e.canvasResultRef.nativeElement,o,h),e.setPictureInCavas(a,h),e.base64Image=a.toDataURL("image/jpeg").replace(/^data:.*;base64,/,""),e.stopRecord(),yield e.liveness()})()}setPictureInCavas(e,a,s){const o=e.getContext("2d");e.width=a.rectWidth,e.height=a.rectHeight,e.style.marginLeft=`${a.x}px`,e.style.marginTop=`${a.y}px`,s||(s={x:a.x,y:a.y,rectWidth:a.rectWidth,rectHeight:a.rectHeight}),o.drawImage(this.video.nativeElement,s.x,s.y,s.rectWidth,s.rectHeight,0,0,a.rectWidth,a.rectHeight)}detectOS(){const e=window.navigator.userAgent.toLowerCase();return/android/.test(e)?"ANDROID":/iphone|ipad|ipod/.test(e)?"IOS":"DESKTOP"}liveness(){this.loadingResults||(this.loadingResults=!0,this.demoData.loading=!0,this._splashScreenService.show(),this._sdkService.livenessDemo({image:this.base64Image,os:this.osInfo}).subscribe(a=>{this.errorResult=null,this.demoData.loading=!1,this._demoService.setDemoLiveness(a.data),this._compareWithDocument({search_mode:"ACCURATE",gallery:[this.faceIdCard||this.demoData.document.url],probe:[this.base64Image]})},a=>{this.demoData.loading=!1,this._splashScreenService.hide(),this.retryLivenessModal(a.error?.message)}))}_compareWithDocument(e){this._demoService.compareDocumentWithSelfie(e).subscribe(a=>{this.completeResults(),this._demoService.setDemoCompare(a.data),this._demoService.moveToStep(5)},a=>{this.demoData.loading=!1,this._splashScreenService.hide(),alert(`_compareWithDocument: ${JSON.stringify(a)}`)})}retryLivenessModal(e){const a={title:this._translocoService.translate("liveness.liveness_failed"),message:this._translocoService.translate("liveness.liveness_error_message",{error:e}),icon:{show:!0,name:"heroicons_outline:exclamation-triangle",color:"warn"},actions:{confirm:{show:!0,label:this._translocoService.translate("confirm"),color:"primary"},cancel:{show:!0,label:this._translocoService.translate("cancel")}},dismissible:!1};this._matDialog.open(I.u,{autoFocus:!1,disableClose:!0,panelClass:"fuse-confirmation-dialog-panel",data:a}).afterClosed().subscribe(s=>{if("confirmed"===s)return this.restart();this._demoService.restart()})}completeResults(){this.errorFace=null,this.loadingResults=!1,this.base64Image=null,this.errorResult||this.stopRecord(),this.saveImageBase64Intent&&(this.saveImageBase64Intent=clearTimeout(this.saveImageBase64Intent)),this.demoData.loading=!1,this._splashScreenService.hide(),this._changeDetectorRef.markForCheck()}ngOnDestroy(){this._unsubscribeAll.next(null),this.loadingResults=!1,this.video=void 0,this.detectFaceInterval&&this.stopRecord()}static#e=this.\u0275fac=function(a){return new(a||_)(t.Y36(t.sBO),t.Y36(r.J),t.Y36(c.e),t.Y36(O.Vn),t.Y36(m.j))};static#t=this.\u0275cmp=t.Xpm({type:_,selectors:[["app-face"]],viewQuery:function(a,s){if(1&a&&(t.Gf(g,5),t.Gf(v,5),t.Gf(d,5),t.Gf(u,5),t.Gf(l,5)),2&a){let o;t.iGM(o=t.CRH())&&(s.video=o.first),t.iGM(o=t.CRH())&&(s.canvasRef=o.first),t.iGM(o=t.CRH())&&(s.canvasResultRef=o.first),t.iGM(o=t.CRH())&&(s.canvasToSendRef=o.first),t.iGM(o=t.CRH())&&(s.credentialRef=o.first)}},standalone:!0,features:[t.jDz],decls:5,vars:2,consts:[["hidden","true"],["credentialCanvas",""],["id","credential","hidden","true",3,"src"],["fxLayout","column","fxLayoutAlign","center center",1,"min-h-[60vh]","justify-center","p-4","sm:p-1","xs:p-1","w-full"],["fxLayout","column","fxLayoutAlign","center center","class","justify-center w-full",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"justify-center","w-full"],["fxLayout","column","fxLayoutAlign","center center",1,"justify-center","text-center","h-20","sm:h-8","xs:h-8","my-2"],[4,"ngIf"],[1,"relative","w-full",3,"ngStyle"],[1,"relative","w-full"],["autoplay","",1,"absolute","top-0","left-0","oval-video","w-full","max-h-[80vh]"],["video",""],[1,"absolute","top-0","left-0","oval-video"],["canvas",""],["result",""],[1,"absolute","top-0","left-0"],["toSend",""],[1,"text-3xl","font-bold"],[1,"text-gray-600"]],template:function(a,s){1&a&&(t._UZ(0,"canvas",0,1)(2,"img",2),t.TgZ(3,"div",3),t.YNc(4,N,13,17,"div",4),t.qZA()),2&a&&(t.xp6(2),t.Q6J("src",s.idCardImage,t.LSH),t.xp6(2),t.Q6J("ngIf",!s.loadingModel))},dependencies:[D.ez,D.O5,D.PC,b.Is,O.y4,k.ot,f.Cv,x.Cq],styles:['mat-stepper[_ngcontent-%COMP%]{width:100%}.scan[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;flex-direction:column}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]{content:"";position:relative;width:130px;height:200px;background:url(https://cdn.verifik.co/web-sdk/images/face.png);background-size:130px 200px}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:url(https://cdn.verifik.co/web-sdk/images/smoothed-face.png);background-size:130px 200px;animation:_ngcontent-%COMP%_animate 2s ease-in-out infinite}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:100%;height:8px;background:#01236d;border-radius:8px;filter:drop-shadow(0 0 20px #01236d) drop-shadow(0 0 60px #01236d);animation:_ngcontent-%COMP%_animate_line 2s ease-in-out infinite}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]{position:absolute;inset:0}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:130px;height:200px;background:url(https://cdn.verifik.co/web-sdk/images/points-face.png);background-size:130px 200px;animation:_ngcontent-%COMP%_face_points 2s ease-in-out infinite}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:130px;height:200px;background:url(https://cdn.verifik.co/web-sdk/images/lines-points-face.png);background-size:130px 200px;animation:_ngcontent-%COMP%_face_points_lines 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_face_points_lines{0%,to{height:0%}50%{height:100%}}@keyframes _ngcontent-%COMP%_face_points{0%,25%,to{height:0%}50%{height:100%}}@keyframes _ngcontent-%COMP%_animate{0%,to{height:0%}50%{height:100%}}@keyframes _ngcontent-%COMP%_animate_line{0%,to{top:0%;opacity:.8}50%{top:100%;opacity:.8}}.back-biometric-animation[_ngcontent-%COMP%]{background:black;width:100%;height:100%}.oval-video[_ngcontent-%COMP%]{border-radius:25px!important;overflow:hidden;max-width:100%}video[_ngcontent-%COMP%]{object-fit:cover}.medium[_ngcontent-%COMP%]   .mat-progress-bar-fill[_ngcontent-%COMP%]:after{background-color:#eab417!important}.failed[_ngcontent-%COMP%]   .mat-progress-bar-fill[_ngcontent-%COMP%]:after{background-color:#f20505!important}.good[_ngcontent-%COMP%]   .mat-progress-bar-fill[_ngcontent-%COMP%]:after{background-color:green!important}']})}return _})()},5940:(T,S,n)=>{n.d(S,{Cq:()=>m,Ou:()=>r});var i=n(5879),t=n(3680),D=n(2495),y=n(6814);const b=["determinateSpinner"];function O(g,v){if(1&g&&(i.O4$(),i.TgZ(0,"svg",11),i._UZ(1,"circle",12),i.qZA()),2&g){const d=i.oxw();i.uIk("viewBox",d._viewBox()),i.xp6(1),i.Udp("stroke-dasharray",d._strokeCircumference(),"px")("stroke-dashoffset",d._strokeCircumference()/2,"px")("stroke-width",d._circleStrokeWidth(),"%"),i.uIk("r",d._circleRadius())}}const k=(0,t.pj)(class{constructor(g){this._elementRef=g}},"primary"),I=new i.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function p(){return{diameter:f}}}),f=100;let r=(()=>{class g extends k{constructor(d,u,l){super(d),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=f,this._noopAnimations="NoopAnimations"===u&&!!l&&!l._forceAnimations,l&&(l.color&&(this.color=this.defaultColor=l.color),l.diameter&&(this.diameter=l.diameter),l.strokeWidth&&(this.strokeWidth=l.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(d){this._value=Math.max(0,Math.min(100,(0,D.su)(d)))}get diameter(){return this._diameter}set diameter(d){this._diameter=(0,D.su)(d)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(d){this._strokeWidth=(0,D.su)(d)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const d=2*this._circleRadius()+this.strokeWidth;return`0 0 ${d} ${d}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static#e=this.\u0275fac=function(u){return new(u||g)(i.Y36(i.SBq),i.Y36(i.QbO,8),i.Y36(I))};static#t=this.\u0275cmp=i.Xpm({type:g,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(u,l){if(1&u&&i.Gf(b,5),2&u){let C;i.iGM(C=i.CRH())&&(l._determinateCircle=C.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:16,hostBindings:function(u,l){2&u&&(i.uIk("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===l.mode?l.value:null)("mode",l.mode),i.Udp("width",l.diameter,"px")("height",l.diameter,"px")("--mdc-circular-progress-size",l.diameter+"px")("--mdc-circular-progress-active-indicator-width",l.diameter+"px"),i.ekj("_mat-animation-noopable",l._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===l.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[i.qOj],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(u,l){if(1&u&&(i.YNc(0,O,2,8,"ng-template",null,0,i.W1O),i.TgZ(2,"div",1,2),i.O4$(),i.TgZ(4,"svg",3),i._UZ(5,"circle",4),i.qZA()(),i.kcU(),i.TgZ(6,"div",5)(7,"div",6)(8,"div",7),i.GkF(9,8),i.qZA(),i.TgZ(10,"div",9),i.GkF(11,8),i.qZA(),i.TgZ(12,"div",10),i.GkF(13,8),i.qZA()()()),2&u){const C=i.MAs(1);i.xp6(4),i.uIk("viewBox",l._viewBox()),i.xp6(1),i.Udp("stroke-dasharray",l._strokeCircumference(),"px")("stroke-dashoffset",l._strokeDashOffset(),"px")("stroke-width",l._circleStrokeWidth(),"%"),i.uIk("r",l._circleRadius()),i.xp6(4),i.Q6J("ngTemplateOutlet",C),i.xp6(2),i.Q6J("ngTemplateOutlet",C),i.xp6(2),i.Q6J("ngTemplateOutlet",C)}},dependencies:[y.tP],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{--mdc-circular-progress-active-indicator-width:4px;--mdc-circular-progress-size:48px}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner .mdc-circular-progress{width:var(--mdc-circular-progress-size) !important;height:var(--mdc-circular-progress-size) !important}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0})}return g})(),m=(()=>{class g{static#e=this.\u0275fac=function(u){return new(u||g)};static#t=this.\u0275mod=i.oAB({type:g});static#r=this.\u0275inj=i.cJS({imports:[y.ez,t.BQ]})}return g})()}}]);