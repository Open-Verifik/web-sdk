"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[810],{5810:(A,b,n)=>{n.r(b),n.d(b,{default:()=>lt});var v=n(3403),x=n(4748),m=n(553),f=n(8533),w=n(6814),_=n(1447),C=n(8991),c=n(6223),h=n(2296),a=n(5986),s=n(1043),u=n(617),d=n(4516),T=n(5940),R=n(4913),j=n(738),Z=n(6321),S=n(4825),L=n(6676),U=n.n(L),I=n(6420),t=n(5879),k=n(8340),q=n(6036),y=n(3814);const P=["otpNgForm"],F=function(e){return{destination:e}};function E(e,l){if(1&e&&(t.TgZ(0,"div",22),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const i=t.oxw(2);t.xp6(1),t.hij(" ",t.xi3(2,1,"signup.verify_code_sent",t.VKq(4,F,i.currentValidation.email||i.currentValidation.countryCode+" "+i.currentValidation.phone))," ")}}function Y(e,l){1&e&&(t.TgZ(0,"div",22),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"confirmation.pick_phone_gateway_title")," "))}const N=function(e){return["/sign-up",e]};function O(e,l){if(1&e&&(t.TgZ(0,"div",23)(1,"div"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"a",24),t._uU(5),t.ALo(6,"transloco"),t.qZA()()),2&e){const i=t.oxw(2);t.Udp("color",i.project.branding.txtColor),t.xp6(2),t.Oqu(t.lcZ(3,5,"login.no_account")),t.xp6(2),t.Q6J("routerLink",t.VKq(9,N,i.project._id)),t.xp6(1),t.Oqu(t.lcZ(6,7,"login.register_here_link"))}}function J(e,l){if(1&e&&(t.TgZ(0,"fuse-alert",25),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const i=t.oxw(2);t.Q6J("appearance","outline")("showIcon",!1)("type",i.alert.type)("@shake","error"===i.alert.type),t.xp6(1),t.hij(" ",t.lcZ(2,5,i.alert.message)," ")}}function K(e,l){1&e&&t._UZ(0,"mat-icon",32),2&e&&t.Q6J("svgIcon","heroicons_solid:eye")}function M(e,l){1&e&&t._UZ(0,"mat-icon",32),2&e&&t.Q6J("svgIcon","heroicons_solid:eye-slash")}function G(e,l){1&e&&(t.TgZ(0,"mat-error",33),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"login.required_otp")," "))}function Q(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"mat-form-field",26)(1,"mat-label"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"input",27,28),t.NdJ("input",function(o){t.CHM(i);const p=t.oxw(2);return t.KtG(p.onInput(o))})("keyup",function(){t.CHM(i);const o=t.oxw(2);return t.KtG(o.checkSixDigits())}),t.qZA(),t.TgZ(6,"button",29),t.NdJ("click",function(){t.CHM(i);const o=t.MAs(5);return t.KtG(o.type="password"===o.type?"text":"password")}),t.YNc(7,K,1,1,"mat-icon",30),t.YNc(8,M,1,1,"mat-icon",30),t.qZA(),t.YNc(9,G,3,3,"mat-error",31),t.qZA()}if(2&e){const i=t.MAs(5),r=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,5,"login.email_otp")),t.xp6(2),t.Q6J("formControlName","otp"),t.xp6(3),t.Q6J("ngIf","password"===i.type),t.xp6(1),t.Q6J("ngIf","text"===i.type),t.xp6(1),t.Q6J("ngIf",r.otpForm.get("otp").hasError("required"))}}function D(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(o){t.CHM(i);const p=t.oxw(3);return t.KtG(p.sendPhoneOTP(o,"sms"))}),t.TgZ(1,"span"),t._uU(2," SMS "),t.qZA()()}if(2&e){const i=t.oxw(3);t.Udp("color",i.project.branding.buttonTxtColor)("background",i.project.branding.buttonColor),t.ekj("col-span-2","both"!==i.phoneGateway),t.Q6J("disabled",!i.canSendOTP())}}function W(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(o){t.CHM(i);const p=t.oxw(3);return t.KtG(p.sendPhoneOTP(o,"whatsapp"))}),t.TgZ(1,"span"),t._uU(2," Whatsapp "),t.qZA()()}if(2&e){const i=t.oxw(3);t.Udp("color",i.project.branding.buttonTxtColor)("background",i.project.branding.buttonColor),t.ekj("col-span-2","both"!==i.phoneGateway),t.Q6J("disabled",!i.canSendOTP())}}function $(e,l){if(1&e&&(t.TgZ(0,"div",34),t.YNc(1,D,3,7,"button",35),t.YNc(2,W,3,7,"button",36),t.qZA()),2&e){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf","sms"===i.phoneGateway||"both"===i.phoneGateway),t.xp6(1),t.Q6J("ngIf","whatsapp"===i.phoneGateway||"both"===i.phoneGateway)}}function H(e,l){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e){const i=t.oxw(3);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"confirmation.remaining_time")," ",i.remainingTime," ")}}function B(e,l){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"confirmation.resend_code_part_one")))}function z(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"a",42),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(3);return t.KtG(o._initValidations())}),t._uU(1),t.ALo(2,"transloco"),t.qZA()}2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"confirmation.resend_code_part_two")))}function X(e,l){if(1&e&&(t.TgZ(0,"div",39),t.YNc(1,H,3,4,"span",40),t.YNc(2,B,3,3,"span",40),t.YNc(3,z,3,3,"a",41),t.qZA()),2&e){const i=t.oxw(2);t.xp6(1),t.Q6J("ngIf","Expired"!==i.remainingTime),t.xp6(1),t.Q6J("ngIf","Expired"===i.remainingTime),t.xp6(1),t.Q6J("ngIf","Expired"===i.remainingTime)}}function tt(e,l){if(1&e&&(t.TgZ(0,"div",6)(1,"div",7),t._UZ(2,"img",8),t.qZA(),t.TgZ(3,"div",9)(4,"div",10)(5,"div",11),t.YNc(6,E,3,6,"div",12),t.YNc(7,Y,3,3,"div",12),t.YNc(8,O,7,11,"div",13),t.YNc(9,J,3,7,"fuse-alert",14),t.TgZ(10,"form",15,16),t.YNc(12,Q,10,7,"mat-form-field",17),t.qZA(),t.YNc(13,$,3,2,"div",18),t.YNc(14,X,4,3,"div",19),t.TgZ(15,"div",20)(16,"small"),t._uU(17),t.ALo(18,"transloco"),t.qZA(),t._UZ(19,"languages",21),t.qZA()()()()()),2&e){const i=t.oxw();t.xp6(2),t.Q6J("src",i.project.branding.logo,t.LSH),t.xp6(4),t.Q6J("ngIf",i.currentValidation.email||i.currentValidation.phone&&"both"!==i.phoneGateway),t.xp6(1),t.Q6J("ngIf",i.currentValidation.phone&&"both"===i.phoneGateway),t.xp6(1),t.Q6J("ngIf",i.kycProjectFlow),t.xp6(1),t.Q6J("ngIf",i.showAlert),t.xp6(1),t.Q6J("formGroup",i.otpForm),t.xp6(2),t.Q6J("ngIf",i.currentValidation.email||i.currentValidation.phone&&"both"!==i.phoneGateway),t.xp6(1),t.Q6J("ngIf",!i.loading&&i.currentValidation.phone&&"both"===i.phoneGateway),t.xp6(1),t.Q6J("ngIf",i.remainingTime),t.xp6(3),t.hij(" ",t.lcZ(18,11,"powered_by_verifik")," "),t.xp6(2),t.Q6J("colorText",i.project.branding.txtColor)}}function it(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(3);return t.KtG(o.continueWithoutKYC())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"transloco"),t.qZA()()}if(2&e){const i=t.oxw(3);t.xp6(1),t.Udp("color",i.project.branding.txtColor),t.xp6(1),t.hij("",t.lcZ(3,3,"add_biometrics.verifik_dismiss")," ")}}function et(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"div",46)(1,"div",47),t._UZ(2,"img",48),t.TgZ(3,"h2",49),t._uU(4),t.ALo(5,"transloco"),t.qZA(),t.TgZ(6,"h3",50),t._uU(7),t.ALo(8,"transloco"),t.qZA()(),t.TgZ(9,"div",51)(10,"button",52),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(2);return t.KtG(o.startKYC())}),t.TgZ(11,"span"),t._uU(12),t.ALo(13,"transloco"),t.qZA()(),t.YNc(14,it,4,5,"button",53),t.qZA()()}if(2&e){const i=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,8,"add_biometrics.verifik_title")," "),t.xp6(3),t.Oqu(t.lcZ(8,10,"add_biometrics.verifik_content")),t.xp6(3),t.Udp("color",i.project.branding.buttonTxtColor)("background",i.project.branding.buttonColor),t.xp6(2),t.hij("",t.lcZ(13,12,"add_biometrics.verifik_button")," "),t.xp6(2),t.Q6J("ngIf",i.showSkipDoingKYC)}}function ot(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(3);return t.KtG(o.continueWithoutKYC())}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"transloco"),t.qZA()()}if(2&e){const i=t.oxw(3);t.xp6(1),t.Udp("color",i.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(3,3,"add_biometrics.dismiss")," ")}}function nt(e,l){if(1&e){const i=t.EpF();t.TgZ(0,"div",55)(1,"div",47)(2,"h1",56),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t._UZ(5,"img",57)(6,"img",58),t.TgZ(7,"h2",59),t._uU(8),t.ALo(9,"transloco"),t.qZA(),t.TgZ(10,"h3",60),t._uU(11),t.ALo(12,"transloco"),t.qZA()(),t.TgZ(13,"div",51)(14,"button",52),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(2);return t.KtG(o.startKYC())}),t.TgZ(15,"span"),t._uU(16),t.ALo(17,"transloco"),t.qZA()(),t.YNc(18,ot,4,5,"button",53),t.qZA()()}if(2&e){const i=t.oxw(2);t.xp6(2),t.Udp("color",i.project.branding.titleColor),t.xp6(1),t.AsE(" ",t.lcZ(4,14,"signup.kyc_start_popup.project_title")," ",i.project.name," "),t.xp6(4),t.Udp("color",i.project.branding.txtColor),t.xp6(1),t.hij(" ",t.lcZ(9,16,"signup.kyc_start_popup.title")," "),t.xp6(3),t.Oqu(t.lcZ(12,18,"signup.kyc_start_popup.content")),t.xp6(3),t.Udp("color",i.project.branding.buttonTxtColor)("background",i.project.branding.buttonColor),t.xp6(2),t.hij("",t.lcZ(17,20,"add_biometrics.button")," "),t.xp6(2),t.Q6J("ngIf",i.showSkipDoingKYC)}}function rt(e,l){if(1&e&&(t.TgZ(0,"div",43),t.YNc(1,et,15,14,"div",44),t.YNc(2,nt,19,22,"div",45),t.TgZ(3,"div",20)(4,"small"),t._uU(5),t.ALo(6,"transloco"),t.qZA(),t._UZ(7,"languages",21),t.qZA()()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.isVerifikProject),t.xp6(1),t.Q6J("ngIf",!i.isVerifikProject),t.xp6(3),t.hij(" ",t.lcZ(6,4,"powered_by_verifik")," "),t.xp6(2),t.Q6J("colorText",i.project.branding.txtColor)}}function at(e,l){1&e&&(t.TgZ(0,"div",61)(1,"div",46)(2,"div",62),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"div",23)(6,"div"),t._uU(7),t.ALo(8,"transloco"),t.qZA()()()()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"signup.project_flow_not_set")," "),t.xp6(4),t.Oqu(t.lcZ(8,4,"signup.project_flow_not_set_description")))}function st(e,l){if(1&e&&(t.TgZ(0,"div",63)(1,"div",46)(2,"div",62),t._uU(3),t.ALo(4,"transloco"),t.qZA()()()),2&e){const i=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,1,"signup.error_"+i.errorContent.message)," ")}}function ct(e,l){if(1&e&&(t.TgZ(0,"div",64),t._UZ(1,"img",65),t.qZA()),2&e){const i=t.oxw();t.Udp("background",i.project.branding.rightBackgroundColor),t.s9C("fxLayoutAlign",i.project.branding.rightImagePosition||"end end"),t.xp6(1),t.Q6J("src",i.project.branding.rightImage,t.LSH)}}const lt=[{path:":id",component:(()=>{class e{constructor(i,r,o,p,g,dt){this._KYCService=i,this._splashScreenService=r,this._activatedRoute=o,this._changeDetectorRef=p,this._router=g,this._formBuilder=dt,this._splashScreenService.show()}ngOnInit(){this._initForm(),this._activatedRoute.params.subscribe(i=>{this.token=this._router.url.split("?token=")[1],localStorage.setItem("accessToken",this.token),this._requestAppRegistration()})}_requestAppRegistration(){this._KYCService.getAppRegistration({populates:["project","projectFlow","emailValidation","phoneValidation"]}).subscribe({next:i=>{this.appRegistration=i.data,this.project=new f.XR(this.appRegistration.project),this.projectFlow=new f.nd(this.appRegistration.projectFlow),this.isVerifikProject=this.project._id===m.N.verifikProject||this.project._id===m.N.sandboxProject;const r=this.projectFlow.onboardingSettings.steps;this.showSkipDoingKYC=!["basicInformation","document","form","liveness"].some(p=>"mandatory"===r[p])},error:i=>{this.errorContent=i.error,this._splashScreenService.hide()},complete:()=>{this._splashScreenService.hide(),this._initValidations()}})}_initValidations(){this.currentValidation=null,setTimeout(()=>{this._initEmailValidation(),this._initPhoneValidation(),this._completeAppRegistration(),this._changeDetectorRef.detectChanges()},500)}_initEmailValidation(){"mailgun"===this.projectFlow.onboardingSettings.signUpForm.emailGateway&&"validated"!==this.appRegistration.emailValidation?.status&&(this.loading||(this.loading=!0,this._splashScreenService.show(),this._KYCService.sendEmailValidation(this.appRegistration.email).subscribe({next:i=>{this.currentValidation=i.data,this._linkValidation(),this.startCountdown(),this.loading=!1,this._splashScreenService.hide()},error:i=>{this.errorContent=i.error,this._splashScreenService.hide()},complete:()=>{}})))}_initPhoneValidation(i){if(this.phoneGateway=i||this.projectFlow.onboardingSettings.signUpForm.phoneGateway,"both"===this.phoneGateway&&!this.currentValidation&&(this.currentValidation=this.appRegistration.phoneValidation?"validated"!==this.appRegistration.phoneValidation?.status?this.appRegistration.phoneValidation:null:{_id:"new",countryCode:this.appRegistration.countryCode,phone:this.appRegistration.phone},this.remainingTime&&(this.remainingTime=null,this.countdownSubscription.unsubscribe())),["whatsapp","sms"].includes(this.phoneGateway)&&"validated"!==this.appRegistration.phoneValidation?.status&&!this.loading)return this.loading=!0,this._splashScreenService.show(),this._KYCService.sendPhoneValidation(this.appRegistration.countryCode,this.appRegistration.phone).subscribe({next:r=>{this.currentValidation=r.data,this._linkValidation(),this.startCountdown(),this.loading=!1,this._splashScreenService.hide()},error:r=>{this.errorContent=r.error,this.loading=!1,this._splashScreenService.hide()},complete:()=>{this.loading=!1,this._splashScreenService.hide()}}),!0}_initForm(){this.otpForm=this._formBuilder.group({otp:["",[c.kI.required]]})}startCountdown(){this.countdownSubscription&&this.countdownSubscription.unsubscribe();const i=new Date(U()().add(2,"minute").format("YYYY-MM-DD HH:mm:ss")).getTime();this.countdownSubscription=function V(e=0,l=Z.z){return e<0&&(e=0),(0,S.H)(e,e,l)}(1e3).subscribe(()=>{let r=(new Date).getTime(),o=i-r;if(o<0)return this.remainingTime="Expired",void this.countdownSubscription.unsubscribe();let p=Math.floor(o%36e5/6e4),g=Math.floor(o%6e4/1e3);this.remainingTime=`${p}m ${g}s`})}onInput(i){const r=i.target;r.value=r.value.replace(/[^0-9]/g,"")}checkSixDigits(){6===this.otpForm.value.otp?.length&&this.confirmValidation()}confirmValidation(){this.loading||(this.loading=!!(this.currentValidation.email||this.currentValidation.phone&&"both"!==this.phoneGateway),this.currentValidation.email?(this._splashScreenService.show(),this._confirmEmailValidation()):this.currentValidation.phone&&"both"!==this.phoneGateway&&(this._splashScreenService.show(),this._confirmPhoneValidation()))}_confirmEmailValidation(){this._KYCService.confirmEmailValidation(this.appRegistration.email,this.otpForm.value.otp).subscribe({next:i=>{this.appRegistration.emailValidation=i.data},error:i=>{this.otpForm.reset(),this.loading=!1,this._splashScreenService.hide()},complete:()=>{this.otpForm.reset(),this.loading=!1,this._splashScreenService.hide(),this._initValidations()}})}_confirmPhoneValidation(){this._KYCService.confirmPhoneValidation(this.currentValidation.countryCode,this.currentValidation.phone,this.otpForm.value.otp).subscribe({next:i=>{this.appRegistration.phoneValidation=i.data},error:i=>{this.otpForm.reset(),this._splashScreenService.hide(),this.loading=!1},complete:()=>{this.otpForm.reset(),this.loading=!1,this._splashScreenService.hide(),this._initValidations()}})}canSendOTP(){return!this.sendingOTP&&!this.loading}sendPhoneOTP(i,r){this._initPhoneValidation(r)}_linkValidation(){const i={};this.currentValidation.email?(i.emailValidation=this.currentValidation._id,this.appRegistration.emailValidation=this.currentValidation):this.currentValidation.phone&&(i.phoneValidation=this.currentValidation._id,this.appRegistration.phoneValidation=this.currentValidation),this._KYCService.updateAppRegistration(i).subscribe({next:r=>{},error:r=>{console.error({exception:r})},complete:()=>{}})}_completeAppRegistration(){"mailgun"===this.projectFlow.onboardingSettings.signUpForm.emailGateway&&"validated"!==this.appRegistration.emailValidation?.status||["whatsapp","sms","both"].includes(this.projectFlow.onboardingSettings.signUpForm.phoneGateway)&&"validated"!==this.appRegistration.phoneValidation?.status||this.loading||(localStorage.setItem("accessToken",this.token),this._syncAppRegistration("signUpForm","ONGOING","redirect"))}_syncAppRegistration(i,r,o){const p=this._KYCService.syncAppRegistration(i,r);return p.subscribe({next:g=>{this.currentValidation=null,this.syncResponse=g.data},error:()=>{},complete:()=>{if(console.log({status:r,action:o}),"COMPLETED_WITHOUT_KYC"===r&&"redirect"===o){let g=this.projectFlow.redirectUrl;m.N.verifikProject===this.project._id?g=`${m.N.appUrl}/sign-in`:m.N.sandboxProject===this.project._id&&(g=`${m.N.sandboxUrl}/sign-in`),window.location.href=`${g}?type=onboarding&token=${this.syncResponse.token}`}"instructions"===i&&"redirect"===o&&this._router.navigate(["/kyc"],{queryParams:{token:this.syncResponse.token}})}}),p}startKYC(){this._syncAppRegistration("instructions","ONGOING","redirect")}continueWithoutKYC(){this._syncAppRegistration("skipKYC","COMPLETED_WITHOUT_KYC","redirect")}ngOnDestroy(){this.countdownSubscription&&this.countdownSubscription.unsubscribe()}static#t=this.\u0275fac=function(r){return new(r||e)(t.Y36(k.H),t.Y36(q.j),t.Y36(v.gz),t.Y36(t.sBO),t.Y36(v.F0),t.Y36(c.QS))};static#i=this.\u0275cmp=t.Xpm({type:e,selectors:[["auth-confirmation-required"]],viewQuery:function(r,o){if(1&r&&t.Gf(P,5),2&r){let p;t.iGM(p=t.CRH())&&(o.otpNgForm=p.first)}},standalone:!0,features:[t.jDz],decls:6,vars:7,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"w-full"],["fxLayout","row","fxLayoutAlign","center end","class","flex w-full",4,"ngIf"],["class","flex items-center justify-center sm:w-auto p-16 rounded-2xl shadow bg-card","fxLayout","column","fxLayoutAlign","start center",4,"ngIf"],["class","md:flex md:items-center md:justify-end w-full sm:w-auto md:h-full md:w-1/2 py-8 px-4 sm:p-12 md:p-16 sm:rounded-2xl md:rounded-none sm:shadow md:shadow-none sm:bg-card",4,"ngIf"],["class","flex items-center justify-center sm:w-auto p-16 rounded-2xl shadow bg-card",4,"ngIf"],["class","relative hidden md:flex flex-auto justify-center h-full overflow-hidden dark:border-r w-full","fxLayout","row",3,"background","fxLayoutAlign",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center end",1,"flex","w-full"],["fxLayout","row","fxLayoutAlign","start center"],[1,"main-logo","w-14",3,"src"],[1,"flex","rounded-2xl","shadow","bg-card","overflow-hidden","sign-in-content"],["fxLayout","row","fxLayoutAlign","start center",1,"w-full","sm:w-auto","py-8","px-4","sm:p-12"],[1,"w-400","mx-auto","sm:mx-0"],["class","mt-8 text-2xl font-extrabold tracking-tight leading-tight",4,"ngIf"],["class","flex items-baseline mt-0.5 font-medium",3,"color",4,"ngIf"],["class","mt-8 -mb-4",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-8",3,"formGroup"],["otpNgForm","ngForm"],["class","w-full",4,"ngIf"],["class","grid grid-cols-2 w-full",4,"ngIf"],["class","mt-2 text-md font-medium text-secondary",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",1,"w-full","text-center","mt-6"],[3,"colorText"],[1,"mt-8","text-2xl","font-extrabold","tracking-tight","leading-tight"],[1,"flex","items-baseline","mt-0.5","font-medium"],[1,"ml-1","text-primary-500","hover:underline","cursor-pointer",3,"routerLink"],[1,"mt-8","-mb-4",3,"appearance","showIcon","type"],[1,"w-full"],["id","otp","matInput","","type","password",3,"formControlName","input","keyup"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["class","p-1",4,"ngIf"],[1,"icon-size-5",3,"svgIcon"],[1,"p-1"],[1,"grid","grid-cols-2","w-full"],["mat-stroked-button","","class","w-11/12 mt-4","color","primary",3,"col-span-2","disabled","color","background","click",4,"ngIf"],["mat-stroked-button","","class","mt-4","color","primary",3,"col-span-2","disabled","color","background","click",4,"ngIf"],["mat-stroked-button","","color","primary",1,"w-11/12","mt-4",3,"disabled","click"],["mat-stroked-button","","color","primary",1,"mt-4",3,"disabled","click"],[1,"mt-2","text-md","font-medium","text-secondary"],[4,"ngIf"],["class","ml-1 text-primary-500 hover:underline cursor-pointer",3,"click",4,"ngIf"],[1,"ml-1","text-primary-500","hover:underline","cursor-pointer",3,"click"],["fxLayout","column","fxLayoutAlign","start center",1,"flex","items-center","justify-center","sm:w-auto","p-16","rounded-2xl","shadow","bg-card"],["class","w-full max-w-80 sm:w-80 mx-auto sm:mx-0",4,"ngIf"],["class","w-full max-w-80 sm:w-80 mx-auto sm:mx-0","fxLayout","column","fxLayoutAlign","start center",4,"ngIf"],[1,"w-full","max-w-80","sm:w-80","mx-auto","sm:mx-0"],["fxLayout","column","fxLayoutAlign","start center"],["src","https://cdn.verifik.co/access/goldcoins3x.png","alt","",1,"w-36"],[1,"pt-2","credits-h2"],[1,"credits-h3"],["fxLayout","column","fxLayoutAlign","center center",1,"w-full"],["mat-stroked-button","",1,"w-11/12","mt-4","biometrics-button",3,"click"],["mat-stroked-button","","class","w-11/12 mt-4 biometrics-button","color","primary",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary",1,"w-11/12","mt-4","biometrics-button",3,"click"],["fxLayout","column","fxLayoutAlign","start center",1,"w-full","max-w-80","sm:w-80","mx-auto","sm:mx-0"],[1,"mt-4","text-4xl","font-extrabold","tracking-tight","leading-tight","text-center"],["src","https://cdn.verifik.co/access/divider.svg","alt","",1,"w-full","pb-8","pt-8"],["src","https://cdn.verifik.co/access/biometrics_icon.svg","alt","",1,"w-28"],[1,"pt-2","text-2xl","font-extrabold"],[1,"credits-h3","text-center"],[1,"md:flex","md:items-center","md:justify-end","w-full","sm:w-auto","md:h-full","md:w-1/2","py-8","px-4","sm:p-12","md:p-16","sm:rounded-2xl","md:rounded-none","sm:shadow","md:shadow-none","sm:bg-card"],[1,"mt-8","text-4xl","font-extrabold","tracking-tight","leading-tight"],[1,"flex","items-center","justify-center","sm:w-auto","p-16","rounded-2xl","shadow","bg-card"],["fxLayout","row",1,"relative","hidden","md:flex","flex-auto","justify-center","h-full","overflow-hidden","dark:border-r","w-full",3,"fxLayoutAlign"],["alt","",1,"hhalf-width-image",3,"src"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0),t.YNc(1,tt,20,13,"div",1),t.YNc(2,rt,8,6,"div",2),t.YNc(3,at,9,6,"div",3),t.YNc(4,st,5,3,"div",4),t.YNc(5,ct,2,4,"div",5),t.qZA()),2&r&&(t.Udp("background",null==o.project?null:o.project.branding.bgColor),t.xp6(1),t.Q6J("ngIf",!o.errorContent&&o.appRegistration&&o.project&&o.otpForm&&o.currentValidation&&o.currentValidation._id),t.xp6(1),t.Q6J("ngIf",o.syncResponse),t.xp6(1),t.Q6J("ngIf",!(o.errorContent||o.project&&o.projectFlow&&o.projectFlow._id&&o.project._id)),t.xp6(1),t.Q6J("ngIf",o.errorContent),t.xp6(1),t.Q6J("ngIf",o.project&&o.project.branding.rightImage&&o.appRegistration&&o.otpForm&&o.currentValidation&&o.currentValidation._id))},dependencies:[_.o9,y.xw,y.Wh,v.rH,w.O5,j.W,c.u5,c._Y,c.Fj,c.JJ,c.JL,c.UX,c.sg,c.u,s.lN,s.KE,s.hX,s.TO,s.R9,d.c,d.Nt,h.ot,h.lW,h.RK,u.Ps,u.Hw,a.p9,T.Cq,C.y4,C.Ot,w.ez,R.LD,I.v],styles:[".main-logo{position:absolute;top:10px;left:20px;z-index:0}.w-400{width:400px!important}bg-white{background-color:#fff}.sign-in-content{z-index:2!important}.credits-h2{font-size:24px;text-align:center}.credits-h3{font-size:16px;text-align:center;font-weight:600;color:gray}.biometrics-button{background-color:#82269e;color:#fff!important}mat-form-field{padding-right:4px!important}.mat-mdc-tab-label-container{margin:0!important}mat-tab-body .mat-mdc-tab-body-content{padding:8px 0 5px!important}.w-120px{width:60%!important}.half-width-image{width:50vw;object-fit:fill;height:100%}\n"],encapsulation:2,data:{animation:x.L}})}return e})()}]},8340:(A,b,n)=>{n.d(b,{H:()=>C});var v=n(553),x=n(9397),m=n(8533),f=n(5879),w=n(2065),_=n(8991);let C=(()=>{class c{constructor(a,s){this._httpWrapper=a,this._translocoService=s,this.baseUrl=v.N.apiUrl}getNavigation(){return this.navigation}initNavigation(){let a=1;const s=[],u={},d=this.currentProjectFlow.onboardingSettings.steps;return["mandatory","optional"].includes(d.document)&&(a++,s.push({code:"document",status:d.document}),u.document=d.document,a++,s.push({code:"documentReview",status:d.document}),u.documentReview=d.document),["mandatory","optional"].includes(d.liveness)&&(a++,s.push({code:"liveness",status:d.liveness}),u.liveness=d.liveness,u.document&&(a++,u.documentLivenessReview=d.liveness)),s.push({code:"end",status:"mandatory"}),a++,this.navigation={currentStep:1,lastStep:a,steps:d,map:u,displayableSteps:s},this.navigation}getProject(){return this.currentProject}navigateTo(a){setTimeout(()=>{if("next"!==a)this.navigation.currentStep=a;else switch(this.navigation.currentStep){case"liveness":this.navigation.currentStep="documentLivenessReview";break;case"document":this.navigation.currentStep="documentReview";break;case"documentReview":this.navigation.currentStep="liveness";break;case"documentLivenessReview":this.navigation.currentStep="end"}},750)}getAppRegistration(a){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/app-registrations/me`,a).pipe((0,x.b)(s=>{this.appRegistration=s.data,this.currentProject=new m.XR({...this.appRegistration.project,type:"onboarding"}),this.currentProjectFlow=this.appRegistration.projectFlow}))}createAppRegistration(a){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/app-registrations`,a)}sendEmailValidation(a){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/email-validations`,{email:a,project:this.currentProject._id,projectFlow:this.currentProjectFlow._id,type:"onboarding",validationMethod:"verificationCode",language:this._translocoService.getActiveLang()}).pipe((0,x.b)(s=>{}))}sendPhoneValidation(a,s){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/phone-validations`,{countryCode:a,phone:s,project:this.currentProject._id,projectFlow:this.currentProjectFlow._id,type:"onboarding",validationMethod:"verificationCode",language:this._translocoService.getActiveLang()}).pipe((0,x.b)(u=>{}))}confirmEmailValidation(a,s){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/email-validations/validate`,{email:a,otp:s,project:this.currentProject._id,projectFlow:this.currentProjectFlow._id})}confirmPhoneValidation(a,s,u){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/phone-validations/validate`,{countryCode:a,phone:s,otp:u,project:this.currentProject._id,projectFlow:this.currentProjectFlow._id})}updateAppRegistration(a){return this._httpWrapper.sendRequest("put",`${this.baseUrl}/v2/app-registrations/${this.appRegistration._id}`,{...a})}syncAppRegistration(a,s){return this._httpWrapper.sendRequest("put",`${this.baseUrl}/v2/app-registrations/${this.appRegistration._id}/sync`,{step:a,status:s})}createDocumentValidation(a){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/document-validations/app-registration`,a)}createBiometricValidation(a){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/biometric-validations/app-registration`,a)}getIdentityImages(a){return this._httpWrapper.sendRequest("get",`${this.baseUrl}/v2/identity-images`,a)}compareFaces(){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/face-recognition/compare/app-registration`,{})}restartKYC(){return this._httpWrapper.sendRequest("delete",`${this.baseUrl}/v2/biometric-validations/${this.appRegistration.biometricValidation._id}`)}static#t=this.\u0275fac=function(s){return new(s||c)(f.LFG(w.O),f.LFG(_.Vn))};static#i=this.\u0275prov=f.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},2065:(A,b,n)=>{n.d(b,{O:()=>w});var v=n(8075),x=n(4716),m=n(5879),f=n(9862);let w=(()=>{class _{get progress(){return!!this.tail.length}constructor(c){this._http=c,this.tail=[]}sendRequest(c,h,a={},s={}){c=c.toLocaleLowerCase();const u=localStorage.getItem("accessToken");let d={timeout:20};switch(u&&(d.Authorization=`Bearer ${u}`),c){case"get":return this.request(this._http.get(h,{params:a,headers:d,...s}));case"post":return this.request(this._http.post(h,a,{headers:d,...s}));case"put":return this.request(this._http.put(h,a,{headers:d,...s}));case"delete":return this.request(this._http.delete(h,{headers:d,...s}));default:throw"method not provided"}}request(c){return this.tail.push(c),c.pipe((0,v.X)(0),(0,x.x)(()=>{const h=this.tail.indexOf(c);this.tail.splice(h,1)}))}static#t=this.\u0275fac=function(h){return new(h||_)(m.LFG(f.eN))};static#i=this.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()}}]);