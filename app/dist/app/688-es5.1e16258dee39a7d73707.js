!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}(self.webpackChunkverifik_sdk_app=self.webpackChunkverifik_sdk_app||[]).push([[688],{20688:function(e,o,i){i.r(o),i.d(o,{KycModule:function(){return Le}});var r,a=i(38583),c=i(37716),s=i(63423),l=((r=function(){function e(){t(this,e)}return n(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(t){return new(t||r)},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-kyc-routes-root"]],decls:1,vars:0,template:function(t,e){1&t&&c._UZ(0,"router-outlet")},directives:[s.lC],styles:[""]}),r),p=i(79765),u=i(46782),d=i(51374),m=i(91812),g=i(1400),f=i(42096),h=i(23017),v=i(20303),x=i(65939),Z=i(51095),_=i(76627),b=i(12178),y=i(3679),k=i(98295),A=i(49983),w=i(43220),q=i(67441),T=i(72458);function I(t,e){if(1&t&&(c.TgZ(0,"mat-form-field",16),c.TgZ(1,"mat-label"),c._uU(2),c.ALo(3,"transloco"),c.qZA(),c._UZ(4,"mat-icon",17),c._UZ(5,"input",18),c._UZ(6,"mat-datepicker-toggle",19),c._UZ(7,"mat-datepicker",null,20),c.qZA()),2&t){var n=c.MAs(8);c.xp6(2),c.Oqu(c.lcZ(3,6,"kyc.basic.dateOfBirth")),c.xp6(2),c.Q6J("svgIcon","heroicons_solid:cake"),c.xp6(1),c.Q6J("matDatepicker",n)("formControlName","dateOfBirth")("placeholder","Birthday"),c.xp6(1),c.Q6J("for",n)}}function C(t,e){1&t&&(c.TgZ(0,"mat-form-field",21),c.TgZ(1,"mat-label",7),c._uU(2),c.ALo(3,"transloco"),c.qZA(),c._UZ(4,"input",22),c.qZA()),2&t&&(c.xp6(2),c.hij(" ",c.lcZ(3,2,"kyc.basic.age")," "),c.xp6(2),c.Q6J("formControlName","age"))}function F(t,e){if(1&t&&(c.ynx(0),c.TgZ(1,"mat-option",28),c.TgZ(2,"span",25),c.TgZ(3,"span",29),c._uU(4),c.ALo(5,"transloco"),c.qZA(),c.qZA(),c.qZA(),c.BQk()),2&t){var n=e.$implicit;c.xp6(1),c.Q6J("value",n.code),c.xp6(3),c.Oqu(c.lcZ(5,2,n.name))}}var S=function(){return{code:"M",name:"male"}},j=function(){return{code:"F",name:"female"}},O=function(t,e){return[t,e]};function N(t,e){if(1&t&&(c.TgZ(0,"mat-form-field",23),c.TgZ(1,"mat-label",7),c._uU(2),c.ALo(3,"transloco"),c.qZA(),c.TgZ(4,"mat-select",24),c.TgZ(5,"mat-select-trigger"),c.TgZ(6,"span",25),c.TgZ(7,"span",26),c._uU(8),c.ALo(9,"transloco"),c.qZA(),c.qZA(),c.qZA(),c.YNc(10,F,6,4,"ng-container",27),c.qZA(),c.qZA()),2&t){var n=c.oxw();c.xp6(2),c.hij(" ",c.lcZ(3,4,"kyc.basic.gender")," "),c.xp6(2),c.Q6J("formControl",n.basicInformationForm.get("gender")),c.xp6(4),c.Oqu(c.lcZ(9,6,n.basicInformationForm.get("gender").value)),c.xp6(2),c.Q6J("ngForOf",c.WLB(10,O,c.DdM(8,S),c.DdM(9,j)))}}function Q(t,e){1&t&&(c.TgZ(0,"div",5),c.TgZ(1,"mat-form-field",21),c.TgZ(2,"mat-label",7),c._uU(3),c.ALo(4,"transloco"),c.qZA(),c._UZ(5,"input",30),c.qZA(),c.TgZ(6,"mat-form-field",23),c.TgZ(7,"mat-label",7),c._uU(8),c.ALo(9,"transloco"),c.qZA(),c._UZ(10,"input",31),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.hij(" ",c.lcZ(4,4,"kyc.basic.address")," "),c.xp6(2),c.Q6J("formControlName","address"),c.xp6(3),c.hij(" ",c.lcZ(9,6,"kyc.basic.city")," "),c.xp6(2),c.Q6J("formControlName","city"))}function J(t,e){1&t&&(c.TgZ(0,"div",5),c.TgZ(1,"mat-form-field",21),c.TgZ(2,"mat-label",7),c._uU(3),c.ALo(4,"transloco"),c.qZA(),c._UZ(5,"input",32),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.hij(" ",c.lcZ(4,2,"kyc.basic.postalCode")," "),c.xp6(2),c.Q6J("formControlName","postalCode"))}function U(t,e){if(1&t&&(c.ynx(0),c.TgZ(1,"mat-option",28),c.TgZ(2,"span",25),c.TgZ(3,"span",29),c._uU(4),c.ALo(5,"transloco"),c.qZA(),c.qZA(),c.qZA(),c.BQk()),2&t){var n=e.$implicit;c.xp6(1),c.Q6J("value",n.code),c.xp6(3),c.hij(" ",c.lcZ(5,2,n.name)," ")}}function M(t,e){if(1&t&&(c.TgZ(0,"mat-select",37),c.TgZ(1,"mat-select-trigger"),c.TgZ(2,"span",25),c.TgZ(3,"span",26),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.YNc(5,U,6,4,"ng-container",27),c.qZA()),2&t){var n=c.oxw(2);c.Q6J("formControlName","documentType"),c.xp6(4),c.Oqu(n.basicInformationForm.get("documentType").value),c.xp6(1),c.Q6J("ngForOf",n.documentTypes)}}function P(t,e){1&t&&(c.TgZ(0,"mat-error"),c._uU(1),c.ALo(2,"transloco"),c.qZA()),2&t&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"start.required_document_number")," "))}function R(t,e){if(1&t&&(c.TgZ(0,"mat-form-field",38),c.TgZ(1,"mat-label"),c._uU(2),c.ALo(3,"transloco"),c.qZA(),c._UZ(4,"input",39),c.YNc(5,P,3,3,"mat-error",40),c.qZA()),2&t){var n=c.oxw(2);c.xp6(2),c.hij(" ",c.lcZ(3,3,"start.document_number"),""),c.xp6(2),c.Q6J("formControlName","documentNumber"),c.xp6(1),c.Q6J("ngIf",n.basicInformationForm.get("documentNumber").hasError("required"))}}function D(t,e){if(1&t&&(c.TgZ(0,"div",33),c.TgZ(1,"mat-form-field",34),c.TgZ(2,"mat-label"),c._uU(3),c.ALo(4,"transloco"),c.qZA(),c.YNc(5,M,6,3,"mat-select",35),c.qZA(),c.YNc(6,R,6,5,"mat-form-field",36),c.qZA()),2&t){var n=c.oxw();c.xp6(3),c.hij(" ",c.lcZ(4,3,"start.document_type"),""),c.xp6(2),c.Q6J("ngIf",n.documentTypes),c.xp6(1),c.Q6J("ngIf",n.groupFields.documentNumber)}}var Y=function(){var e=function(){function e(n,o,i,r){t(this,e),this._KycService=n,this._changeDetectorRef=o,this._formBuilder=i,this._router=r,this._unsubscribeAll=new p.xQ,this.countryCodes=this._KycService.countryCodes,this.documentTypes=[{code:"CC",name:"document_types.cc"},{code:"CCVE",name:"document_types.ccve"},{code:"PA",name:"document_types.passport"}]}return n(e,[{key:"ngOnInit",value:function(){this._observeNavigationChanges(),this._ObserveProject()}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(null)}},{key:"_ObserveProject",value:function(){var t=this;this._KycService.currentAppRegistration$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(function(e){t.appRegistration=e,t.project=e.project,t.projectFlow=e.projectFlow,t._changeDetectorRef.markForCheck(),t._initForm()})}},{key:"_observeNavigationChanges",value:function(){var t=this;this._KycService.navigationHandler$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(function(e){!t._validateStep(e)||t._saveChanges(e)})}},{key:"_initForm",value:function(){this.groupFields={};var t=this.appRegistration.InformationValidation,e=t.firstName,n=t.lastName,o=t.age,i=t.gender,r=t.address,a=t.city,c=t.postalCode,s=t.dateOfBirth,l=t.documentType,p=t.documentNumber;this.projectFlow.onboardingSettings.basicInformation.fullName&&(this.groupFields.firstName=[e||"",[y.kI.required]],this.groupFields.lastName=[n||"",[y.kI.required]]),this.projectFlow.onboardingSettings.basicInformation.age&&(this.groupFields.age=[o||0,[y.kI.required]]),this.projectFlow.onboardingSettings.basicInformation.gender&&(this.groupFields.gender=[i||"M",[y.kI.required]]),this.projectFlow.onboardingSettings.basicInformation.dateOfBirth&&(this.groupFields.dateOfBirth=[s||new Date,[y.kI.required]]),this.projectFlow.onboardingSettings.basicInformation.address&&(this.groupFields.address=[r||"",[y.kI.required]],this.groupFields.city=[a||"",[y.kI.required]]),this.projectFlow.onboardingSettings.basicInformation.postalCode&&(this.groupFields.postalCode=[c||"",[y.kI.required]]),this.projectFlow.onboardingSettings.basicInformation.legalDocument&&(this.groupFields.documentType=[l||"",[y.kI.required]],this.groupFields.documentNumber=[p||"",[y.kI.required]]),this.basicInformationForm=this._formBuilder.group(this.groupFields)}},{key:"_validateStep",value:function(){return!!this.basicInformationForm&&Boolean(this.basicInformationForm.valid)}},{key:"_saveChanges",value:function(t){var e=this;!t||this._KycService.updateAppRegistration(this.appRegistration._id,Object.assign(Object.assign({},this.appRegistration),{informationValidation:this.basicInformationForm.value})).subscribe(function(n){for(var o=0,i=Object.keys(n.data.informationValidation);o<i.length;o++){var r=i[o];e.appRegistration.InformationValidation[r]=n.data.informationValidation[r]}e._KycService.navData.currentStep=t.stepToGo,t.projectSteps.selectedIndex=t.stepToGo,e._changeDetectorRef.markForCheck()},function(t){console.error({error:t}),e.kickOut()})}},{key:"kickOut",value:function(){localStorage.removeItem("accessToken"),this._router.navigate(["/kyc/start/",this.appRegistration.project._id])}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(d.y),c.Y36(c.sBO),c.Y36(y.qu),c.Y36(s.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-kyc-basic-information"]],decls:28,vars:21,consts:[["cdkScrollable","",1,"flex-auto","overflow-y-auto","mx-auto"],[1,"prose","prose-sm","max-w-3xl","mx-auto","sm:my-2","overflow-hidden"],[1,"verifikH1"],[1,"prose","prose-sm","max-w-3xl","mx-auto","sm:my-2","lg:mt-4","p-6","rounded-2xl","shadow","overflow-hidden","bg-card","mt-6"],[1,"mt-7",3,"formGroup"],[1,"grid","grid-cols-2"],[1,"w-full","fuse-mat-dense"],[1,"primaryColor"],["id","firstName","autocomplete","chrome-off","matInput","","required","",3,"formControlName"],[1,"w-full","fuse-mat-dense","ml-2"],["id","lastName","autocomplete","chrome-off","matInput","","required","",3,"formControlName"],["class","fuse-mat-no-subscript mb-2",4,"ngIf"],["class","fuse-mat-dense mr-1.5",4,"ngIf"],["class","fuse-mat-dense",4,"ngIf"],["class","grid grid-cols-2",4,"ngIf"],["class","grid grid-cols-3",4,"ngIf"],[1,"fuse-mat-no-subscript","mb-2"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"matDatepicker","formControlName","placeholder"],["matSuffix","",3,"for"],["birthdayDatepicker",""],[1,"fuse-mat-dense","mr-1.5"],["id","age","matInput","","type","number",3,"formControlName"],[1,"fuse-mat-dense"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"flex","items-center"],[1,"sm:mx-0.5","font-medium","text-default"],[4,"ngFor","ngForOf"],[3,"value"],[1,"ml-2"],["id","address","matInput","",3,"formControlName"],["id","city","matInput","",3,"formControlName"],["id","postalCode","matInput","",3,"formControlName"],[1,"grid","grid-cols-3"],[1,"w-full"],["class","mr-1.5","matPrefix","",3,"formControlName",4,"ngIf"],["class","w-full col-span-2 ml-1 mr-1",4,"ngIf"],["matPrefix","",1,"mr-1.5",3,"formControlName"],[1,"w-full","col-span-2","ml-1","mr-1"],["id","documentNumber","matInput","",3,"formControlName"],[4,"ngIf"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"h1",2),c._uU(3),c.ALo(4,"transloco"),c.qZA(),c.TgZ(5,"p"),c._uU(6),c.ALo(7,"transloco"),c.qZA(),c.qZA(),c.TgZ(8,"div",3),c.TgZ(9,"form",4),c.TgZ(10,"div",5),c.TgZ(11,"mat-form-field",6),c.TgZ(12,"mat-label",7),c._uU(13),c.ALo(14,"transloco"),c.qZA(),c._UZ(15,"input",8),c.qZA(),c.TgZ(16,"mat-form-field",9),c.TgZ(17,"mat-label",7),c._uU(18),c.ALo(19,"transloco"),c.qZA(),c._UZ(20,"input",10),c.qZA(),c.qZA(),c.YNc(21,I,9,8,"mat-form-field",11),c.TgZ(22,"div",5),c.YNc(23,C,5,4,"mat-form-field",12),c.YNc(24,N,11,13,"mat-form-field",13),c.qZA(),c.YNc(25,Q,11,8,"div",14),c.YNc(26,J,6,4,"div",14),c.YNc(27,D,7,5,"div",15),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.hij(" ",c.lcZ(4,13,"kyc.steps.title_1")," "),c.xp6(3),c.hij(" ",c.lcZ(7,15,"kyc.steps.description_1")," "),c.xp6(3),c.Q6J("formGroup",e.basicInformationForm),c.xp6(4),c.Oqu(c.lcZ(14,17,"kyc.basic.first_name")),c.xp6(2),c.Q6J("formControlName","firstName"),c.xp6(3),c.Oqu(c.lcZ(19,19,"kyc.basic.last_name")),c.xp6(2),c.Q6J("formControlName","lastName"),c.xp6(1),c.Q6J("ngIf",e.groupFields.dateOfBirth),c.xp6(2),c.Q6J("ngIf",e.groupFields.age),c.xp6(1),c.Q6J("ngIf",e.groupFields.gender),c.xp6(1),c.Q6J("ngIf",e.groupFields.address),c.xp6(1),c.Q6J("ngIf",e.groupFields.postalCode),c.xp6(1),c.Q6J("ngIf",e.groupFields.documentNumber))},directives:[v.PQ,y._Y,y.JL,y.sg,k.KE,k.hX,A.Nt,y.Fj,y.Q7,y.JJ,y.u,a.O5,_.Hw,k.qo,w.hl,w.nW,k.R9,w.Mq,y.wV,q.gD,y.oH,q.$L,a.sg,T.ey,k.TO],pipes:[f.Ot],styles:[""]}),e}(),L=i(89596),B=i(13653),V=i(28288),H=i(22238),K=function(){var e=function e(n,o){t(this,e),this.dialogRef=n,this.data=o};return e.\u0275fac=function(t){return new(t||e)(c.Y36(H.so),c.Y36(H.WI))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-kyc-document-validation-qr"]],decls:12,vars:11,consts:[["mat-dialog-title","",1,"verifikH1",2,"text-align","center"],["mat-dialog-content","",1,"flex","flex-col","flex-auto","items-center","md:w-160","md:min-w-160","mt-5"],[1,"qr-border","my-8"],["alt","QR to movil",1,"flex","w-80","h-80","p-1",3,"src"],["mat-dialog-actions","",1,"mb-1"],["mat-button","","cdkFocusInitial","",1,"fuse-mat-button-large","w-full","mt-6","main","primaryBg",3,"mat-dialog-close"]],template:function(t,e){1&t&&(c.TgZ(0,"h1",0),c._uU(1),c.ALo(2,"transloco"),c.qZA(),c.TgZ(3,"div",1),c._uU(4),c.ALo(5,"transloco"),c.TgZ(6,"div",2),c._UZ(7,"img",3),c.qZA(),c.qZA(),c.TgZ(8,"div",4),c.TgZ(9,"button",5),c._uU(10),c.ALo(11,"transloco"),c.qZA(),c.qZA()),2&t&&(c.xp6(1),c.Oqu(c.lcZ(2,5,"kyc.steps.title_2_qr")),c.xp6(3),c.hij(" ",c.lcZ(5,7,"kyc.steps.description_2_qr")," "),c.xp6(3),c.s9C("src",e.data,c.LSH),c.xp6(2),c.Q6J("mat-dialog-close",!0),c.xp6(1),c.Oqu(c.lcZ(11,9,"kyc.steps.description_2_qr_continue")))},directives:[H.uh,H.xY,H.H8,Z.lW,H.ZT],pipes:[f.Ot],styles:[".document-types[_ngcontent-%COMP%]{width:100%!important;text-align:center}.document-types[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px!important}.document-types[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{align-items:center;margin:10px}.primaryBg[_ngcontent-%COMP%]{background-color:#01236d!important;color:#fff!important}.qr-border[_ngcontent-%COMP%]{background:linear-gradient(to right,black 4px,transparent 4px) 0 0,linear-gradient(to right,black 4px,transparent 4px) 0 100%,linear-gradient(to left,black 4px,transparent 4px) 100% 0,linear-gradient(to left,black 4px,transparent 4px) 100% 100%,linear-gradient(to bottom,black 4px,transparent 4px) 0 0,linear-gradient(to bottom,black 4px,transparent 4px) 100% 0,linear-gradient(to top,black 4px,transparent 4px) 0 100%,linear-gradient(to top,black 4px,transparent 4px) 100% 100%;background-repeat:no-repeat;background-size:20px 20px}"]}),e}(),E=i(7539),$=i(13994),G=i(4885),z=i(19602);function W(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"div"),c._UZ(1,"img",12),c.TgZ(2,"p"),c.TgZ(3,"mat-checkbox",13),c.NdJ("ngModelChange",function(t){return c.CHM(n),c.oxw(2).documentsMapping.useGovernmentID=t})("change",function(t){return c.CHM(n),c.oxw(2).selectDocument(t,"useGovernmentID")}),c._uU(4,"C\xe9dula de ciudadan\xeda "),c.qZA(),c.qZA(),c.qZA()}if(2&t){var o=c.oxw(2);c.xp6(3),c.Q6J("ngModel",o.documentsMapping.useGovernmentID)}}function X(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"div"),c._UZ(1,"img",14),c.TgZ(2,"p"),c.TgZ(3,"mat-checkbox",13),c.NdJ("ngModelChange",function(t){return c.CHM(n),c.oxw(2).documentsMapping.usePassport=t})("change",function(t){return c.CHM(n),c.oxw(2).selectDocument(t,"usePassport")}),c._uU(4,"Pasaporte"),c.qZA(),c.qZA(),c.qZA()}if(2&t){var o=c.oxw(2);c.xp6(3),c.Q6J("ngModel",o.documentsMapping.usePassport)}}function tt(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"div"),c._UZ(1,"img",15),c.TgZ(2,"p"),c.TgZ(3,"mat-checkbox",16),c.NdJ("ngModelChange",function(t){return c.CHM(n),c.oxw(2).documentsMapping.useLicense=t})("change",function(t){return c.CHM(n),c.oxw(2).selectDocument(t,"useLicense")}),c._uU(4," Licencia de conducir"),c.qZA(),c.qZA(),c.qZA()}if(2&t){var o=c.oxw(2);c.xp6(3),c.Q6J("ngModel",o.documentsMapping.useLicense)}}function et(t,e){if(1&t&&(c.ynx(0),c.YNc(1,W,5,1,"div",4),c.YNc(2,X,5,1,"div",4),c.YNc(3,tt,5,1,"div",4),c.BQk()),2&t){var n=c.oxw();c.xp6(1),c.Q6J("ngIf",n.projectFlow.onboardingSettings.documentValidation.useGovermentID),c.xp6(1),c.Q6J("ngIf",n.projectFlow.onboardingSettings.documentValidation.usePassport),c.xp6(1),c.Q6J("ngIf",n.projectFlow.onboardingSettings.documentValidation.useLicense)}}function nt(t,e){1&t&&(c.TgZ(0,"div",17),c.TgZ(1,"h3"),c._uU(2),c.ALo(3,"transloco"),c.qZA(),c.TgZ(4,"p",18),c._uU(5),c.ALo(6,"transloco"),c.qZA(),c.TgZ(7,"div",19),c._UZ(8,"img",20),c.qZA(),c.qZA()),2&t&&(c.xp6(2),c.hij(" ",c.lcZ(3,2,"kyc.identity_validation.only_liveness_title")," "),c.xp6(3),c.Oqu(c.lcZ(6,4,"kyc.identity_validation.only_liveness_description")))}function ot(t,e){if(1&t&&(c.TgZ(0,"fuse-alert",21),c._uU(1),c.ALo(2,"transloco"),c.qZA()),2&t){var n=c.oxw();c.Q6J("appearance","outline")("showIcon",!1)("type",n.alert.type)("@shake","error"===n.alert.type),c.xp6(1),c.hij(" ",c.lcZ(2,5,"errors."+n.alert.message)," ")}}function it(t,e){1&t&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"transloco"),c.qZA()),2&t&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"kyc.identity_validation.validate_button")," "))}function rt(t,e){1&t&&c._UZ(0,"mat-progress-spinner",24),2&t&&c.Q6J("diameter",24)("mode","indeterminate")}function at(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"button",22),c.NdJ("click",function(){return c.CHM(n),c.oxw().validateBiometrics()}),c.YNc(1,it,3,3,"span",4),c.YNc(2,rt,1,2,"mat-progress-spinner",23),c.qZA()}if(2&t){var o=c.oxw();c.Q6J("disabled",!o.canEnableFaceTecButton()),c.xp6(1),c.Q6J("ngIf",o.biometricsReady),c.xp6(1),c.Q6J("ngIf",!o.biometricsReady)}}function ct(t,e){if(1&t&&(c.TgZ(0,"fuse-card",25,26),c.TgZ(2,"div",27),c._uU(3),c.ALo(4,"transloco"),c.qZA(),c.TgZ(5,"div",28),c.TgZ(6,"b"),c._uU(7),c.ALo(8,"transloco"),c.qZA(),c._uU(9),c.qZA(),c.TgZ(10,"div"),c.TgZ(11,"b"),c._uU(12),c.ALo(13,"transloco"),c.qZA(),c._uU(14),c.qZA(),c.TgZ(15,"div"),c.TgZ(16,"b"),c._uU(17),c.ALo(18,"transloco"),c.qZA(),c._uU(19),c.qZA(),c.TgZ(20,"div"),c.TgZ(21,"b"),c._uU(22),c.ALo(23,"transloco"),c.qZA(),c._uU(24),c.qZA(),c.qZA()),2&t){var n=c.oxw();c.xp6(3),c.hij(" ",c.lcZ(4,9,"kyc.identity_validation.information")," "),c.xp6(4),c.hij("",c.lcZ(8,11,"kyc.identity_validation.document"),":"),c.xp6(2),c.hij(" ",n.ocrData.document,""),c.xp6(3),c.hij("",c.lcZ(13,13,"kyc.basic.first_name"),":"),c.xp6(2),c.hij(" ",n.ocrData.firstName,""),c.xp6(3),c.hij("",c.lcZ(18,15,"kyc.basic.last_name"),":"),c.xp6(2),c.hij(" ",n.ocrData.lastName,""),c.xp6(3),c.hij("",c.lcZ(23,17,"kyc.basic.dateOfBirth"),":"),c.xp6(2),c.hij(" ",n.ocrData.dateOfBirth,"")}}function st(t,e){if(1&t&&c._UZ(0,"img",33),2&t){var n=c.oxw(2);c.MGl("src","",n.appRegistration.documentValidation.url,"backCrop",c.LSH)}}function lt(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"fuse-card",29,30),c.ynx(2,31),c.TgZ(3,"div",32),c.TgZ(4,"div",27),c._uU(5),c.ALo(6,"transloco"),c.qZA(),c._UZ(7,"img",33),c.TgZ(8,"div",34),c.TgZ(9,"button",35),c.NdJ("click",function(){return c.CHM(n),c.MAs(1).face="back"}),c._UZ(10,"mat-icon",36),c.qZA(),c.qZA(),c.qZA(),c.BQk(),c.ynx(11,37),c.TgZ(12,"div",38),c.TgZ(13,"div",27),c._uU(14),c.ALo(15,"transloco"),c.qZA(),c.YNc(16,st,1,1,"img",39),c.TgZ(17,"div",40),c.TgZ(18,"button",35),c.NdJ("click",function(){return c.CHM(n),c.MAs(1).face="front"}),c._UZ(19,"mat-icon",36),c.qZA(),c.qZA(),c.qZA(),c.BQk(),c.qZA()}if(2&t){var o=c.oxw();c.Q6J("flippable",!0),c.xp6(5),c.hij(" ",c.lcZ(6,9,"kyc.identity_validation.front")," "),c.xp6(2),c.MGl("src","",o.appRegistration.documentValidation.url,"frontCrop",c.LSH),c.xp6(2),c.Q6J("color","primary"),c.xp6(1),c.Q6J("svgIcon","heroicons_outline:arrow-right"),c.xp6(4),c.hij(" ",c.lcZ(15,11,"kyc.identity_validation.back")," "),c.xp6(2),c.Q6J("ngIf","PA"!==o.appRegistration.documentValidation.documentType),c.xp6(2),c.Q6J("color","primary"),c.xp6(1),c.Q6J("svgIcon","heroicons_outline:arrow-left")}}function pt(t,e){if(1&t&&(c.TgZ(0,"fuse-card",41,26),c.TgZ(2,"div",42),c.TgZ(3,"div",43),c.TgZ(4,"div",44),c._uU(5),c.ALo(6,"transloco"),c.qZA(),c.TgZ(7,"div",45),c._UZ(8,"img",46),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){var n=c.oxw();c.xp6(5),c.hij(" ",c.lcZ(6,2,"kyc.identity_validation.biometric")," "),c.xp6(3),c.s9C("src",n.appRegistration.biometricValidation.url,c.LSH)}}var ut=function(){var e=function(){function e(n,o,i,r,a){t(this,e),this._KycService=n,this._changeDetectorRef=o,this._formBuilder=i,this._fuseMediaWatcherService=r,this.dialog=a,this._unsubscribeAll=new p.xQ,this.documentsMapping={useLicense:!1,usePassport:!1,useGovernmentID:!1},this.alert={type:"success",message:""}}return n(e,[{key:"ngOnInit",value:function(){this._observeNavigationChanges(),this._ObserveProject()}},{key:"errorLogin",value:function(t){var e=this;this.alert={type:"error",message:t},this.showAlert=!0,this._changeDetectorRef.detectChanges(),setTimeout(function(){e.showAlert=!1,e._changeDetectorRef.detectChanges()},1e4)}},{key:"isMobile",value:function(){return(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<768}},{key:"validateBiometrics",value:function(){var t=Boolean(this.appRegistration.biometricValidation),e=Boolean(this.appRegistration.documentValidation);if(this.projectFlow.onboardingSettings.documentValidation.includeOCR)return e&&(this.isIdentityValidated=!0),this._biometric.startEnrollmentDocuments(t,this.selectedDocument,this.appRegistration.phone,this.appRegistration.email);t&&(this.isIdentityValidated=!0),this._biometric.startEnrollmentBiometrics(this.appRegistration.phone,this.appRegistration.email)}},{key:"ngOnDestroy",value:function(){this.interval&&clearInterval(this.interval),this._unsubscribeAll.next(null)}},{key:"_ObserveProject",value:function(){var t=this;this._KycService.currentAppRegistration$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(function(e){t._startTimer(),t.appRegistration=e,t.project=e.project,t.projectFlow=e.projectFlow,t.allowedOptions=t.projectFlow.onboardingSettings.documentValidation,t.qr=localStorage.getItem("qr"),t.qr&&!t.isMobile()&&(t.dialogQRRef=t.dialog.open(K,{disableClose:!0,data:t.qr})),t._syncBiometricsChecks(),t._initFaceTecInLoop(),t._changeDetectorRef.markForCheck()})}},{key:"_initFaceTecInLoop",value:function(){var t,e=this;t=setInterval(function(){-1===e._initFaceTec()&&clearInterval(t),e._changeDetectorRef.detectChanges()},2e3)}},{key:"_initFaceTec",value:function(){var t=this;if(this._biometric)return-1;this.biometricsReady=!1;var e=this;this._biometric=new L.u(this._KycService,function(t){t&&e._biometric&&e._biometric.startSession()}),this._biometric.session$.pipe((0,B.T)(1)).pipe((0,u.R)(this._unsubscribeAll)).subscribe(function(e){t.biometricsReady=e}),this._biometric.error$.pipe((0,B.T)(1)).pipe((0,u.R)(this._unsubscribeAll)).subscribe(function(e){t.errorLogin(e),t.biometricsReady=!1,t._biometric.startSession(),t._resyncAppRegistrationObject()}),this._biometric.onboardingBiometric$.pipe((0,B.T)(1)).pipe((0,u.R)(this._unsubscribeAll)).subscribe(function(){t.biometricsReady=!1,t._biometric.startSession(),t._resyncAppRegistrationObject()}),this._biometric.onboardingScan$.pipe((0,B.T)(1)).pipe((0,u.R)(this._unsubscribeAll)).subscribe(function(){t.biometricsReady=!1,t._biometric.startSession(),t._resyncAppRegistrationObject()})}},{key:"_syncBiometricsChecks",value:function(){var t=Boolean(!this.projectFlow.onboardingSettings.documentValidation.includeOCR&&this.appRegistration.biometricValidation&&(this.projectFlow.onboardingSettings.documentValidation.useBasicLiveness||this.projectFlow.onboardingSettings.documentValidation.useProLiveness)),e=Boolean(this.appRegistration.documentValidation&&this.projectFlow.onboardingSettings.documentValidation.includeOCR);if(t||e){clearInterval(this.interval),this.dialogQRRef&&this.dialogQRRef.close();var n=this.appRegistration.documentValidation?this.appRegistration.documentValidation.OCRExtraction:null;return n&&(n=n.userConfirmed?n.userConfirmed:n.scanned,this.ocrData={firstName:n.userInfo.firstName,lastName:n.userInfo.lastName,dateOfBirth:n.userInfo.dateOfBirth,document:n.idInfo.idNumber}),this.isIdentityValidated=!0,void this._changeDetectorRef.markForCheck()}}},{key:"_startTimer",value:function(){var t=this;this.interval||(this.interval=setInterval(function(){t._resyncAppRegistrationObject()},2e3))}},{key:"_resyncAppRegistrationObject",value:function(){var t=this;this._KycService.resyncAppRegistrationObject().pipe((0,u.R)(this._unsubscribeAll)).subscribe(function(e){t.appRegistration=e.data,t._syncBiometricsChecks()},function(t){console.log({error:t})})}},{key:"canEnableFaceTecButton",value:function(){return Boolean(this.biometricsReady&&(!this.projectFlow.onboardingSettings.documentValidation.includeOCR||this.selectedDocument))}},{key:"_observeNavigationChanges",value:function(){var t=this;this._KycService.navigationHandler$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(function(e){if(e)return t._KycService.navData.currentStep>e.stepToGo?(t._KycService.navData.currentStep=e.stepToGo,e.projectSteps.selectedIndex=e.stepToGo,void t._changeDetectorRef.markForCheck()):void(!t._validateStep(e)||t._saveChanges(e))})}},{key:"_validateStep",value:function(t){return Boolean(t&&this.appRegistration&&this.appRegistration.biometricValidation&&"validated"===this.appRegistration.biometricValidation.status&&(!this.projectFlow||!this.projectFlow.onboardingSettings.documentValidation.includeOCR||this.appRegistration.documentValidation))}},{key:"_saveChanges",value:function(t){var e=this;if(t){if(!this.projectFlow.onboardingSettings.form)return void this._KycService.updateAppRegistration(this.appRegistration._id,{status:"COMPLETED"}).subscribe(function(t){localStorage.removeItem("xaccessToken"),window.location.href="".concat(e.projectFlow.redirectUrl,"?type=").concat(e.projectFlow.type,"&token=").concat(t.data.token)});this._KycService.navData.currentStep=t.stepToGo,t.projectSteps.selectedIndex=t.stepToGo}}},{key:"selectDocument",value:function(t,e){if(t.checked)for(var n in this.selectedDocument=e,this.documentsMapping){var o=!1;n===e&&(o=!0),this.documentsMapping[n]=o}else this.selectedDocument=null}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(d.y),c.Y36(c.sBO),c.Y36(y.qu),c.Y36(m.T),c.Y36(H.uw))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-kyc-document-validation"]],decls:18,vars:13,consts:[["cdkScrollable","",1,"flex-auto","overflow-y-auto","mx-auto"],[1,"prose","prose-sm","max-w-3xl","mx-auto","sm:my-2","overflow-hidden"],[1,"verifikH1"],[1,"prose","prose-sm","max-w-3xl","mx-auto","sm:my-2","lg:mt-4","flex","flex-wrap","document-types","w-full"],[4,"ngIf"],["class","rounded-2xl bg-card max-w-3xl mx-auto shadow overflow-hidden",4,"ngIf"],["class","mt-8 -mb-4",3,"appearance","showIcon","type",4,"ngIf"],["class","fuse-mat-button-large w-full mt-6 main primaryBg","mat-flat-button","",3,"disabled","click",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-4","gap-6","w-full"],["class","flex flex-col sm:col-span-2 md:col-span-4 lg:col-span-2 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden",4,"ngIf"],["class","flex flex-col sm:col-span-2 md:col-span-4 lg:col-span-2",3,"flippable",4,"ngIf"],["class","flex flex-col sm:col-span-2 md:col-span-4 lg:col-span-2",4,"ngIf"],["src","https://cdn.verifik.co/assets/kyc/cedula_example@2x.png","alt",""],[1,"example-margin",3,"ngModel","ngModelChange","change"],["src","https://cdn.verifik.co/assets/kyc/pasaporte_example@2x.png","alt",""],["src","https://cdn.verifik.co/assets/kyc/licencia_example@2x.png","alt",""],[3,"ngModel","ngModelChange","change"],[1,"rounded-2xl","bg-card","max-w-3xl","mx-auto","shadow","overflow-hidden"],[1,"p-3"],[1,"flex","justify-center"],["src","https://cdn.verifik.co/assets/passwordless/liveness.gif"],[1,"mt-8","-mb-4",3,"appearance","showIcon","type"],["mat-flat-button","",1,"fuse-mat-button-large","w-full","mt-6","main","primaryBg",3,"disabled","click"],[3,"diameter","mode",4,"ngIf"],[3,"diameter","mode"],[1,"flex","flex-col","sm:col-span-2","md:col-span-4","lg:col-span-2","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],["fuseCard",""],[1,"text-lg","font-bold"],[1,"mt-5"],[1,"flex","flex-col","sm:col-span-2","md:col-span-4","lg:col-span-2",3,"flippable"],["documentScan",""],["fuseCardFront",""],[1,"flex","flex-col","px-8","py-6","pb-3"],[1,"w-full",3,"src"],[1,"mt-3","-mx-3","self-end"],["mat-icon-button","",3,"color","click"],[1,"icon-size-5",3,"svgIcon"],["fuseCardBack",""],[1,"flex","flex-col","flex-auto","px-8","py-6","pt-3"],["class","w-full",3,"src",4,"ngIf"],[1,"mb-2","-mx-3"],[1,"flex","flex-col","sm:col-span-2","md:col-span-4","lg:col-span-2"],[1,"flex","items-start","justify-between","px-8","py-6","pb-3"],[1,"flex","flex-col","items-center","mt-2"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"flex","items-center","justify-center","w-full","h-80","rounded-full","overflow-hidden"],[3,"src"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"h1",2),c._uU(3),c.ALo(4,"transloco"),c.qZA(),c.TgZ(5,"p"),c._uU(6),c.ALo(7,"transloco"),c.qZA(),c.qZA(),c.TgZ(8,"div",3),c.YNc(9,et,4,3,"ng-container",4),c.YNc(10,nt,9,6,"div",5),c.YNc(11,ot,3,7,"fuse-alert",6),c.YNc(12,at,3,3,"button",7),c.qZA(),c.TgZ(13,"div",1),c.TgZ(14,"div",8),c.YNc(15,ct,25,19,"fuse-card",9),c.YNc(16,lt,20,13,"fuse-card",10),c.YNc(17,pt,9,4,"fuse-card",11),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.hij(" ",c.lcZ(4,9,"kyc.steps.title_2")," "),c.xp6(3),c.hij(" ",c.lcZ(7,11,"kyc.steps.description_2")," "),c.xp6(3),c.Q6J("ngIf",!e.isIdentityValidated&&e.projectFlow.onboardingSettings.documentValidation.includeOCR),c.xp6(1),c.Q6J("ngIf",!e.isIdentityValidated&&!e.projectFlow.onboardingSettings.documentValidation.includeOCR),c.xp6(1),c.Q6J("ngIf",e.showAlert),c.xp6(1),c.Q6J("ngIf",!e.isIdentityValidated),c.xp6(3),c.Q6J("ngIf",e.ocrData),c.xp6(1),c.Q6J("ngIf",e.appRegistration.documentValidation),c.xp6(1),c.Q6J("ngIf",e.appRegistration.biometricValidation))},directives:[v.PQ,a.O5,E.oG,y.JJ,y.On,$.W,Z.lW,G.Ou,z.y,_.Hw],pipes:[f.Ot],styles:[".document-types[_ngcontent-%COMP%]{width:100%!important;text-align:center}.document-types[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px!important}.document-types[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{align-items:center;margin:10px}.primaryBg[_ngcontent-%COMP%]{background-color:#01236d!important;color:#fff!important}.qr-border[_ngcontent-%COMP%]{background:linear-gradient(to right,black 4px,transparent 4px) 0 0,linear-gradient(to right,black 4px,transparent 4px) 0 100%,linear-gradient(to left,black 4px,transparent 4px) 100% 0,linear-gradient(to left,black 4px,transparent 4px) 100% 100%,linear-gradient(to bottom,black 4px,transparent 4px) 0 0,linear-gradient(to bottom,black 4px,transparent 4px) 100% 0,linear-gradient(to top,black 4px,transparent 4px) 0 100%,linear-gradient(to top,black 4px,transparent 4px) 100% 100%;background-repeat:no-repeat;background-size:20px 20px}"],data:{animation:V.L}}),e}(),dt=i(34553);function mt(t,e){if(1&t&&(c.TgZ(0,"div"),c.TgZ(1,"span",10),c._uU(2),c.qZA(),c.qZA()),2&t){var n=c.oxw().$implicit;c.xp6(2),c.hij(" ",n," ")}}function gt(t,e){if(1&t&&(c.ynx(0),c._UZ(1,"input",14,15),c.BQk()),2&t){var n=c.oxw(2).$implicit,o=c.oxw().$implicit,i=c.oxw(2);c.xp6(1),c.s9C("type",i.returnQuestionData(o,n.key,"type")),c.s9C("placeholder",i.returnQuestionData(o,n.key,"placeHolder")),c.Q6J("formControlName",n.key)}}function ft(t,e){if(1&t&&(c.TgZ(0,"mat-option",18),c._uU(1),c.qZA()),2&t){var n=e.$implicit;c.Q6J("value",n),c.xp6(1),c.hij("",n," ")}}function ht(t,e){if(1&t&&(c.ynx(0),c.TgZ(1,"mat-select",16),c.YNc(2,ft,2,2,"mat-option",17),c.qZA(),c.BQk()),2&t){var n=c.oxw(2).$implicit,o=c.oxw().$implicit,i=c.oxw(2);c.xp6(1),c.s9C("formControlName",n.key),c.xp6(1),c.Q6J("ngForOf",i.returnQuestionData(o,n.key,"options"))}}function vt(t,e){if(1&t&&(c.TgZ(0,"mat-form-field",6),c.TgZ(1,"mat-label",12),c._uU(2),c.qZA(),c.YNc(3,gt,3,3,"ng-container",7),c.YNc(4,ht,3,2,"ng-container",7),c.TgZ(5,"mat-error",13),c._uU(6),c.ALo(7,"transloco"),c.qZA(),c.qZA()),2&t){var n=c.oxw().$implicit,o=c.oxw().$implicit,i=c.oxw(2);c.xp6(2),c.hij(" ",i.returnQuestionData(o,n.key,"label"),""),c.xp6(1),c.Q6J("ngIf","select"!=i.returnQuestionData(o,n.key,"type")),c.xp6(1),c.Q6J("ngIf","select"==i.returnQuestionData(o,n.key,"type")),c.xp6(2),c.hij(" ",c.lcZ(7,4,"kyc.forms.error")," ")}}function xt(t,e){if(1&t&&(c.ynx(0),c.ynx(1),c.YNc(2,vt,8,6,"mat-form-field",11),c.BQk(),c.BQk()),2&t){var n=e.$implicit;c.xp6(2),c.Q6J("ngIf",n)}}function Zt(t,e){if(1&t&&(c.TgZ(0,"div",6),c.YNc(1,mt,3,1,"div",7),c.TgZ(2,"form",8),c.YNc(3,xt,3,1,"ng-container",9),c.ALo(4,"keyvalue"),c.qZA(),c.qZA()),2&t){var n=e.$implicit,o=c.oxw(2);c.xp6(1),c.Q6J("ngIf","starting"!=n),c.xp6(1),c.Q6J("formGroup",o.formAnwsers[n]),c.xp6(1),c.Q6J("ngForOf",c.lcZ(4,3,o.formAnwsers[n].controls))}}function _t(t,e){if(1&t&&(c.TgZ(0,"div",1),c.TgZ(1,"div",2),c.TgZ(2,"div",2),c.TgZ(3,"h1",3),c._uU(4),c.ALo(5,"transloco"),c.qZA(),c.qZA(),c.TgZ(6,"div",4),c.YNc(7,Zt,5,5,"div",5),c.qZA(),c.qZA(),c.qZA()),2&t){var n=c.oxw();c.xp6(4),c.hij(" ",c.lcZ(5,2,n.form.title)," "),c.xp6(3),c.Q6J("ngForOf",n.sectionOrder)}}var bt=function(){var e=function(){function e(n,o,i){t(this,e),this._KycService=n,this._changeDetectorRef=o,this._formBuilder=i,this._unsubscribeAll=new p.xQ,this.sectionOrder=[]}return n(e,[{key:"ngOnInit",value:function(){this._observeNavigationChanges(),this._ObserveProject(),this.getForm()}},{key:"_moveToStep",value:function(t){t.projectSteps.selectedIndex=t.stepToGo}},{key:"_ObserveProject",value:function(){var t=this;this._KycService.currentAppRegistration$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(function(e){t.appRegistration=e,t.project=e.project,t.projectFlow=e.projectFlow,t._changeDetectorRef.markForCheck()})}},{key:"_observeNavigationChanges",value:function(){var t=this;this._KycService.navigationHandler$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(function(e){if(e)return t._KycService.navData.currentStep>e.stepToGo?(t._KycService.navData.currentStep=e.stepToGo,e.projectSteps.selectedIndex=e.stepToGo,void t._changeDetectorRef.markForCheck()):void(!t._validateStep(e)||t._saveChanges(e))})}},{key:"getForm",value:function(){var t=this;this._KycService.getForm({where_projectFlow:this.projectFlow._id,where_project:this.project._id,populates:["formFields","formFields.container"],sort:"-createdAt",findOne:1}).subscribe(function(e){var n;t.form=e.data,console.log({form:t.form});for(var o=0;o<e.data.formFields.length;o++){var i=e.data.formFields[o];t.questions||"container"==i.type?"container"!=i.type?"container"==i.type||t.questions[n].push(i):(t.questions||(t.questions={}),t.questions[i.label]=[],n=i.label,t.sectionOrder.push(i.label)):(t.questions={starting:[i]},n="starting",t.sectionOrder.push("starting"))}t.createFormgroupsForSection(t.questions),t._changeDetectorRef.markForCheck(),console.log(t.questions)})}},{key:"_validateStep",value:function(){if(!this.formAnwsers)return!1;var t=[];for(var e in this.formAnwsers){var n=this.formAnwsers[e];if(!n.valid)return Boolean(!1);var o=this.getAnswersFromSection(n.controls);Array.prototype.push.apply(t,o)}return this.dataToPost={answers:t},Boolean(!0)}},{key:"getAnswersFromSection",value:function(t){var e=[];for(var n in t)e.push({formField:n,answer:t[n].value});return e}},{key:"_saveChanges",value:function(t){var e=this;return(0,dt.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.saving||(e.saving=!0,e._KycService.postSubmitionForm(e.dataToPost).subscribe(function(t){e.saving=!1,e.changeAppRegistration(t.data)},function(t){console.error({err:t}),e.saving=!1}));case 1:case"end":return t.stop()}},t)}))()}},{key:"changeAppRegistration",value:function(t){var e=this;this._KycService.updateAppRegistration(this.appRegistration._id,{status:"COMPLETED",formSubmittion:t._id}).subscribe(function(t){localStorage.removeItem("accessToken"),window.location.href="".concat(e.projectFlow.redirectUrl,"?type=").concat(e.projectFlow.type,"&token=").concat(t.data.token)})}},{key:"createFormgroupsForSection",value:function(t){var e={};for(var n in t)e[n]=this.createQuestions(t[n]);this.formAnwsers=e}},{key:"createQuestions",value:function(t){for(var e={},n=0;n<t.length;n++)e[t[n]._id]=["",y.kI.required];return this._formBuilder.group(e)}},{key:"returnQuestionData",value:function(t,e,n){return this.questions[t].find(function(t){return t._id==e})[n]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(d.y),c.Y36(c.sBO),c.Y36(y.qu))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-kyc-form-filling"]],decls:1,vars:1,consts:[["class","flex-auto overflow-y-auto mx-auto poppins","cdkScrollable","",4,"ngIf"],["cdkScrollable","",1,"flex-auto","overflow-y-auto","mx-auto","poppins"],[1,"prose","prose-sm","max-w-3xl","mx-auto","sm:my-2","overflow-hidden"],[1,"verifikH1"],[1,"w-full","bg-card","shadow-lg","p-8","mt-4","rounded-2xl"],["class","w-full",4,"ngFor","ngForOf"],[1,"w-full"],[4,"ngIf"],[1,"mt-1",3,"formGroup"],[4,"ngFor","ngForOf"],[1,"verifikH3"],["class","w-full",4,"ngIf"],[1,"project-color","label-size"],[1,"p-1"],["id","question.key","matInput","",3,"type","placeholder","formControlName"],["{{question.key}}",""],["matInput","","name","question.key",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&c.YNc(0,_t,8,4,"div",0),2&t&&c.Q6J("ngIf",e.form)},directives:[a.O5,v.PQ,a.sg,y._Y,y.JL,y.sg,k.KE,k.hX,k.TO,A.Nt,y.Fj,y.JJ,y.u,q.gD,T.ey],pipes:[f.Ot,a.Nd],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins&display=swap";  .mat-horizontal-stepper-header{pointer-events:none!important}.poppins[_ngcontent-%COMP%]{font-family:Poppins!important}.project-color[_ngcontent-%COMP%]{color:#01236d!important}.motto-size[_ngcontent-%COMP%]{font-size:40px!important;font-weight:400!important;line-height:52px!important;letter-spacing:0em!important;text-align:left!important}.section-size[_ngcontent-%COMP%]{font-size:32px!important;font-weight:400!important;line-height:40px!important;letter-spacing:0em!important;text-align:left!important}.label-size[_ngcontent-%COMP%]{font-size:16px!important}']}),e}(),yt=["projectSteps"],kt=function(t,e){return{"bg-primary":t,"bg-gray-300 dark:bg-gray-600":e}};function At(t,e){if(1&t&&(c.ynx(0),c._UZ(1,"div",40),c.BQk()),2&t){var n=c.oxw().$implicit,o=c.oxw();c.xp6(1),c.Q6J("ngClass",c.WLB(1,kt,n.order<o.navData.currentStep,n.order>=o.navData.currentStep))}}function wt(t,e){1&t&&(c.ynx(0),c._UZ(1,"mat-icon",41),c.BQk()),2&t&&(c.xp6(1),c.Q6J("svgIcon","heroicons_solid:check"))}function qt(t,e){if(1&t&&(c.ynx(0),c.TgZ(1,"div",42),c._uU(2),c.qZA(),c.BQk()),2&t){var n=c.oxw().$implicit;c.xp6(2),c.hij(" ",n.order+1,"")}}function Tt(t,e){if(1&t&&(c.ynx(0),c.TgZ(1,"div",43),c._uU(2),c.qZA(),c.BQk()),2&t){var n=c.oxw().$implicit;c.xp6(2),c.hij(" ",n.order+1,"")}}var It=function(t,e,n){return{"bg-primary dark:bg-primary text-on-primary group-hover:bg-primary-800 ring-transparent":t,"ring-primary":e,"ring-gray-300 dark:ring-gray-600 group-hover:ring-gray-400":n}};function Ct(t,e){if(1&t){var n=c.EpF();c.ynx(0),c.TgZ(1,"li",33),c.YNc(2,At,2,4,"ng-container",34),c.TgZ(3,"div",35),c.NdJ("click",function(){var t=c.CHM(n).$implicit;return c.oxw().goToStep(t.order)}),c.TgZ(4,"div",36),c.YNc(5,wt,2,1,"ng-container",34),c.YNc(6,qt,3,1,"ng-container",34),c.YNc(7,Tt,3,1,"ng-container",34),c.qZA(),c.TgZ(8,"div",37),c.TgZ(9,"div",38),c._uU(10),c.ALo(11,"transloco"),c.qZA(),c.TgZ(12,"div",39),c._uU(13),c.ALo(14,"transloco"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.BQk()}if(2&t){var o=e.$implicit,i=e.last,r=c.oxw();c.xp6(1),c.ekj("current-step",o.order===r.navData.currentStep),c.xp6(1),c.Q6J("ngIf",!i),c.xp6(2),c.Q6J("ngClass",c.kEZ(13,It,o.order<r.navData.currentStep,o.order===r.navData.currentStep,o.order>r.navData.currentStep)),c.xp6(1),c.Q6J("ngIf",o.order<r.navData.currentStep),c.xp6(1),c.Q6J("ngIf",o.order===r.navData.currentStep),c.xp6(1),c.Q6J("ngIf",o.order>r.navData.currentStep),c.xp6(3),c.Oqu(c.lcZ(11,9,o.title)),c.xp6(3),c.hij("",c.lcZ(14,11,o.subtitle)," ")}}function Ft(t,e){if(1&t&&c._UZ(0,"mat-progress-bar",44),2&t){var n=c.oxw();c.Q6J("value",100*(n.navData.currentStep+1)/n.sideMenuSteps.length)}}function St(t,e){1&t&&(c.TgZ(0,"div",47),c._UZ(1,"app-kyc-basic-information"),c.qZA())}function jt(t,e){1&t&&(c.TgZ(0,"div",47),c._UZ(1,"app-kyc-document-validation"),c.qZA())}function Ot(t,e){1&t&&(c.TgZ(0,"div",47),c._UZ(1,"app-kyc-form-filling"),c.qZA())}function Nt(t,e){if(1&t&&(c.YNc(0,St,2,0,"div",46),c.YNc(1,jt,2,0,"div",46),c.YNc(2,Ot,2,0,"div",46)),2&t){var n=c.oxw().$implicit;c.Q6J("ngIf",0===n.order),c.xp6(1),c.Q6J("ngIf",1===n.order),c.xp6(1),c.Q6J("ngIf",2===n.order)}}function Qt(t,e){if(1&t&&(c.ynx(0),c.TgZ(1,"mat-tab"),c._uU(2),c.YNc(3,Nt,3,3,"ng-template",45),c.qZA(),c.BQk()),2&t){var n=c.oxw();c.xp6(2),c.hij(" ",n.navData.currentStep," step. ")}}function Jt(t,e){1&t&&(c.TgZ(0,"span",48),c._uU(1,"Next"),c.qZA())}function Ut(t,e){1&t&&(c.TgZ(0,"span",48),c._uU(1,"Crear Cuenta"),c.qZA())}var Mt=function(){var e=function(){function e(n,o,i,r,a,c,s){t(this,e),this._changeDetectorRef=n,this._KycService=o,this._fuseMediaWatcherService=i,this._route=r,this._router=a,this._fuseConfirmationService=c,this.translocoService=s,this.sideMenuSteps=[{order:0,title:"kyc.steps.title_1",subtitle:"kyc.steps.description_1"},{order:1,title:"kyc.steps.title_2",subtitle:"kyc.steps.description_2"},{order:2,title:"kyc.steps.title_3",subtitle:"kyc.steps.description_3"}],this.drawerMode="side",this.drawerOpened=!0,this.categories=[],this.currentStep=0,this._unsubscribeAll=new p.xQ,this.navData=this._KycService.navData}return n(e,[{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(null)}},{key:"ngOnInit",value:function(){var t=this;this._ObserveProject(),this._fuseMediaWatcherService.onMediaChange$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(function(e){e.matchingAliases.includes("lg")?(t.drawerMode="side",t.drawerOpened=!0):(t.drawerMode="over",t.drawerOpened=!1),t._changeDetectorRef.markForCheck()})}},{key:"_ObserveProject",value:function(){var t=this;this._KycService.currentAppRegistration$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(function(e){t.appRegistration=e,t.project=e.project,t.projectFlow=e.projectFlow,t.project&&(t._initNavTab(),t._changeDetectorRef.markForCheck())})}},{key:"_initNavTab",value:function(){!this.project||this.projectFlow.onboardingSettings.form||(this.sideMenuSteps.pop(),this._changeDetectorRef.markForCheck())}},{key:"goToNextStep",value:function(){this._KycService.navData.currentStep>this.sideMenuSteps.length-1||this.goToStep(this._KycService.navData.currentStep+1)}},{key:"goToPreviousStep",value:function(){0!==this._KycService.navData.currentStep&&this.goToStep(this._KycService.navData.currentStep-1)}},{key:"goToStep",value:function(t){void 0===t||this._KycService.navData.currentStep===t||(this._KycService.navigationChange({projectSteps:this.projectSteps,stepToGo:t}),this._changeDetectorRef.markForCheck())}},{key:"trackByFn",value:function(t){}},{key:"tempFunction",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.sBO),c.Y36(d.y),c.Y36(m.T),c.Y36(s.gz),c.Y36(s.F0),c.Y36(g.R),c.Y36(f.Vn))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-kyc-project"]],viewQuery:function(t,e){var n;(1&t&&c.Gf(yt,7),2&t)&&(c.iGM(n=c.CRH())&&(e.projectSteps=n.first))},decls:55,vars:25,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full"],[1,"w-90","dark:bg-gray-900","white-background","border-right",3,"autoFocus","mode","opened"],["matDrawer",""],[1,"flex","flex-col","items-start","p-8"],[1,"w-12"],[3,"src"],[1,"mt-3","verifikH3"],[1,"py-2","px-8","white-background"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-col","overflow-hidden"],[1,"lg:hidden","flex","flex-0","items-center","py-2","pl-4","pr-6","sm:py-4","md:pl-6","md:pr-8","border-b","lg:border-b-0","bg-card","dark:bg-transparent"],[1,"ml-2.5","text-md","sm:text-xl","font-medium","tracking-tight","truncate"],["class","hidden lg:block flex-0 h-0.5 w-full",3,"value",4,"ngIf"],["cdkScrollable","",1,"flex-auto","overflow-y-auto","content-background"],[1,"fuse-mat-no-header",3,"animationDuration"],["projectSteps",""],[1,"z-10","sticky","hidden","lg:flex","bottom-4","p-4"],[1,"flex","items-center","justify-center","mx-auto","p-2","rounded-full","shadow-lg","big-stepper"],["mat-flat-button","",1,"flex-0","primaryBg",3,"click"],[1,"mr-2",3,"svgIcon"],[1,"mr-1"],[1,"flex","items-center","justify-center","mx-2.5","font-medium","leading-5","text-on-primary"],[1,"mx-0.5","text-hint"],["class","ml-1",4,"ngIf"],[1,"ml-2",3,"svgIcon"],[1,"lg:hidden","flex","items-center","p-4","border-t","bg-card"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[1,"flex","items-center","justify-center","ml-1","lg:ml-2","font-medium","leading-5"],[1,"flex-auto","ml-6","rounded-full",3,"value"],["mat-icon-button","",1,"ml-4",3,"click"],["mat-icon-button","",1,"ml-0.5",3,"click"],[1,"relative","group","py-6"],[4,"ngIf"],[1,"relative","flex","items-start","cursor-pointer",3,"click"],[1,"flex","flex-0","items-center","justify-center","w-8","h-8","rounded-full","ring-2","ring-inset","bg-card","dark:bg-default",3,"ngClass"],[1,"ml-4"],[1,"font-medium","leading-4"],[1,"mt-1.5","text-md","leading-4","text-secondary"],[1,"absolute","top-6","left-4","w-0.5","h-full","-ml-px",3,"ngClass"],[1,"icon-size-5","text-current",3,"svgIcon"],[1,"text-md","font-semibold","text-primary","dark:text-primary-500"],[1,"text-md","font-semibold","text-hint","group-hover:text-secondary"],[1,"hidden","lg:block","flex-0","h-0.5","w-full",3,"value"],["matTabContent","","style","background-color: #E5E5E5;"],["class","pt-4 px-4 sm:px-4 md:px-0 lg:px-0",4,"ngIf"],[1,"pt-4","px-4","sm:px-4","md:px-0","lg:px-0"],[1,"ml-1"]],template:function(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"div",0),c.TgZ(1,"mat-drawer-container",1),c.TgZ(2,"mat-drawer",2,3),c.TgZ(4,"div",4),c.TgZ(5,"div",5),c._UZ(6,"img",6),c.qZA(),c.TgZ(7,"div",7),c._uU(8),c.qZA(),c.qZA(),c.TgZ(9,"div",8),c.TgZ(10,"ol"),c.YNc(11,Ct,15,17,"ng-container",9),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"mat-drawer-content",10),c.TgZ(13,"div",11),c.TgZ(14,"div",5),c._UZ(15,"img",6),c.qZA(),c.TgZ(16,"h2",12),c._uU(17),c.qZA(),c.qZA(),c.YNc(18,Ft,1,1,"mat-progress-bar",13),c.TgZ(19,"div",14),c.TgZ(20,"mat-tab-group",15,16),c.YNc(22,Qt,4,1,"ng-container",9),c.qZA(),c.TgZ(23,"div",17),c.TgZ(24,"div",18),c.TgZ(25,"button",19),c.NdJ("click",function(){return e.goToPreviousStep()}),c._UZ(26,"mat-icon",20),c.TgZ(27,"span",21),c._uU(28,"Prev"),c.qZA(),c.qZA(),c.TgZ(29,"div",22),c.TgZ(30,"span"),c._uU(31),c.qZA(),c.TgZ(32,"span",23),c._uU(33,"/"),c.qZA(),c.TgZ(34,"span"),c._uU(35),c.qZA(),c.qZA(),c.TgZ(36,"button",19),c.NdJ("click",function(){return e.goToNextStep()}),c.YNc(37,Jt,2,0,"span",24),c.YNc(38,Ut,2,0,"span",24),c._UZ(39,"mat-icon",25),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(40,"div",26),c.TgZ(41,"button",27),c.NdJ("click",function(){return c.CHM(n),c.MAs(3).toggle()}),c._UZ(42,"mat-icon",28),c.qZA(),c.TgZ(43,"div",29),c.TgZ(44,"span"),c._uU(45),c.qZA(),c.TgZ(46,"span",23),c._uU(47,"/"),c.qZA(),c.TgZ(48,"span"),c._uU(49),c.qZA(),c.qZA(),c._UZ(50,"mat-progress-bar",30),c.TgZ(51,"button",31),c.NdJ("click",function(){return e.goToPreviousStep()}),c._UZ(52,"mat-icon",28),c.qZA(),c.TgZ(53,"button",32),c.NdJ("click",function(){return e.goToNextStep()}),c._UZ(54,"mat-icon",28),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}2&t&&(c.xp6(2),c.Q6J("autoFocus",!1)("mode",e.drawerMode)("opened",e.drawerOpened),c.xp6(4),c.Q6J("src",e.project.branding.logo,c.LSH),c.xp6(2),c.Oqu(e.project.name),c.xp6(3),c.Q6J("ngForOf",e.sideMenuSteps)("ngForTrackBy",e.trackByFn),c.xp6(4),c.Q6J("src",e.project.branding.logo,c.LSH),c.xp6(2),c.hij(" ",e.project.name," "),c.xp6(1),c.Q6J("ngIf",e.sideMenuSteps&&e.navData.currentStep+1),c.xp6(2),c.Q6J("animationDuration","200"),c.xp6(2),c.Q6J("ngForOf",e.sideMenuSteps)("ngForTrackBy",e.trackByFn),c.xp6(4),c.Q6J("svgIcon","heroicons_outline:arrow-narrow-left"),c.xp6(5),c.Oqu(e.navData.currentStep+1),c.xp6(4),c.Oqu(e.sideMenuSteps.length),c.xp6(2),c.Q6J("ngIf",e.navData.currentStep+1<e.sideMenuSteps.length),c.xp6(1),c.Q6J("ngIf",e.navData.currentStep+1===e.sideMenuSteps.length),c.xp6(1),c.Q6J("svgIcon","heroicons_outline:arrow-narrow-right"),c.xp6(3),c.Q6J("svgIcon","heroicons_outline:view-list"),c.xp6(3),c.Oqu(e.navData.currentStep+1),c.xp6(4),c.Oqu(e.sideMenuSteps.length),c.xp6(1),c.Q6J("value",100*(e.navData.currentStep+1)/e.sideMenuSteps.length),c.xp6(2),c.Q6J("svgIcon","heroicons_outline:arrow-narrow-left"),c.xp6(2),c.Q6J("svgIcon","heroicons_outline:arrow-narrow-right"))},directives:[h.kh,h.jA,a.sg,h.LW,a.O5,v.PQ,x.SP,Z.lW,_.Hw,b.pW,a.mk,x.uX,x.Vc,Y,ut,bt],pipes:[f.Ot],styles:[".verifikH1[_ngcontent-%COMP%]{color:#01236d!important;font-weight:600;margin-bottom:0!important}.verifikH3[_ngcontent-%COMP%]{color:#01236d!important;font-weight:600;font-size:22px;line-height:28px;padding-bottom:5px}.verifikH4[_ngcontent-%COMP%]{color:#01236d!important;font-weight:600;font-size:16px;line-height:20px}.primaryColor[_ngcontent-%COMP%]{color:#01236d!important}.primaryBg[_ngcontent-%COMP%]{background-color:#01236d!important;color:#fff!important}.divider-height[_ngcontent-%COMP%]{width:2px;background-color:rgba(128,128,128,.431);height:100%;margin-top:5px;margin-bottom:5px}.secondaryVerifikLabel[_ngcontent-%COMP%]{background:#E5EBFD;padding:8px;margin:6px;color:#0036e7;font-weight:600;border-radius:15px;text-align:center;min-width:100px}.secondaryVerifikButton[_ngcontent-%COMP%]{background-color:#e5ebfd!important;color:#0036e7!important;font-weight:400}.deleteVerifikButton[_ngcontent-%COMP%]{background-color:rgba(220,53,69,.58)!important;color:#fff!important;font-weight:400}.mainVerifikButton[_ngcontent-%COMP%]{background-color:#0036e7!important;color:#fff!important}@media only screen and (max-width: 595px){.verifikH1[_ngcontent-%COMP%]{font-size:20px}.xs-mt16[_ngcontent-%COMP%]{margin-top:16px}.main-card[_ngcontent-%COMP%]{width:100%!important}}@media only screen and (min-width: 600px){.verifikH1[_ngcontent-%COMP%]{font-size:26px}.main-card[_ngcontent-%COMP%]{width:100%!important}}@media only screen and (min-width: 768px){.verifikH1[_ngcontent-%COMP%]{font-size:30px}.main-card[_ngcontent-%COMP%]{width:500px!important}}@media only screen and (min-width: 889px){.verifikH1[_ngcontent-%COMP%]{font-size:34px}.main-card[_ngcontent-%COMP%]{width:500px!important}}@media only screen and (min-width: 1200px){.verifikH1[_ngcontent-%COMP%]{font-size:36px}.main-card[_ngcontent-%COMP%]{width:500px!important}}.white-background[_ngcontent-%COMP%]{background-color:#fff!important}.border-right[_ngcontent-%COMP%]{border-right:1px solid #80808030}.content-background[_ngcontent-%COMP%]{background-color:#f9f9ff!important}.big-stepper[_ngcontent-%COMP%]{background-color:#01236d!important;color:#fff!important}.mat-tab-label-container[_ngcontent-%COMP%]{display:none!important}mat-tab-header[_ngcontent-%COMP%]{display:none!important}[_nghost-%COMP%]     .mat-tab-header{display:none!important}"]}),e}(),Pt=i(40205),Rt=i(5304),Dt=i(44642),Yt=i(60467),Lt=function(){var e=function(){function e(n,o,i){t(this,e),this._router=n,this._kycService=o,this._buttonMockService=i}return n(e,[{key:"resolve",value:function(t,e){var n=this;if(t.queryParams.demo)for(var o in localStorage.clear(),this._buttonMockService.isDemo=!0,Dt.og.email=t.queryParams.email,Dt.og.phone=t.queryParams.phone,t.queryParams)Dt.fB[o]&&(Dt.og.informationValidation[o]=t.queryParams[o]);t.queryParams.token&&localStorage.setItem("accessToken",t.queryParams.token);var i=t.params.id,r=localStorage.getItem("accessToken");return r&&"start/:id"===t.routeConfig.path&&this._router.navigate(["/kyc/project/",i]),!r&&"project/:id"===t.routeConfig.path&&this._router.navigate(["/kyc/start/",i]),r?this._kycService.getAppRegistrationWithJWT(i).pipe((0,Rt.K)(function(t){return localStorage.removeItem("accessToken"),n._router.navigate(["/kyc/start/",i]),(0,Pt._)(t)})):this._kycService.getProjectForNewKYC(i).pipe((0,Rt.K)(function(t){console.error(t);var o=e.url.split("/").slice(0,-1).join("/");return n._router.navigateByUrl(o),(0,Pt._)(t)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(s.F0),c.LFG(d.y),c.LFG(Yt.v))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Bt=i(16738),Vt=i.n(Bt),Ht=i(92340),Kt=i(57408);function Et(t,e){1&t&&(c.TgZ(0,"mat-error",29),c._uU(1),c.ALo(2,"transloco"),c.qZA()),2&t&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"start.required_first_name")," "))}function $t(t,e){1&t&&(c.TgZ(0,"mat-error",29),c._uU(1),c.ALo(2,"transloco"),c.qZA()),2&t&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"start.required_last_name")," "))}function Gt(t,e){if(1&t&&(c.TgZ(0,"div",23),c.TgZ(1,"mat-form-field",24),c.TgZ(2,"mat-label"),c._uU(3),c.ALo(4,"transloco"),c.qZA(),c._UZ(5,"input",25),c.YNc(6,Et,3,3,"mat-error",26),c.qZA(),c.TgZ(7,"mat-form-field",27),c.TgZ(8,"mat-label"),c._uU(9),c.ALo(10,"transloco"),c.qZA(),c._UZ(11,"input",28),c.YNc(12,$t,3,3,"mat-error",26),c.qZA(),c.qZA()),2&t){var n=c.oxw(2);c.xp6(3),c.Oqu(c.lcZ(4,6,"start.first_name")),c.xp6(2),c.Q6J("formControlName","firstName"),c.xp6(1),c.Q6J("ngIf",n.signUpForm.get("firstName").hasError("required")),c.xp6(3),c.hij(" ",c.lcZ(10,8,"start.last_name"),""),c.xp6(2),c.Q6J("formControlName","lastName"),c.xp6(1),c.Q6J("ngIf",n.signUpForm.get("lastName").hasError("required"))}}function zt(t,e){1&t&&(c.TgZ(0,"mat-error",29),c._uU(1),c.ALo(2,"transloco"),c.qZA()),2&t&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"start.required_email")," "))}function Wt(t,e){1&t&&(c.TgZ(0,"mat-error",29),c._uU(1),c.ALo(2,"transloco"),c.qZA()),2&t&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"start.invalid_email")," "))}function Xt(t,e){1&t&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"transloco"),c.qZA()),2&t&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"start.send_otp_button")," "))}function te(t,e){1&t&&c._UZ(0,"mat-progress-spinner",34),2&t&&c.Q6J("diameter",12)("mode","indeterminate")}function ee(t,e){if(1&t&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&t){var n=c.oxw(3);c.xp6(1),c.hij(" (",n.emailValidation.diff,") s ")}}function ne(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"div",30),c.TgZ(1,"mat-form-field",31),c.TgZ(2,"mat-label"),c._uU(3),c.ALo(4,"transloco"),c.qZA(),c._UZ(5,"input",32),c.YNc(6,zt,3,3,"mat-error",26),c.YNc(7,Wt,3,3,"mat-error",26),c.qZA(),c.TgZ(8,"button",33),c.NdJ("click",function(t){return c.CHM(n),c.oxw(2).sendOTP("email"),t.preventDefault()}),c.YNc(9,Xt,3,3,"span",19),c.YNc(10,te,1,2,"mat-progress-spinner",20),c.YNc(11,ee,2,1,"span",19),c.qZA(),c.qZA()}if(2&t){var o=c.oxw(2);c.xp6(3),c.hij(" ",c.lcZ(4,8,"start.email"),""),c.xp6(2),c.Q6J("formControlName","email"),c.xp6(1),c.Q6J("ngIf",o.signUpForm.get("email").hasError("required")),c.xp6(1),c.Q6J("ngIf",o.signUpForm.get("email").hasError("email")),c.xp6(1),c.Q6J("disabled",o.emailSent),c.xp6(1),c.Q6J("ngIf",!o.emailSent),c.xp6(1),c.Q6J("ngIf",o.emailSent),c.xp6(1),c.Q6J("ngIf",o.emailSent)}}function oe(t,e){1&t&&c._UZ(0,"mat-icon",39),2&t&&c.Q6J("svgIcon","heroicons_solid:eye")}function ie(t,e){1&t&&c._UZ(0,"mat-icon",39),2&t&&c.Q6J("svgIcon","heroicons_solid:eye-off")}function re(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"mat-form-field",24),c.TgZ(1,"mat-label"),c._uU(2),c.ALo(3,"transloco"),c.qZA(),c._UZ(4,"input",35,36),c.TgZ(6,"button",37),c.NdJ("click",function(){c.CHM(n);var t=c.MAs(5);return t.type="password"===t.type?"number":"password"}),c.YNc(7,oe,1,1,"mat-icon",38),c.YNc(8,ie,1,1,"mat-icon",38),c.qZA(),c.TgZ(9,"mat-error",29),c._uU(10),c.ALo(11,"transloco"),c.qZA(),c.qZA()}if(2&t){var o=c.MAs(5);c.xp6(2),c.hij(" ",c.lcZ(3,5,"start.email_otp"),""),c.xp6(2),c.Q6J("formControlName","emailOTP"),c.xp6(3),c.Q6J("ngIf","password"===o.type),c.xp6(1),c.Q6J("ngIf","text"===o.type),c.xp6(2),c.hij(" ",c.lcZ(11,7,"start.code_is_required")," ")}}function ae(t,e){if(1&t&&(c.ynx(0),c.TgZ(1,"mat-option",46),c.TgZ(2,"span",43),c.TgZ(3,"span",47),c._uU(4),c.qZA(),c.TgZ(5,"span",48),c._uU(6),c.qZA(),c.qZA(),c.qZA(),c.BQk()),2&t){var n=e.$implicit;c.xp6(1),c.Q6J("value",n.code),c.xp6(3),c.Oqu(n.name),c.xp6(2),c.Oqu(n.code)}}function ce(t,e){if(1&t&&(c.TgZ(0,"mat-select",42),c.TgZ(1,"mat-select-trigger"),c.TgZ(2,"span",43),c.TgZ(3,"span",44),c._uU(4),c.qZA(),c.qZA(),c.qZA(),c.YNc(5,ae,7,3,"ng-container",45),c.qZA()),2&t){var n=c.oxw(3);c.Q6J("formControl",n.signUpForm.get("countryCode")),c.xp6(4),c.Oqu(n.signUpForm.get("countryCode").value),c.xp6(1),c.Q6J("ngForOf",n.countries)("ngForTrackBy",n.trackByFn)}}function se(t,e){1&t&&(c.TgZ(0,"mat-error",29),c._uU(1),c.ALo(2,"transloco"),c.qZA()),2&t&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"start.required_phone")," "))}function le(t,e){1&t&&(c.TgZ(0,"mat-error",29),c._uU(1),c.ALo(2,"transloco"),c.qZA()),2&t&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"start.invalid_phone")," "))}function pe(t,e){if(1&t&&(c.TgZ(0,"mat-form-field",49),c.TgZ(1,"mat-label"),c._uU(2),c.ALo(3,"transloco"),c.qZA(),c._UZ(4,"input",50),c.YNc(5,se,3,3,"mat-error",26),c.YNc(6,le,3,3,"mat-error",26),c.qZA()),2&t){var n=c.oxw(3);c.xp6(2),c.hij(" ",c.lcZ(3,4,"start.phone"),""),c.xp6(2),c.Q6J("formControlName","phone"),c.xp6(1),c.Q6J("ngIf",n.signUpForm.get("phone").hasError("required")),c.xp6(1),c.Q6J("ngIf",n.signUpForm.get("phone").hasError("phone"))}}function ue(t,e){1&t&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"transloco"),c.qZA()),2&t&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"start.send_otp_button")," "))}function de(t,e){1&t&&c._UZ(0,"mat-progress-spinner",34),2&t&&c.Q6J("diameter",12)("mode","indeterminate")}function me(t,e){if(1&t&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&t){var n=c.oxw(3);c.xp6(1),c.hij(" (",n.phoneValidation.diff,") s ")}}function ge(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"div",30),c.TgZ(1,"mat-form-field",24),c.TgZ(2,"mat-label"),c._uU(3),c.ALo(4,"transloco"),c.qZA(),c.YNc(5,ce,6,4,"mat-select",40),c.qZA(),c.YNc(6,pe,7,6,"mat-form-field",41),c.TgZ(7,"button",33),c.NdJ("click",function(t){return c.CHM(n),c.oxw(2).sendOTP("phone"),t.preventDefault()}),c.YNc(8,ue,3,3,"span",19),c.YNc(9,de,1,2,"mat-progress-spinner",20),c.YNc(10,me,2,1,"span",19),c.qZA(),c.qZA()}if(2&t){var o=c.oxw(2);c.xp6(3),c.hij(" ",c.lcZ(4,7,"start.country_code"),""),c.xp6(2),c.Q6J("ngIf",o.countries),c.xp6(1),c.Q6J("ngIf",o.groupFields.phone),c.xp6(1),c.Q6J("disabled",o.smsSent),c.xp6(1),c.Q6J("ngIf",!o.smsSent),c.xp6(1),c.Q6J("ngIf",o.smsSent),c.xp6(1),c.Q6J("ngIf",o.smsSent)}}function fe(t,e){1&t&&c._UZ(0,"mat-icon",39),2&t&&c.Q6J("svgIcon","heroicons_solid:eye")}function he(t,e){1&t&&c._UZ(0,"mat-icon",39),2&t&&c.Q6J("svgIcon","heroicons_solid:eye-off")}function ve(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"mat-form-field",24),c.TgZ(1,"mat-label"),c._uU(2),c.ALo(3,"transloco"),c.qZA(),c._UZ(4,"input",51,36),c.TgZ(6,"button",37),c.NdJ("click",function(){c.CHM(n);var t=c.MAs(5);return t.type="password"===t.type?"text":"password"}),c.YNc(7,fe,1,1,"mat-icon",38),c.YNc(8,he,1,1,"mat-icon",38),c.qZA(),c.TgZ(9,"mat-error",29),c._uU(10),c.ALo(11,"transloco"),c.qZA(),c.qZA()}if(2&t){var o=c.MAs(5);c.xp6(2),c.hij("",c.lcZ(3,5,"start.phone_otp")," "),c.xp6(2),c.Q6J("formControlName","phoneOTP"),c.xp6(3),c.Q6J("ngIf","password"===o.type),c.xp6(1),c.Q6J("ngIf","text"===o.type),c.xp6(2),c.hij(" ",c.lcZ(11,7,"start.code_is_required")," ")}}function xe(t,e){1&t&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"transloco"),c.qZA()),2&t&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"start.create_account_button")," "))}function Ze(t,e){1&t&&c._UZ(0,"mat-progress-spinner",34),2&t&&c.Q6J("diameter",24)("mode","indeterminate")}function _e(t,e){if(1&t&&(c.TgZ(0,"fuse-alert",52),c._uU(1),c.ALo(2,"transloco"),c.qZA()),2&t){var n=c.oxw(2);c.Q6J("appearance","outline")("showIcon",!1)("type",n.alert.type)("@shake","error"===n.alert.type),c.xp6(1),c.hij(" ",c.lcZ(2,5,"errors."+n.alert.message)," ")}}var be=function(t){return["/passwordless/auth/",t]};function ye(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"div",1),c.TgZ(1,"div",2),c.TgZ(2,"div",3),c.TgZ(3,"div",4),c.TgZ(4,"div",5),c._UZ(5,"img",6),c.qZA(),c.TgZ(6,"div",7),c._uU(7),c.qZA(),c.qZA(),c.TgZ(8,"div",8),c._uU(9),c.ALo(10,"transloco"),c.qZA(),c.TgZ(11,"div",9),c.TgZ(12,"div"),c._uU(13),c.ALo(14,"transloco"),c.qZA(),c.TgZ(15,"a",10),c._uU(16),c.ALo(17,"transloco"),c.qZA(),c.qZA(),c.TgZ(18,"form",11),c.YNc(19,Gt,13,10,"div",12),c.YNc(20,ne,12,10,"div",13),c.YNc(21,re,12,9,"mat-form-field",14),c.YNc(22,ge,11,9,"div",13),c.YNc(23,ve,12,9,"mat-form-field",14),c.TgZ(24,"div",15),c.TgZ(25,"mat-checkbox",16),c.TgZ(26,"span"),c._uU(27),c.ALo(28,"transloco"),c.qZA(),c.TgZ(29,"a",17),c.NdJ("click",function(){return c.CHM(n),c.oxw().openConditions("tos")}),c._uU(30),c.ALo(31,"transloco"),c.qZA(),c.TgZ(32,"span"),c._uU(33),c.ALo(34,"transloco"),c.qZA(),c.TgZ(35,"a",17),c.NdJ("click",function(){return c.CHM(n),c.oxw().openConditions("pt")}),c._uU(36),c.ALo(37,"transloco"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(38,"button",18),c.NdJ("click",function(){return c.CHM(n),c.oxw().signUp()}),c.YNc(39,xe,3,3,"span",19),c.YNc(40,Ze,1,2,"mat-progress-spinner",20),c.qZA(),c.qZA(),c.YNc(41,_e,3,7,"fuse-alert",21),c.TgZ(42,"div",22),c._UZ(43,"languages"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){var o=c.oxw();c.xp6(5),c.Q6J("src",o.project.branding.logo,c.LSH),c.xp6(2),c.Oqu(o.project.name),c.xp6(2),c.hij(" ",c.lcZ(10,23,"start.title")," "),c.xp6(4),c.Oqu(c.lcZ(14,25,"start.existing_account_label")),c.xp6(2),c.Q6J("routerLink",c.VKq(37,be,o.project._id)),c.xp6(1),c.hij(" ",c.lcZ(17,27,"start.login_here_link")," "),c.xp6(2),c.Q6J("formGroup",o.signUpForm),c.xp6(1),c.Q6J("ngIf",o.groupFields.firstName),c.xp6(1),c.Q6J("ngIf",o.groupFields.email),c.xp6(1),c.Q6J("ngIf",o.groupFields.emailOTP),c.xp6(1),c.Q6J("ngIf",o.groupFields.phone),c.xp6(1),c.Q6J("ngIf",o.groupFields.phoneOTP),c.xp6(2),c.Q6J("color","primary")("formControlName","agreements"),c.xp6(2),c.Oqu(c.lcZ(28,29,"start.terms_1")),c.xp6(3),c.hij("",c.lcZ(31,31,"start.terms_2")," "),c.xp6(3),c.Oqu(c.lcZ(34,33,"start.terms_3")),c.xp6(3),c.hij("",c.lcZ(37,35,"start.terms_4")," "),c.xp6(2),c.Q6J("color","primary")("disabled",!o.isFormValid()),c.xp6(1),c.Q6J("ngIf",!o.signUpForm.disabled),c.xp6(1),c.Q6J("ngIf",o.signUpForm.disabled),c.xp6(1),c.Q6J("ngIf",o.showAlert)}}var ke=[{path:"",component:l,resolve:{},children:[{path:"project/:id",pathMatch:"full",component:Mt,resolve:{project:Lt}},{path:"start/:id",pathMatch:"full",component:function(){var e=function(){function e(n,o,i,r,a){t(this,e),this._KycService=n,this._formBuilder=o,this._changeDetectorRef=i,this._router=r,this._activeRoute=a,this.alert={type:"success",message:""},this.showAlert=!1,this._unsubscribeAll=new p.xQ,this.countries=this._KycService.countryCodes}return n(e,[{key:"ngOnInit",value:function(){var t=this;this._ObserveProject(),this._initForm(),this._activeRoute.queryParams.subscribe(function(e){t.isDemo=Boolean(e.demo)})}},{key:"_ObserveProject",value:function(){var t=this;this._KycService.currentProject$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(function(e){t.project=e,t.projectFlow=e.currentProjectFlow,t._changeDetectorRef.markForCheck()})}},{key:"_initForm",value:function(){this.groupFields={agreements:[!1,[y.kI.required]]};var t=Ht.N.production,e={email:t?"":"jhon.doe@verifik.co",emailOTP:t?"":123456,countryCode:"+57",phone:t?"":"123456789",phoneOTP:t?"":123456,firstName:t?"":"Jhon",lastName:t?"":"Doe"};this.projectFlow.email&&(this.groupFields.email=[e.email,[y.kI.required,y.kI.email]],this.groupFields.emailOTP=[e.emailOTP,[y.kI.required,y.kI.minLength(6)]]),this.projectFlow.phone&&(this.groupFields.countryCode=[e.countryCode,[y.kI.required]],this.groupFields.phone=[e.phone,[y.kI.required]],this.groupFields.phoneOTP=[e.phoneOTP,[y.kI.required,y.kI.minLength(6)]]),this.projectFlow.onboardingSettings.basicInformation.fullName&&(this.groupFields.firstName=[e.firstName,[y.kI.required]],this.groupFields.lastName=[e.lastName,[y.kI.required]]),this.signUpForm=this._formBuilder.group(this.groupFields)}},{key:"isFormValid",value:function(){return Boolean(this.signUpForm.valid&&this.signUpForm.value.agreements)}},{key:"signUp",value:function(){var t=this;!this.signUpForm.valid||!this.signUpForm.value.agreements||this._KycService.createAccount(this.project._id,this.signUpForm.value).subscribe(function(e){t.codeError=void 0,localStorage.setItem("accessToken",e.data.token),e.data.qr&&localStorage.setItem("qr",e.data.qr),t._router.navigate(["/kyc/project",t.project._id])},function(e){t.codeError=void 0,t.showAlert=!0,t.alert.type="error",t.alert.message=e.error.message})}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(null)}},{key:"sendOTP",value:function(t){var e=this;switch(t){case"email":this._KycService.sendEmailValidation(this.signUpForm.value.email).subscribe(function(n){e.emailValidation=n.data,e.emailSent=!0,e.startTimer(t)},function(t){e.codeError=void 0,e.showAlert=!0,e.alert.type="error",e.alert.message=t.error.message});break;case"phone":this._KycService.sendPhoneValidation(this.signUpForm.value.countryCode,this.signUpForm.value.phone).subscribe(function(n){e.phoneValidation=n.data,e.smsSent=!0,e.startTimer(t)},function(t){e.codeError=void 0,e.showAlert=!0,e.alert.type="error",e.alert.message=t.error.message})}}},{key:"startTimer",value:function(t){var e,n=this;switch(t){case"email":if(!this.emailValidation)return 0;this.emailValidation.diff=Vt()(this.emailValidation.expiresAt).diff(new Date,"seconds")-780,e=setInterval(function(){n.emailValidation.diff>0?n.emailValidation.diff--:(clearInterval(e),n.emailSent=!1,n.emailValidation=null),n._changeDetectorRef.detectChanges()},1e3);break;case"phone":if(!this.phoneValidation)return 0;this.phoneValidation.diff=Vt()(this.phoneValidation.expiresAt).diff(new Date,"seconds")-780,e=setInterval(function(){n.phoneValidation.diff>0?n.phoneValidation.diff--:(clearInterval(e),n.smsSent=!1,n.phoneValidation=null),n._changeDetectorRef.detectChanges()},1e3)}}},{key:"openConditions",value:function(t){"tos"!=t?window.open("".concat(this.project.privacyUrl),"_blank"):window.open("".concat(this.project.termsAndConditionsUrl),"_blank")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(d.y),c.Y36(y.qu),c.Y36(c.sBO),c.Y36(s.F0),c.Y36(s.gz))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-kyc-account-creation-with-basic-information"]],decls:1,vars:1,consts:[["class","flex flex-col flex-auto items-center sm:justify-center min-w-0",4,"ngIf"],[1,"flex","flex-col","flex-auto","items-center","sm:justify-center","min-w-0"],[1,"w-full","sm:w-auto","py-8","px-4","sm:p-12","sm:rounded-2xl","sm:shadow","sm:bg-card","mx-auto","main-card"],[1,"w-full","mx-auto","sm:mx-0",2,"max-width","500px"],[1,"w-full","grid","grid-cols-4"],[1,"w-12"],[3,"src"],[1,"mt-3","text-2xl","font-extrabold","tracking-tight","leading-tight","col-span-3"],[1,"mt-8","text-4xl","font-extrabold","tracking-tight","leading-tight"],[1,"flex","items-baseline","mt-0.5","font-medium"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],[1,"mt-8",3,"formGroup"],["class","grid grid-cols-2",4,"ngIf"],["class","grid grid-cols-4",4,"ngIf"],["class","w-full",4,"ngIf"],[1,"inline-flex","items-end","w-full","mt-1.5"],[3,"color","formControlName"],[1,"ml-1","text-primary-500","hover:underline",3,"click"],["mat-flat-button","",1,"fuse-mat-button-large","w-full","mt-6",3,"color","disabled","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],["class","mt-8",3,"appearance","showIcon","type",4,"ngIf"],[1,"w-full","text-center","mt-6"],[1,"grid","grid-cols-2"],[1,"w-full"],["id","firstName","matInput","",3,"formControlName"],["class","p-1",4,"ngIf"],[1,"ml-2","w-full"],["id","lastName","matInput","",3,"formControlName"],[1,"p-1"],[1,"grid","grid-cols-4"],[1,"w-full","col-span-3"],["id","email","matInput","","type","email",3,"formControlName"],["mat-stroked-button","","color","primary",1,"mt-7","ml-2",3,"disabled","click"],[3,"diameter","mode"],["id","emailOTP","matInput","","type","password",3,"formControlName"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"icon-size-5",3,"svgIcon"],["class","mr-1.5","matPrefix","",3,"formControl",4,"ngIf"],["class","w-full col-span-2 ml-1 mr-1",4,"ngIf"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"flex","items-center"],[1,"sm:mx-0.5","font-medium","text-default"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],[1,"ml-2"],[1,"ml-2","font-medium"],[1,"w-full","col-span-2","ml-1","mr-1"],["id","phone","matInput","","type","number",3,"formControlName"],["id","phoneOTP","matInput","","type","password",3,"formControlName"],[1,"mt-8",3,"appearance","showIcon","type"]],template:function(t,e){1&t&&c.YNc(0,ye,44,39,"div",0),2&t&&c.Q6J("ngIf",e.project)},directives:[a.O5,s.yS,y._Y,y.JL,y.sg,E.oG,y.JJ,y.u,Z.lW,Kt.v,k.KE,k.hX,A.Nt,y.Fj,k.TO,G.Ou,k.R9,_.Hw,q.gD,k.qo,y.oH,q.$L,a.sg,T.ey,y.wV,$.W],pipes:[f.Ot],styles:[".main-card[_ngcontent-%COMP%]{width:500px!important}.w-120px[_ngcontent-%COMP%]{width:95%!important}@media only screen and (max-width: 595px){.main-card[_ngcontent-%COMP%]{width:100%!important}}@media only screen and (min-width: 600px){.main-card[_ngcontent-%COMP%]{width:100%!important}}@media only screen and (min-width: 768px){.main-card[_ngcontent-%COMP%]{width:500px!important}}@media only screen and (min-width: 889px){.main-card[_ngcontent-%COMP%]{width:500px!important}}@media only screen and (min-width: 1200px){.main-card[_ngcontent-%COMP%]{width:500px!important}}"],data:{animation:V.L}}),e}(),resolve:{project:Lt}}]}],Ae=i(45396),we=i(11436),qe=i(7853),Te=i(44466),Ie=i(77001),Ce=i(33935),Fe=i(58341),Se=i(21554),je=i(82120),Oe=i(99835),Ne=i(15935),Qe=i(10588),Je=i(1769),Ue=i(87636),Me=(i(34564),i(70946));i(39490),i(36461),i(80521),i(25917),i(39761);var Pe=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[Me.vT]]}),e}();i(75319),i(43190),i(88002),i(87519),i(17238);var Re=function(){var e=function e(){t(this,e),this.changes=new p.xQ,this.optionalLabel="Optional"};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Yz7({factory:function(){return new e},token:e,providedIn:"root"}),e}(),De={provide:Re,deps:[[new c.FiY,new c.tp0,Re]],useFactory:function(t){return t||new Re}},Ye=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[De,T.rD],imports:[[T.BQ,a.ez,Ue.eL,Z.ot,Pe,_.Ps,T.si],T.BQ]}),e}(),Le=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[s.Bz.forChild(ke),a.ez,f.y4,Z.ot,k.lN,_.Ps,A.c,Ae.rP,we.AV,qe.V,Te.m,Ie.ZX,E.p9,Ce.Tx,Fe.Hi,Se.Bb,je.k,G.Cq,b.Cv,q.LD,Oe.y,x.Nh,h.SJ,w.FA,T.XK,Ye,Ne.J,Qe.fC,H.Is,Je.t]]}),e}()}}])}();