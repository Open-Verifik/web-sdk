!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}(self.webpackChunkverifik_sdk_app=self.webpackChunkverifik_sdk_app||[]).push([[629],{5629:function(e,n,i){i.r(n),i.d(n,{PasswordlessModule:function(){return Nt}});var r,a=i(38583),s=i(42096),c=i(51095),l=i(98295),u=i(76627),p=i(49983),m=i(45396),d=i(11436),f=i(7853),g=i(44466),h=i(77001),Z=i(7539),_=i(33935),v=i(58341),x=i(21554),b=i(82120),y=i(4885),w=i(12178),A=i(67441),I=i(99835),T=i(65939),q=i(23017),F=i(43220),k=i(72458),L=i(37716),O=i(63423),J=((r=function(){function e(){t(this,e)}return o(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(t){return new(t||r)},r.\u0275cmp=L.Xpm({type:r,selectors:[["app-passwordless-root"]],decls:1,vars:0,template:function(t,e){1&t&&L._UZ(0,"router-outlet")},directives:[O.lC],styles:[""]}),r),U=i(89596),C=i(28288),j=i(3679),Q=i(79765),N=i(16738),P=i.n(N),S=i(13653),Y=i(46782),D=i(26215),R=i(92340),V=i(93342),B=i(25187),M=function(){var e=function(){function e(o){t(this,e),this._httpWrapper=o,this.baseUrl=R.N.baseUrl,this._currentProject=new D.X(null)}return o(e,[{key:"currentProject$",get:function(){return this._currentProject.asObservable()}},{key:"sendEmailValidation",value:function(t,e){return this._httpWrapper.sendRequest("post","".concat(this.baseUrl,"v2/projects/email-login"),{email:e,id:t,type:"login"}).pipe((0,V.b)(function(t){}))}},{key:"sendPhoneValidation",value:function(t,e,o){return this._httpWrapper.sendRequest("post","".concat(this.baseUrl,"v2/projects/phone-login"),{phone:o,countryCode:e,id:t,type:"login"}).pipe((0,V.b)(function(t){}))}},{key:"confirmEmailValidation",value:function(t,e,o,n){return this._httpWrapper.sendRequest("post","".concat(this.baseUrl,"v2/projects/email-login/confirm"),{email:e,otp:o,id:t,authenticatorOTP:n,type:"login",ipData:JSON.parse(localStorage.getItem("ipData"))}).pipe((0,V.b)(function(t){}))}},{key:"confirmPhoneValidation",value:function(t,e,o,n,i){return this._httpWrapper.sendRequest("post","".concat(this.baseUrl,"v2/projects/phone-login/confirm"),{phone:o,otp:n,countryCode:e,id:t,authenticatorOTP:i,type:"login",ipData:JSON.parse(localStorage.getItem("ipData"))}).pipe((0,V.b)(function(t){}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(L.LFG(B.O))},e.\u0275prov=L.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),E=i(51374),H=function(){var e=function(){function e(o){t(this,e),this._httpWrapper=o,this.baseUrl=R.N.baseUrl}return o(e,[{key:"getGeoLocation",value:function(){return this._httpWrapper.sendRequest("get","https://ipv4.am.i.mullvad.net/json")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(L.LFG(B.O))},e.\u0275prov=L.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),G=i(57408),W=i(13994);function z(t,e){if(1&t&&(L.TgZ(0,"fuse-alert",25),L._uU(1),L.ALo(2,"transloco"),L.qZA()),2&t){var o=L.oxw(3);L.Q6J("appearance","outline")("showIcon",!1)("type",o.alert.type)("@shake","error"===o.alert.type),L.xp6(1),L.hij(" ",L.lcZ(2,5,"errors."+o.alert.message)," ")}}function X(t,e){1&t&&(L.TgZ(0,"mat-error",30),L._uU(1),L.ALo(2,"transloco"),L.qZA()),2&t&&(L.xp6(1),L.hij(" ",L.lcZ(2,1,"login.required_email")," "))}function $(t,e){1&t&&(L.TgZ(0,"mat-error",30),L._uU(1),L.ALo(2,"transloco"),L.qZA()),2&t&&(L.xp6(1),L.hij(" ",L.lcZ(2,1,"login.invalid_email")," "))}function K(t,e){1&t&&L._UZ(0,"mat-icon",36),2&t&&L.Q6J("svgIcon","heroicons_solid:eye")}function tt(t,e){1&t&&L._UZ(0,"mat-icon",36),2&t&&L.Q6J("svgIcon","heroicons_solid:eye-off")}function et(t,e){if(1&t){var o=L.EpF();L.TgZ(0,"mat-form-field",31),L.TgZ(1,"mat-label"),L._uU(2),L.ALo(3,"transloco"),L.qZA(),L._UZ(4,"input",32,33),L.TgZ(6,"button",34),L.NdJ("click",function(){L.CHM(o);var t=L.MAs(5);return t.type="password"===t.type?"text":"password"}),L.YNc(7,K,1,1,"mat-icon",35),L.YNc(8,tt,1,1,"mat-icon",35),L.qZA(),L.TgZ(9,"mat-error"),L._uU(10," OTP is required "),L.qZA(),L.qZA()}if(2&t){var n=L.MAs(5);L.xp6(2),L.Oqu(L.lcZ(3,4,"login.email_otp")),L.xp6(2),L.Q6J("formControlName","emailOTP"),L.xp6(3),L.Q6J("ngIf","password"===n.type),L.xp6(1),L.Q6J("ngIf","text"===n.type)}}function ot(t,e){if(1&t&&(L.TgZ(0,"mat-form-field",26),L.TgZ(1,"mat-label"),L._uU(2),L.ALo(3,"transloco"),L.qZA(),L._UZ(4,"input",27),L.YNc(5,X,3,3,"mat-error",28),L.YNc(6,$,3,3,"mat-error",28),L.qZA(),L.YNc(7,et,11,6,"mat-form-field",29)),2&t){var o=L.oxw(3);L.xp6(2),L.Oqu(L.lcZ(3,5,"login.email")),L.xp6(2),L.Q6J("formControlName","email"),L.xp6(1),L.Q6J("ngIf",o.signInForm.get("email").hasError("required")),L.xp6(1),L.Q6J("ngIf",o.signInForm.get("email").hasError("email")),L.xp6(1),L.Q6J("ngIf",o.emailSent)}}function nt(t,e){if(1&t&&(L.ynx(0),L.TgZ(1,"mat-option",46),L.TgZ(2,"span",43),L.TgZ(3,"span",47),L._uU(4),L.qZA(),L.TgZ(5,"span",48),L._uU(6),L.qZA(),L.qZA(),L.qZA(),L.BQk()),2&t){var o=e.$implicit;L.xp6(1),L.Q6J("value",o.code),L.xp6(3),L.Oqu(o.name),L.xp6(2),L.Oqu(o.code)}}function it(t,e){if(1&t&&(L.TgZ(0,"mat-select",42),L.TgZ(1,"mat-select-trigger"),L.TgZ(2,"span",43),L.TgZ(3,"span",44),L._uU(4),L.qZA(),L.qZA(),L.qZA(),L.YNc(5,nt,7,3,"ng-container",45),L.qZA()),2&t){var o=L.oxw(5);L.Q6J("formControl",o.signInForm.get("countryCode")),L.xp6(4),L.Oqu(o.signInForm.get("countryCode").value),L.xp6(1),L.Q6J("ngForOf",o.countries)("ngForTrackBy",o.trackByFn)}}function rt(t,e){1&t&&(L.TgZ(0,"mat-error",30),L._uU(1),L.ALo(2,"transloco"),L.qZA()),2&t&&(L.xp6(1),L.hij(" ",L.lcZ(2,1,"login.required_phone")," "))}function at(t,e){1&t&&(L.TgZ(0,"mat-error",30),L._uU(1),L.ALo(2,"transloco"),L.qZA()),2&t&&(L.xp6(1),L.hij(" ",L.lcZ(2,1,"login.invalid_phone")," "))}function st(t,e){if(1&t&&(L.TgZ(0,"mat-form-field",49),L.TgZ(1,"mat-label"),L._uU(2),L.ALo(3,"transloco"),L.qZA(),L._UZ(4,"input",50),L.YNc(5,rt,3,3,"mat-error",28),L.YNc(6,at,3,3,"mat-error",28),L.qZA()),2&t){var o=L.oxw(5);L.xp6(2),L.Oqu(L.lcZ(3,4,"login.phone")),L.xp6(2),L.Q6J("formControlName","phone"),L.xp6(1),L.Q6J("ngIf",o.signInForm.get("phone").hasError("required")),L.xp6(1),L.Q6J("ngIf",o.signInForm.get("phone").hasError("phone"))}}function ct(t,e){if(1&t&&(L.TgZ(0,"div",38),L.TgZ(1,"mat-form-field",39),L.TgZ(2,"mat-label"),L._uU(3),L.ALo(4,"transloco"),L.qZA(),L.YNc(5,it,6,4,"mat-select",40),L.qZA(),L.YNc(6,st,7,6,"mat-form-field",41),L.qZA()),2&t){var o=L.oxw(4);L.xp6(3),L.Oqu(L.lcZ(4,3,"login.country_code")),L.xp6(2),L.Q6J("ngIf",o.countries),L.xp6(1),L.Q6J("ngIf",o.groupFields.phone)}}function lt(t,e){1&t&&L._UZ(0,"mat-icon",36),2&t&&L.Q6J("svgIcon","heroicons_solid:eye")}function ut(t,e){1&t&&L._UZ(0,"mat-icon",36),2&t&&L.Q6J("svgIcon","heroicons_solid:eye-off")}function pt(t,e){if(1&t){var o=L.EpF();L.TgZ(0,"mat-form-field",31),L.TgZ(1,"mat-label"),L._uU(2),L.ALo(3,"transloco"),L.qZA(),L._UZ(4,"input",51,33),L.TgZ(6,"button",34),L.NdJ("click",function(){L.CHM(o);var t=L.MAs(5);return t.type="password"===t.type?"text":"password"}),L.YNc(7,lt,1,1,"mat-icon",35),L.YNc(8,ut,1,1,"mat-icon",35),L.qZA(),L.TgZ(9,"mat-error",30),L._uU(10),L.ALo(11,"transloco"),L.qZA(),L.qZA()}if(2&t){var n=L.MAs(5);L.xp6(2),L.hij(" ",L.lcZ(3,5,"login.phone_otp"),""),L.xp6(2),L.Q6J("formControlName","phoneOTP"),L.xp6(3),L.Q6J("ngIf","password"===n.type),L.xp6(1),L.Q6J("ngIf","text"===n.type),L.xp6(2),L.hij(" ",L.lcZ(11,7,"login.code_is_required")," ")}}function mt(t,e){if(1&t&&(L.YNc(0,ct,7,5,"div",37),L.YNc(1,pt,12,9,"mat-form-field",29)),2&t){var o=L.oxw(3);L.Q6J("ngIf",o.groupFields.phone),L.xp6(1),L.Q6J("ngIf",o.smsSent)}}function dt(t,e){1&t&&(L.TgZ(0,"span"),L._uU(1),L.ALo(2,"transloco"),L.qZA()),2&t&&(L.xp6(1),L.hij(" ",L.lcZ(2,1,"login.login_button")," "))}function ft(t,e){1&t&&L._UZ(0,"mat-progress-spinner",53),2&t&&L.Q6J("diameter",24)("mode","indeterminate")}function gt(t,e){if(1&t){var o=L.EpF();L.TgZ(0,"button",52),L.NdJ("click",function(){return L.CHM(o),L.oxw(3).signIn()}),L.YNc(1,dt,3,3,"span",20),L.YNc(2,ft,1,2,"mat-progress-spinner",21),L.qZA()}if(2&t){var n=L.oxw(3);L.Q6J("color","primary")("disabled",!n.isFormValid()),L.xp6(1),L.Q6J("ngIf",!n.signInForm.disabled),L.xp6(1),L.Q6J("ngIf",n.signInForm.disabled)}}function ht(t,e){1&t&&(L.TgZ(0,"span"),L._uU(1),L.ALo(2,"transloco"),L.qZA()),2&t&&(L.xp6(1),L.hij(" ",L.lcZ(2,1,"login.send_otp")," "))}function Zt(t,e){1&t&&L._UZ(0,"mat-progress-spinner",53),2&t&&L.Q6J("diameter",12)("mode","indeterminate")}function _t(t,e){if(1&t&&(L.TgZ(0,"span"),L._uU(1),L.qZA()),2&t){var o=L.oxw(3);L.xp6(1),L.hij(" (",o.phoneValidation.diff,") s ")}}function vt(t,e){if(1&t&&(L.TgZ(0,"span"),L._uU(1),L.qZA()),2&t){var o=L.oxw(3);L.xp6(1),L.hij(" (",o.emailValidation.diff,") s ")}}function xt(t,e){1&t&&(L.TgZ(0,"h3",54),L._uU(1,"O"),L.qZA())}function bt(t,e){1&t&&L._UZ(0,"mat-progress-spinner",53),2&t&&L.Q6J("diameter",12)("mode","indeterminate")}function yt(t,e){if(1&t){var o=L.EpF();L.TgZ(0,"button",55),L.NdJ("click",function(){return L.CHM(o),L.oxw(3).startBiometric()}),L.TgZ(1,"span"),L._uU(2),L.ALo(3,"transloco"),L.qZA(),L.YNc(4,bt,1,2,"mat-progress-spinner",21),L.qZA()}if(2&t){var n=L.oxw(3);L.Q6J("disabled",!n.canUseBiometrics()),L.xp6(2),L.hij(" ",L.lcZ(3,3,"login.use_biometrics_button")," "),L.xp6(2),L.Q6J("ngIf",!n.biometricsReady)}}var wt=function(t){return["/kyc/project/",t]};function At(t,e){if(1&t){var o=L.EpF();L.TgZ(0,"div",3),L.TgZ(1,"div",4),L.TgZ(2,"div",5),L.TgZ(3,"div",6),L._UZ(4,"img",7),L.qZA(),L.TgZ(5,"div",8),L._uU(6),L.qZA(),L.qZA(),L.TgZ(7,"div",9),L._uU(8),L.ALo(9,"transloco"),L._UZ(10,"br"),L._uU(11),L.ALo(12,"transloco"),L.qZA(),L.TgZ(13,"div",10),L.TgZ(14,"div"),L._uU(15),L.ALo(16,"transloco"),L.qZA(),L.TgZ(17,"a",11),L._uU(18),L.ALo(19,"transloco"),L.qZA(),L.qZA(),L.YNc(20,z,3,7,"fuse-alert",12),L.TgZ(21,"form",13),L.TgZ(22,"mat-tab-group",14),L.NdJ("selectedTabChange",function(t){return L.CHM(o),L.oxw(2).selectLogin(t)}),L.TgZ(23,"mat-tab",15),L.ALo(24,"transloco"),L.YNc(25,ot,8,7,"ng-template",16),L.qZA(),L.TgZ(26,"mat-tab",15),L.ALo(27,"transloco"),L.YNc(28,mt,2,2,"ng-template",16),L.qZA(),L.qZA(),L.TgZ(29,"div",17),L.YNc(30,gt,3,4,"button",18),L.TgZ(31,"button",19),L.NdJ("click",function(t){return L.CHM(o),L.oxw(2).sendOTP(t)}),L.YNc(32,ht,3,3,"span",20),L.YNc(33,Zt,1,2,"mat-progress-spinner",21),L.YNc(34,_t,2,1,"span",20),L.YNc(35,vt,2,1,"span",20),L.qZA(),L.YNc(36,xt,2,0,"h3",22),L.YNc(37,yt,5,5,"button",23),L.qZA(),L.qZA(),L.TgZ(38,"div",24),L._UZ(39,"languages"),L.qZA(),L.qZA(),L.qZA()}if(2&t){var n=L.oxw(2);L.xp6(4),L.Q6J("src",n.project.branding.logo,L.LSH),L.xp6(2),L.Oqu(n.project.name),L.xp6(2),L.hij(" ",L.lcZ(9,22,"login.title_1"),","),L.xp6(3),L.hij(" ",L.lcZ(12,24,"login.title_2")," "),L.xp6(4),L.hij("",L.lcZ(16,26,"login.no_account")," "),L.xp6(2),L.Q6J("routerLink",L.VKq(34,wt,n.project._id)),L.xp6(1),L.Oqu(L.lcZ(19,28,"login.register_here_link")),L.xp6(2),L.Q6J("ngIf",n.showAlert),L.xp6(1),L.Q6J("formGroup",n.signInForm),L.xp6(1),L.s9C("selectedIndex","email"==n.typeLogin?0:1),L.xp6(1),L.s9C("label",L.lcZ(24,30,"login.email")),L.s9C("disabled",!n.projectFlow.email),L.xp6(3),L.s9C("label",L.lcZ(27,32,"login.phone")),L.s9C("disabled",!n.projectFlow.phone),L.xp6(4),L.Q6J("ngIf",!n.activeSendOtp),L.xp6(1),L.Q6J("disabled",!n.activeSendOtp),L.xp6(1),L.Q6J("ngIf",n.activeSendOtp),L.xp6(1),L.Q6J("ngIf",!n.activeSendOtp),L.xp6(1),L.Q6J("ngIf","phone"==n.typeLogin&&n.smsSent),L.xp6(1),L.Q6J("ngIf","email"==n.typeLogin&&n.emailSent),L.xp6(1),L.Q6J("ngIf",n.projectFlow.faceLiveness),L.xp6(1),L.Q6J("ngIf",n.projectFlow.faceLiveness)}}function It(t,e){1&t&&(L.TgZ(0,"h2",60),L._uU(1),L.ALo(2,"transloco"),L.qZA()),2&t&&(L.xp6(1),L.hij(" ",L.lcZ(2,1,"login.two_factor_title")," "))}function Tt(t,e){1&t&&(L.TgZ(0,"p"),L._uU(1),L.ALo(2,"transloco"),L.TgZ(3,"a",64),L._uU(4,"Authy"),L.qZA(),L._uU(5,", "),L.TgZ(6,"a",65),L._uU(7,"Google Authenticator"),L.qZA(),L._uU(8),L.ALo(9,"transloco"),L.qZA()),2&t&&(L.xp6(1),L.hij(" ",L.lcZ(2,2,"login.two_factor_description_1")," "),L.xp6(7),L.hij(" ",L.lcZ(9,4,"login.two_factor_description_2")," "))}function qt(t,e){1&t&&(L.TgZ(0,"h2",60),L._uU(1),L.ALo(2,"transloco"),L.qZA()),2&t&&(L.xp6(1),L.hij(" ",L.lcZ(2,1,"login.two_factor_second_time_title")," "))}function Ft(t,e){1&t&&(L.TgZ(0,"p"),L._uU(1),L.ALo(2,"transloco"),L.qZA()),2&t&&(L.xp6(1),L.hij(" ",L.lcZ(2,1,"login.two_factor_second_time_description")," "))}function kt(t,e){1&t&&(L.TgZ(0,"mat-error",30),L._uU(1),L.ALo(2,"transloco"),L.qZA()),2&t&&(L.xp6(1),L.hij(" ",L.lcZ(2,1,"login.required_authenticator_otp")," "))}function Lt(t,e){if(1&t){var o=L.EpF();L.TgZ(0,"div",3),L.TgZ(1,"div",56),L.TgZ(2,"div",5),L.TgZ(3,"div",6),L._UZ(4,"img",7),L.qZA(),L.TgZ(5,"div",8),L._uU(6),L.qZA(),L.qZA(),L.TgZ(7,"div",57),L.YNc(8,It,3,3,"h2",58),L.YNc(9,Tt,10,6,"p",20),L.YNc(10,qt,3,3,"h2",58),L.YNc(11,Ft,3,3,"p",20),L._UZ(12,"img",59),L.TgZ(13,"h2",60),L._uU(14),L.qZA(),L.TgZ(15,"form",61),L.TgZ(16,"mat-form-field",26),L.TgZ(17,"mat-label"),L._uU(18),L.ALo(19,"transloco"),L.qZA(),L._UZ(20,"input",62),L.YNc(21,kt,3,3,"mat-error",28),L.qZA(),L.qZA(),L.TgZ(22,"button",63),L.NdJ("click",function(){return L.CHM(o),L.oxw(2).signIn()}),L.TgZ(23,"span"),L._uU(24),L.ALo(25,"transloco"),L.qZA(),L.qZA(),L.qZA(),L.qZA(),L.TgZ(26,"div",24),L._UZ(27,"languages"),L.qZA(),L.qZA()}if(2&t){var n=L.oxw(2);L.xp6(4),L.Q6J("src",n.project.branding.logo,L.LSH),L.xp6(2),L.Oqu(n.project.name),L.xp6(2),L.Q6J("ngIf",n.secondFactorData.QRCode),L.xp6(1),L.Q6J("ngIf",n.secondFactorData.QRCode),L.xp6(1),L.Q6J("ngIf",!n.secondFactorData.QRCode),L.xp6(1),L.Q6J("ngIf",!n.secondFactorData.QRCode),L.xp6(1),L.Q6J("src",n.secondFactorData.QRCode,L.LSH),L.xp6(2),L.hij(" ",n.secondFactorData.secretKey," "),L.xp6(1),L.Q6J("formGroup",n.secondFactorForm),L.xp6(3),L.Oqu(L.lcZ(19,14,"login.two_factor_label")),L.xp6(2),L.Q6J("formControlName","authenticatorOTP"),L.xp6(1),L.Q6J("ngIf",n.secondFactorForm.get("authenticatorOTP").hasError("required")),L.xp6(1),L.Q6J("disabled",!n.secondFactorForm.valid),L.xp6(2),L.hij(" ",L.lcZ(25,16,"login.login_button")," ")}}function Ot(t,e){if(1&t&&(L.TgZ(0,"div",1),L.YNc(1,At,40,36,"div",2),L.YNc(2,Lt,28,18,"div",2),L.qZA()),2&t){var o=L.oxw();L.xp6(1),L.Q6J("ngIf",!o.secondFactorData),L.xp6(1),L.Q6J("ngIf",o.secondFactorData&&o.secondFactorForm)}}var Jt=function(){var e=function(){function e(o,n,i,r,a){t(this,e),this._passwordlessService=o,this._kycService=n,this._formBuilder=i,this._changeDetectorRef=r,this._CoreService=a,this.alert={type:"success",message:""},this.showAlert=!1,this._unsubscribeAll=new Q.xQ,this.countries=this._kycService.countryCodes}return o(e,[{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(null)}},{key:"ngOnInit",value:function(){var t=this;this._ObserveProject(),this._initForm(),this.checkIP(),!this._biometric&&(this.biometricsReady=!1,this._biometric=new U.u(this._kycService,function(e){e&&t._biometric.startSession()}),this._biometric.session$.pipe((0,S.T)(1)).pipe((0,Y.R)(this._unsubscribeAll)).subscribe(function(e){t.biometricsReady=e}),this._biometric.error$.pipe((0,S.T)(1)).pipe((0,Y.R)(this._unsubscribeAll)).subscribe(function(e){t.errorLogin(e),t.biometricsReady=!1,t._biometric.startSession()}),this._biometric.auth$.pipe((0,S.T)(1)).pipe((0,Y.R)(this._unsubscribeAll)).subscribe(function(e){t.successLogin(e),t.biometricsReady=!1,t._biometric.startSession()}))}},{key:"checkIP",value:function(){var t=this;this.ipData=localStorage.getItem("ipData"),this.ipData?this.ipData=JSON.parse(this.ipData):this._CoreService.getGeoLocation().subscribe(function(e){t.ipData={ip:e.ip,ipCountry:e.country,ipCity:e.city,ipLatitude:e.latitude,ipLongitude:e.longitude},localStorage.setItem("ipData",JSON.stringify(t.ipData))})}},{key:"_ObserveProject",value:function(){var t=this;this._kycService.currentProject$.pipe((0,Y.R)(this._unsubscribeAll)).subscribe(function(e){t.project=e,t.projectFlow=e.currentProjectFlow,t._changeDetectorRef.markForCheck()})}},{key:"_initForm",value:function(){this.typeLogin=this.projectFlow.email?"email":"phone",this.buttonSendOtp(),this.setFieldRequiredInForm(),this._init2FAForm()}},{key:"_init2FAForm",value:function(){this.secondFactorForm=this._formBuilder.group({authenticatorOTP:["",[j.kI.required,j.kI.minLength(6)]]})}},{key:"sendOTP",value:function(t){var e=this;switch(t.preventDefault(),this.typeLogin){case"email":this._passwordlessService.sendEmailValidation(this.project._id,this.signInForm.value.email).subscribe(function(t){e.emailValidation=t.data,e.emailSent=!0,e.startTimer(e.typeLogin)},function(t){e.errorLogin(t.error.message)});break;case"phone":this._passwordlessService.sendPhoneValidation(this.project._id,this.signInForm.value.countryCode,this.signInForm.value.phone).subscribe(function(t){e.phoneValidation=t.data,e.smsSent=!0,e.startTimer(e.typeLogin)},function(t){e.errorLogin(t.error.message)})}}},{key:"startTimer",value:function(t){var e,o=this;switch(t){case"email":if(!this.emailValidation)return 0;this.emailValidation.diff=P()(this.emailValidation.expiresAt).diff(new Date,"seconds")-780,e=setInterval(function(){o.emailValidation.diff>0?o.emailValidation.diff--:(clearInterval(e),o.emailSent=!1,o.emailValidation=null),o.buttonSendOtp(),o._changeDetectorRef.detectChanges()},1e3);break;case"phone":if(!this.phoneValidation)return 0;this.phoneValidation.diff=P()(this.phoneValidation.expiresAt).diff(new Date,"seconds")-780,e=setInterval(function(){o.phoneValidation.diff>0?o.phoneValidation.diff--:(clearInterval(e),o.smsSent=!1,o.phoneValidation=null),o.buttonSendOtp(),o._changeDetectorRef.detectChanges()},1e3)}}},{key:"signIn",value:function(){var t=this,e=this.signInForm.value;switch(this.typeLogin){case"email":this._passwordlessService.confirmEmailValidation(this.project._id,e.email,e.emailOTP,this.secondFactorForm.value.authenticatorOTP).subscribe(function(o){return o.data.message?(t.secondFactorData=o.data,void(t.secondFactorData.emailOTP=e.emailOTP)):t.successLogin(o.data)},function(e){console.log({err:e.error.message}),t.errorLogin(e.error.message)});break;case"phone":this._passwordlessService.confirmPhoneValidation(this.project._id,e.countryCode,e.phone,e.phoneOTP,this.secondFactorForm.value.authenticatorOTP).subscribe(function(o){if(o.data)return o.data.message?(t.secondFactorData=o.data,void(t.secondFactorData.phoneOTP=e.phoneOTP)):t.successLogin(o.data)},function(e){t.errorLogin(e.error.message)})}}},{key:"isFormValid",value:function(){return Boolean(this.signInForm.valid)}},{key:"startBiometric",value:function(){this._biometric.startAuth(this.project._id,this.signInForm.value.phone,this.signInForm.value.email)}},{key:"errorLogin",value:function(t){var e=this;this.alert={type:"error",message:t},console.log({errorLogin:t}),this.showAlert=!0,this._changeDetectorRef.detectChanges(),setTimeout(function(){e.showAlert=!1,e._changeDetectorRef.detectChanges()},1e4)}},{key:"successLogin",value:function(t){window.location.href="".concat(this.projectFlow.redirectUrl,"?type=login&token=").concat(t)}},{key:"buttonSendOtp",value:function(){this.activeSendOtp="email"===this.typeLogin?this.projectFlow.email&&!this.emailSent:this.projectFlow.phone&&!this.smsSent}},{key:"setFieldRequiredInForm",value:function(){switch(this.groupFields={email:[,],emailOTP:[,],countryCode:[,],phone:[,],phoneOTP:[,]},this.typeLogin){case"email":this.groupFields.email[1]=[j.kI.required,j.kI.email],this.groupFields.emailOTP[1]=[j.kI.required,j.kI.minLength(6)];break;case"phone":this.groupFields.countryCode[1]=[j.kI.required],this.groupFields.phone[1]=[j.kI.required],this.groupFields.phoneOTP[1]=[j.kI.required,j.kI.minLength(6)]}this.signInForm=this._formBuilder.group(this.groupFields)}},{key:"selectLogin",value:function(t){this.groupFields={},this.typeLogin=t.index?"phone":"email",this.setFieldRequiredInForm(),this.buttonSendOtp(),this._changeDetectorRef.markForCheck()}},{key:"canUseBiometrics",value:function(){var t="email"===this.typeLogin?Boolean(this.signInForm.value.email):Boolean(this.signInForm.value.countryCode&&this.signInForm.value.phone);return Boolean(this.biometricsReady&&t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(L.Y36(M),L.Y36(E.y),L.Y36(j.qu),L.Y36(L.sBO),L.Y36(H))},e.\u0275cmp=L.Xpm({type:e,selectors:[["app-passwordless-login"]],decls:1,vars:1,consts:[["class","flex flex-col flex-auto items-center sm:justify-center min-w-0",4,"ngIf"],[1,"flex","flex-col","flex-auto","items-center","sm:justify-center","min-w-0"],["class","w-full sm:w-auto py-8 px-4 sm:p-12 sm:rounded-2xl sm:shadow sm:bg-card mx-auto main-card",4,"ngIf"],[1,"w-full","sm:w-auto","py-8","px-4","sm:p-12","sm:rounded-2xl","sm:shadow","sm:bg-card","mx-auto","main-card"],[1,"w-full","mx-auto","mx-auto","sm:mx-0",2,"max-width","500px"],[1,"w-full","grid","grid-cols-4"],[1,"w-12"],[3,"src"],[1,"mt-3","text-2xl","font-extrabold","tracking-tight","leading-tight","col-span-3"],[1,"mt-8","text-4xl","font-extrabold","tracking-tight","leading-tight"],[1,"flex","items-baseline","mt-0.5","font-medium"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],["class","mt-8 -mb-4",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-8",3,"formGroup"],[3,"selectedIndex","selectedTabChange"],[3,"label","disabled"],["matTabContent",""],[1,"flex","flex-col","flex-auto","w-full","items-center","sm:justify-center"],["class","fuse-mat-button-large w-full","mat-flat-button","",3,"color","disabled","click",4,"ngIf"],["mat-stroked-button","","color","primary",1,"w-full","mt-4",3,"disabled","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],["class","m-2",4,"ngIf"],["mat-stroked-button","","class","w-full","color","primary",3,"disabled","click",4,"ngIf"],[1,"w-full","text-center","mt-6"],[1,"mt-8","-mb-4",3,"appearance","showIcon","type"],[1,"w-full","mt-4"],["id","email","matInput","",3,"formControlName"],["class","p-1",4,"ngIf"],["class","w-full",4,"ngIf"],[1,"p-1"],[1,"w-full"],["id","emailOTP","matInput","","type","password",3,"formControlName"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"icon-size-5",3,"svgIcon"],["class","grid grid-flow-col mt-4",4,"ngIf"],[1,"grid","grid-flow-col","mt-4"],[1,"w-120px"],["matPrefix","",3,"formControl",4,"ngIf"],["class","w-full col-span-3",4,"ngIf"],["matPrefix","",3,"formControl"],[1,"flex","items-center"],[1,"sm:mx-0.5","font-medium","text-default"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],[1,"ml-2"],[1,"ml-2","font-medium"],[1,"w-full","col-span-3"],["id","phone","matInput","",3,"formControlName"],["id","phoneOTP","matInput","","type","password",3,"formControlName"],["mat-flat-button","",1,"fuse-mat-button-large","w-full",3,"color","disabled","click"],[3,"diameter","mode"],[1,"m-2"],["mat-stroked-button","","color","primary",1,"w-full",3,"disabled","click"],[1,"w-full","mx-auto","mx-auto","sm:mx-0"],[1,"m-5","text-center"],["class","m-2 verifikH3",4,"ngIf"],["alt","",3,"src"],[1,"m-2","verifikH3"],[1,"",3,"formGroup"],["id","authenticatorOTP","matInput","",3,"formControlName"],["mat-stroked-button","","color","primary",1,"w-full","mt-4","mainVerifikButton",3,"disabled","click"],["href","https://authy.com/download/"],["href","https://support.google.com/accounts/answer/1066447?hl=en&co=GENIE.Platform%3DiOS"]],template:function(t,e){1&t&&L.YNc(0,Ot,3,2,"div",0),2&t&&L.Q6J("ngIf",e.project)},directives:[a.O5,O.yS,j._Y,j.JL,j.sg,T.SP,T.uX,T.Vc,c.lW,G.v,W.W,l.KE,l.hX,p.Nt,j.Fj,j.JJ,j.u,l.TO,l.R9,u.Hw,A.gD,l.qo,j.oH,A.$L,a.sg,k.ey,y.Ou],pipes:[s.Ot],styles:[".main-card[_ngcontent-%COMP%]{width:500px!important}.w-120px[_ngcontent-%COMP%]{width:95%!important}@media only screen and (max-width: 595px){.main-card[_ngcontent-%COMP%]{width:100%!important}}@media only screen and (min-width: 600px){.main-card[_ngcontent-%COMP%]{width:100%!important}}@media only screen and (min-width: 768px){.main-card[_ngcontent-%COMP%]{width:500px!important}}@media only screen and (min-width: 889px){.main-card[_ngcontent-%COMP%]{width:500px!important}}@media only screen and (min-width: 1200px){.main-card[_ngcontent-%COMP%]{width:500px!important}}"],data:{animation:C.L}}),e}(),Ut=i(40205),Ct=i(5304),jt=[{path:"",component:J,resolve:{},children:[{path:"auth/:id",pathMatch:"full",component:Jt,resolve:{project:function(){var e=function(){function e(o,n){t(this,e),this._router=o,this._kycService=n}return o(e,[{key:"resolve",value:function(t,e){var o=this;return this._kycService.getProjectForNewKYC(t.params.id,"login").pipe((0,Ct.K)(function(t){console.error({message:t.message});var n=e.url.split("/").slice(0,-1).join("/");return o._router.navigateByUrl(n),(0,Ut._)(t)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(L.LFG(O.F0),L.LFG(E.y))},e.\u0275prov=L.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]}],Qt=i(10588),Nt=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=L.oAB({type:e}),e.\u0275inj=L.cJS({imports:[[O.Bz.forChild(jt),a.ez,s.y4,c.ot,l.lN,u.Ps,p.c,m.rP,d.AV,f.V,g.m,h.ZX,Z.p9,_.Tx,v.Hi,x.Bb,b.k,y.Cq,w.Cv,A.LD,I.y,T.Nh,q.SJ,F.FA,k.XK,Qt.fC]]}),e}()}}])}();